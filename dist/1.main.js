(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{241:function(e,t,o){"use strict";var n=o(11);t.__esModule=!0,t.default=void 0;var r=n(o(248));t.Maps=r.default;var i={name:"maps",type:"package",requiresFusionCharts:!0,extension:function(e){return e.addDep(r.default)}};t.default=i},243:function(e,t,o){"use strict";t.__esModule=!0,t.ATOMIC_DATA_TYPE=t.STRETCH=t.END=t.START=t.CENTER=t.DISPLAY_FLEX=t.DISPLAY_GRID=void 0;t.ATOMIC_DATA_TYPE=["string","number","function","boolean","undefined"],t.STRETCH="stretch",t.END="end",t.START="start",t.CENTER="center",t.DISPLAY_FLEX="flex",t.DISPLAY_GRID="grid"},244:function(e,t,o){"use strict";t.__esModule=!0,t.default=void 0;var n=[{initialAttr:function(){return{opacity:0}},finalAttr:function(){return{opacity:1}}}],r=function(){return n[0].slot="plot",n},i=function(e){return[{finalAttr:function(){return e.finalAttr}}]},a=function(){return n[0].slot="final",n},l=function(){return[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"final"}]},s=function(){return n[0].slot="final",n},c=function(e){return[{finalAttr:function(){return e.finalAttr}}]},h=function(e){return[{initialAttr:function(){return Object.assign({opacity:0},e.attr)},finalAttr:function(){return e.attr},slot:"plot"}]},d=function(e){return[{initialAttr:function(){return Object.assign({opacity:0},e.attr)},finalAttr:function(){return e.attr},slot:"plot"}]},g={"initial.dataset.entities":function(){return{"path.appearing":r,"path.updating":i,"labelConnectors.appearing":a,"labelConnectors.updating":null,"entityLabel.appearing":l,"*":null}},"initial.dataset.markers":function(){return{markers:null,"markerItem.appearing":s,"markerItem.updating":c}},"initial.group.mapGroup":function(){return{"group.appearing":h,"group.updating":d,"*":null}}};t.default=g},245:function(e,t,o){"use strict";var n=o(11);t.__esModule=!0,t.default=void 0;var r=n(o(16)),i=n(o(6)),a=n(o(3)),l=o(2),s=o(4),c=n(o(253)),h=o(5),d=o(25),g=n(o(255)),u=o(8),p=o(256);function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}var m={left:l.POSITION_START,right:l.POSITION_END,center:l.POSITION_MIDDLE},b=Math,v=b.min,y=b.max,k=b.floor,C=b.ceil,w=l.preDefStr.NORMAL,x={fontWeight:{1:l.preDefStr.BOLD,0:w},fontStyle:{1:"italic",0:w},textDecoration:{1:"underline",0:l.preDefStr.noneStr}};(0,h.addDep)({name:"legendAnimation",type:"animationRule",extension:g.default});var S=function(e){return Array(e).fill()},L=function(e){function t(){var t;t=e.call(this)||this;var o=(0,i.default)(t);return o._stateCosmetics={},o._legendState=[],o.dragDraw=function(){o.draw()},o.drawScroll=function(){o.createItemGroup(),o.createCaptionGroup()},o.config.handlers=function(e){var t,o;return{dragstart:function(){t=e.config.xL||e.config.xPos,o=e.config.yL||e.config.yPos},dragmove:function(n){var r,i,a=n.originalEvent.data[0],l=n.originalEvent.data[1],s=e.config,c=e.getFromEnv("chartConfig"),h=(s.borderWidth||0)+2;r=v(y(t+a,h),c.width-s.width-h),i=v(y(o+l,h),c.height-s.height-h),s.xPos=s.xL=r,s.yPos=s.yL=i,e.addJob("draw",e.dragDraw,u.priorityList&&u.priorityList.draw)}}}(o),t}(0,a.default)(t,e);var o=t.prototype;return o.createItem=function(e){var t;return t=new c.default,this.attachChild(t,"legendItem"),t.setLinkedItem("owner",e),t.addEventListener("mouseover",(function(){t.setLegendState("hover",!0)})),t.addEventListener("mouseout",(function(){t.removeLegendState("hover")})),t.getId()},o.getItem=function(e){var t=this.getChildren().legendItem;if(void 0===e)return!1;if(t)for(var o=0;o<t.length;o++)if(t[o].getId()===e)return t[o]},o.getSortedLegendItems=function(){var e,t,o=this.getChildren("legendItem")||[],n=this.config.reverselegend,r={},i=[];for(e=0,t=o.length;e<t;e++)void 0===o[e].config.index?r[t+e]=o[e]:r[o[e].config.index]=o[e];return Object.keys(r).sort((function(e,t){return n?t-e:e-t})).forEach((function(e){i.push(r[e])})),i},o.disposeItem=function(e){var t=this.getItem(e);t&&t.remove()},o.getName=function(){return"legend"},o.getType=function(){return"legend"},o.__setDefaultConfig=function(){e.prototype.__setDefaultConfig.call(this);var t=this.config;t.enabled=!0,t.symbolWidth=12,t.borderRadius=1,t.lastScrollPos=0,t.oriSymbolPadding=3,t.textPadding=4,t.scrollY=0,t.scrollX=0,t.backgroundColor="#ffffff",t.initialItemX=0,t.title={text:l.BLANKSTRING,x:0,y:0,padding:2},t.scroll={},t.horizontalScroll={},t.itemStyle={}},o.createLegendGroup=function(){var e,t=this.config,o=this.getFromEnv("chart"),n=o.config,r=this.getFromEnv("animationManager"),i=.5*(t.borderWidth||0)+2,a=this.getContainer("legendGroup");t.xL&&(t.xL=v(y(t.xL,i),n.width-t.width-i)),t.yL&&(t.yL=v(y(t.yL,i),n.height-t.height-i)),e=r.setAnimation({el:a||"group",attr:{name:"legendGroup",transform:["T",t.xL||t.xPos,t.yL||t.yPos]},container:o.getChildContainer("legendGroup"),component:this}),a||this.addContainer("legendGroup",e)},o.drawDualScrollRect=function(){var e=this.getGraphicalElement("dualScrollRect"),t=this.getGraphicalElement("scrollbarContainer"),o=this.getFromEnv("animationManager");this.config.scroll.enabled&&this.config.horizontalScroll.enabled?(e=o.setAnimation({el:e||"rect",attr:{x:this.config.width-12,y:this.config.height-12,height:12,width:12,fill:this.config.legendScrollBgColor,stroke:"none"},component:this,container:t}),e=this.addGraphicalElement("dualScrollRect",e)):e&&e.remove()},o.draw=function(){this.createLegendGroup(),this.drawLegendBox(),this.createItemGroup(),this.createCaptionGroup(),this.drawCaption(),this.createScrollGroup(),this.decideScroll(),this.drawDualScrollRect()},o.decideScroll=function(){var e=this.config,t=e.scroll.enabled,o=e.horizontalScroll.enabled;t?this.createScrollBar():e.hasScroll&&(this.getChildren("legendScrollBar")[0].remove(),e.hasScroll=!1),o?this.createScrollBar(o):e.hasHorizontalScroll&&(this.getChildren("legendHorizontalScrollBar")[0].remove(),e.hasHorizontalScroll=!1)},o.createCaptionGroup=function(){var e,t=this.getChildContainer("captionGroup"),o=this.getFromEnv("animationManager"),n=this.getContainer("legendGroup"),r=(0,l.pluckNumber)(this.config.padding,4),i=.5*r,a=y(this.config.height-r,0),s=y(this.config.width-r,0),c=","+(this.config.horizontalScroll.enabled?s:this.config.width)+","+(this.config.scroll.enabled?a:this.config.height);this.config.horizontalScroll.enabled?(e=this.addChildContainer("captionGroup",o.setAnimation({el:t&&null!==t[0]?t:"group",attr:{name:"captionGroup",transform:["T",0,this.config.scrollY||0]},container:n,component:this})),this.config.scroll.enabled?e.attr({"clip-rect":"0,"+i+c}):e.attr({"clip-rect":null})):t&&t.remove()},o.createItemGroup=function(){var e,t=this.getFromEnv("animationManager"),o=this.getContainer("legendGroup"),n=this.getChildContainer("itemGroup"),r=(0,l.pluckNumber)(this.config.padding,4),i=.5*r,a=y(this.config.height-r,0),s=y(this.config.width-r,0),c=","+(this.config.horizontalScroll.enabled?s:this.config.width)+","+(this.config.scroll.enabled?a:this.config.height);return e=t.setAnimation({el:n||"group",attr:{name:"item",transform:["T",this.config.scrollX||0,this.config.scrollY||0]},container:o,component:this}),n||this.addChildContainer("itemGroup",e),this.config.scroll.enabled||this.config.horizontalScroll.enabled?e.attr({"clip-rect":"0,"+i+c}):e.attr({"clip-rect":null}),e},o.createScrollGroup=function(){var e=this.getFromEnv("animationManager"),t=this.getChildContainer("scrollGroup"),o=this.getContainer("legendGroup");!this.config.scroll.enabled&&!this.config.horizontalScroll.enabled||this.getGraphicalElement("scrollbarContainer")||this.addGraphicalElement("scrollbarContainer",e.setAnimation({el:t||"group",attr:{name:"scrollGroup"},container:o,component:this,label:"scrollbar"}))},o.createScrollBar=function(e){void 0===e&&(e=!1);var t,o,n,r,i,a,s,c,h=this,g=h.config,p=h.getFromEnv("chart-attrib"),f=e?"legendHorizontalScrollBar":"legendScrollBar",m=h.getChildren(f)&&h.getChildren(f)[0],b=g.borderWidth||0,v=.5*b,k=(0,l.pluckNumber)(g.padding,4),C=g.width,w=g.height;t={conf:{isHorizontal:e},handler:{scroll:function(t){g.lastScrollPos=t,e?g.scrollX=(r-g.totalWidth)*t:g.scrollY=(n-g.totalHeight)*t,h.addJob("scrollDraw",h.drawScroll,u.priorityList&&u.priorityList.draw)},mousedown:function(e){e.preventDefault(),e.stopPropagation()}}},p.legendscrollbgcolor&&(t.conf.color=(0,l.convertColor)(p.legendscrollbgcolor)),m||(m=h.attachChild(new d.ScrollBar,f),e?this.config.hasHorizontalScroll=!0:this.config.hasScroll=!0),m.configure(t.conf),m.attachEventHandlers(t.handler),o=m.config,e?(i=v,a=w-m.getLogicalSpace().height-b+.5*k,c=C-b,this.config.scroll.enabled&&this.config.horizontalScroll.enabled&&(c-=12),c=y(c,0),r=y(C-k,0),o.scrollRatio=(r+k)/g.totalWidth):(n=y(w-k,0),i=C-m.getLogicalSpace().width-b+.5*k,a=v,s=w-b,this.config.scroll.enabled&&this.config.horizontalScroll.enabled&&(s-=12),s=y(s,0),o.scrollRatio=(n+k)/g.totalHeight),o.startPercent=0,o.scrollPosition=g.lastScrollPos,o.parentLayer=h.getChildContainer("scrollGroup"),m.setDimension({x:i,y:a,height:s,width:c})},o.drawCaption=function(){var e,t,o,n,r=this.getGraphicalElement("caption"),i=this.config.horizontalScroll.enabled?this.getChildContainer("captionGroup"):this.getChildContainer("itemGroup"),a=this.getFromEnv("animationManager"),s=this.config,c=(0,l.pluckNumber)(s.padding,4),h=s.scroll.enabled,d=s.width;if(s.title&&s.title.text!==l.BLANKSTRING&&s.validLegendItem){switch(s.title.align){case l.POSITION_START:o=c;break;case l.POSITION_END:o=d-c-(h?10:0);break;default:o=.5*d}t=s.title.style,e={text:s.title.text,title:s.title.originalText||l.BLANKSTRING,x:o,y:c,fill:s.title.style.color,direction:s.textDirection,"line-height":t.lineHeight,"vertical-align":l.POSITION_TOP,"text-anchor":s.title.align,opacity:1},n={"font-weight":t.fontWeight,"font-style":t.fontStyle,"font-family":t.fontFamily,"font-size":t.fontSize},r&&r.show(),r&&r[0]?a.setAnimation({el:r,attr:e,component:this,container:i,css:n}):(r=a.setAnimation({el:"text",attr:e,component:this,container:i,css:n}),r=this.addGraphicalElement("caption",r)),this.getFromEnv("toolTipController").enableToolTip(r,s.title.originalText)}else r&&a.setAnimation({el:r,component:this,doNotRemove:!0,callback:function(){r.hide()}})},o.drawLegendBox=function(){var e,t=this.getFromEnv("animationManager"),o=this.config,n=this.getContainer("legendGroup"),r=o.width,i=this.getGraphicalElement("box"),a=o.height,l=o.borderRadius,s=o.backgroundColor,c=o.borderColor,h=o.borderAlpha,d=o.backgroundAlpha,g=o.borderWidth||0;return e=t.setAnimation({el:i||"rect",attr:{x:0,y:0,width:r,height:a,r:l,stroke:c,"stroke-width":g,fill:s||"none","stroke-opacity":h/100,"fill-opacity":d/100,cursor:o.legendAllowDrag?"move":"default"},container:n,component:this,label:"legendGroup"}),i||(this.addGraphicalElement("box",e),e.shadow(o.shadow)),e},o._calculateTopPosition=function(e){var t=this.getFromEnv("chart"),o=t.config,n=e,r=t.getChildren("caption")&&t.getChildren("caption")[0],i=t.getChildren("subCaption")&&t.getChildren("subCaption")[0],a=t.getChildren("chartMenuBar")&&t.getChildren("chartMenuBar")[0],s=o.oriTopSpace;return!o.toolbarY&&a&&a.props&&a.props.height&&(s>a.props.height+a.props.y||(n=a.props.y+a.props.height)),r&&r.config&&r.config.text&&r.config.text!==l.BLANKSTRING&&r.config.height&&1===r.config.isOnTop&&(n=r.config.height+r.config.y+r.config.captionPadding),i&&i.config&&i.config.height&&1===i.config.isOnTop&&(n=i.config.y+i.config.height+(r&&r.config&&r.config.captionPadding||0)),y(n,e)},o.getPosition=function(){var e,t,o,n,r,i,a,s,c,h,d=this.getFromEnv("chart"),g=d.config,u=this.config,p=d.getChildren("canvas"),f=p&&p.length>1?g.height-p[0].config.canvasBottom:g.height-g.canvasBottom,m=g.canvasLeft,b=g.canvasRight,v=g.canvasWidth,y=u.chartMarginLeft||0,k=u.chartMarginRight||0,C=u.chartMarginTop||0,w=u.chartMarginBottom||0,x=g.actionBarHeight||0,S=u.actualCanvasMarginLeft||0,L=g.actualCanvasMarginTop||0,T=g.actualCanvasMarginBottom||0,F=g.actualCanvasMarginRight||0,E=u.alignLegendWithCanvas,N=g.height,_=g.canvasTop,A=u.width||0,I=u.height||0,P=g.borderWidth,O=g.oriCanvasLeft,M=g.oriCanvasRight,R=g.oriTopSpace,B=g.oriBottomSpace,D=0,G=0,V=u.borderWidth||0,z=u.legendPos?u.legendPos.split("-"):[],H=d.getChildren("caption")&&d.getChildren("caption")[0],j=d.getChildren("subCaption")&&d.getChildren("subCaption")[0];return z[0]!==l.POSITION_LEFT&&z[0]!==l.POSITION_RIGHT||(u.align=z[0],u.verticalAlign=l.POSITION_MIDDLE,c=u.layout="vertical"),z[0]===l.POSITION_ABSOLUTE?(e=u.legendXPosition,t=u.legendYPosition,e>(o=g.width-A-P)&&(e=o),t>(n=g.height-I-P)&&(t=n)):c?(z[0]===l.POSITION_LEFT?e=y+S+P:z[0]===l.POSITION_RIGHT&&(e=g.width-k-F-A-P),D=(0,l.pluckNumber)(R,_),G=(0,l.pluckNumber)(B,f),z[1]===l.POSITION_TOP?(t=D+(u.y||0),t=this._calculateTopPosition(t)):z[1]===l.POSITION_BOTTOM?(t=N-G-I+(u.y||0),(h=G-(P+w+x+(H&&0===H.config.isOnTop&&H.config.height?H.config.height+H.config.captionPadding:0)+(j&&0===H.config.isOnTop?j.config.height:0)))<0&&(t+=h)):t=D+.5*(N-G-D-I)+(u.y||0)):(a=g.width-(y+S+(k+F)),s=E?v-A:a-A,r=E?(0,l.pluckNumber)(O,m):y+S,i=E?g.width-(0,l.pluckNumber)(M,b):k+F,e=z[1]===l.POSITION_LEFT?r:z[1]===l.POSITION_RIGHT?g.width-(A+i):r+s/2,z[0]===l.POSITION_TOP?(t=C+L,t=this._calculateTopPosition(t)):t=N-I-T-w-x),(0,l.crispBound)(e,t,A,I,V)},o.setTranslation=function(e,t){var o=this.config;o._translateX=e,o._translateY=t,o.translate="t"+e+","+t},o.allocatePosition=function(){var e,t=this.config;e=t.translate?(0,l.crispBound)(t._translateX,t._translateY,t.width,t.height,t.borderWidth):this.getPosition(),t.xPos=e.x,t.yPos=e.y,t.width=e.width,t.height=e.height},o._manageLegendPosition=function(e){var t,o=this.config,n=o.legendPos?o.legendPos.split("-"):[],r={left:0,right:0,top:0,bottom:0};return o.padding=4,o.textPadding=4,t=n[0]===l.POSITION_ABSOLUTE?this._placeLegendBlockBottom(e,.6):n[0]===l.POSITION_LEFT||n[0]===l.POSITION_RIGHT?this._placeLegendBlockRight(e):this._placeLegendBlockBottom(e),n[0]===l.POSITION_LEFT?r.left=t&&t.right||0:n[0]===l.POSITION_RIGHT?r.right=t&&t.right||0:n[0]===l.POSITION_TOP?r.top=t&&t.bottom||0:n[0]!==l.POSITION_ABSOLUTE&&(r.bottom=t&&t.bottom||0,r.right=t&&t.right||0),r},o.setDimension=function(e){var t,o,n,i,a,s,c,h,d,g,u,m,b,w,x,L,T,F,E,N,_,A,I,P,O,M,R,B=this.config,D=this.getSortedLegendItems(),G=D.length,V=e.width,z=e.height,H=z,j=0,W=0,Y=0,X=0,K=0,U=0,J=0,$=[],Z=B.padding,q=B.textPadding,Q=this.getFromEnv("smartLabel"),ee=this.getStateCosmetics("default"),te=parseInt(ee.text["font-size"],10)||10,oe=B.title,ne=oe.padding,re=0,ie=B.minimiseWrappingInLegend,ae=B.legendPadding,le=B.legendScale,se=B.alignLegendWithCanvas,ce=B.numColumns,he=B.numRows,de=B.oriSymbolPadding,ge=Number.MAX_SAFE_INTEGER,ue=V,pe=!1,fe=!!he,me=0;for(u={width:2*Z,height:2*Z},(g=te+1)<=0&&(g=1),V=Math.max(V-2*Z,0),de*=le,(g=v(g*=le,V))<=0&&(de=g=0),B.symbolWidth=g,B.textPadding=4,B.legendHeight=d=g+2*de,B.rowHeight=s=y(parseInt(ee.text["line-height"],10)||12,d),a=q+de+Z,Q.setStyle((0,l.extend2)({},ee.text)),m=Q.getOriSize(l.TESTSTR).height,c=ae+B.borderWidth/2+1,c=y(v(c,z-m-8),0),ae=.05*s,B.initialItemY=0,B.initialItemX=0,O=d+ae+q+de+2*Z,b=0;b<G;b+=1)o=t=(i=D[b]).config||(i.config={}),(n=t.name=(0,l.parseUnsafeString)(o.label))===l.BLANKSTRING||0===o.enabled||!1===o.enabled||i.getState("removed")?t.enabled=0:(t.enabled=1,Y+=1,_=!0,A=Q.getOriSize(n),j=y(j,v(A.width,V-O)),U=y(U,v(A.height,H)),t._selfTotalWidth=A.width+O,W+=A.width);if(B.validLegendItem=_,X=W/Y,W+=O*Y,B.x=!se&&W>ue?0:B.x,_){if(X+=O,j+=O,oe.oriText!==l.BLANKSTRING&&(pe=!0,Q.setStyle(oe.style),A=Q.getSmartText(oe.oriText,V-2*Z),oe.text=A.text,A.tooltext&&(oe.originalText=A.tooltext),re=A.width+2*Z,J=A.height+ne),x=j,he?!ce&&he?(me=1,Y<he&&(he=Y),ce=C(Y/he)):C(Y/ce)<he&&C(Y/he)<ce||Y>ce*he?he=C(Y/ce):ce===C(Y/he)&&(me=1):W<=V?x=1===(he=C(Y/(ce=ce||Y)))?W/Y:j:!ce&&V>j&&(ie||1.5*X>j)?(Y<(ce=k(V/j))&&(ce=Y),x=j):ce&&V/ce>X?(x=V/ce)>j&&(x=j):!ce&&V>=2*X?(Y<(ce=k(V/X))&&(ce=Y),(x=k(V/ce))>j&&(x=j)):ce||(ce=1,x=V),K=fe?j:x,!fe&&1.5*X<j&&(x=X),he&&!ie){var be,ve,ye=K;j>1.5*X&&(ye=X),ve=v(Y,k(V/ye)),be=C(Y/ve),B.numRows&&be!==he||B.numColumns&&ve!==ce||1===he&&1!==be||(K=ye,ce=ve,he=be)}for(Q.setStyle((0,l.extend2)({},ee.text)),b=0;b<G;b++)t=D[b].config,1===he&&(K=j>2.5*X?X:t._selfTotalWidth),0===(h=Math.ceil(K-O))?(t.name=l.BLANKSTRING,t._totalWidth=g+de,t._selfTotalWidth=t._totalWidth,t._selfTotalHeight=s):(A=Q.getSmartText(t.name,h+Z),t.name=A.text,t._textHeight=A.height,A.tooltext&&(t.originalText=A.tooltext),t._selfTotalHeight=A.height+q>s?q+A.height:s,t._totalWidth=g+a+A.width,t._selfTotalWidth=O+A.width,t._legendTestY=s>A.height?(s-A.height)/2:0,U=y(U,t._textHeight),ge=y(1,v(ge,t._textHeight)));if(L={style:{display:"grid",justifyItems:"center",alignItems:"start"}},T=[],pe&&T.push({style:{width:re,height:J,gridRowStart:1,gridRowEnd:2,gridColumnStart:1,gridColumnEnd:2}}),T.push({style:{display:"grid",justifyItems:"start",alignItems:"start",width:v(W,V,K*ce),paddingEnd:Z,paddingTop:Z,gridRowStart:T.length+1,gridRowEnd:T.length+2,gridColumnStart:1,gridColumnEnd:2}}),F=[],fe||1===he)for(w=0,b=1;w<G;w++)1===(t=(i=D[w]).config).enabled&&(0===me?(M=C(b/ce),R=b%ce==0?ce:b%ce):(M=b%he==0?he:b%he,R=C(b/he)),F.push({style:{width:1===he||R===ce?t._selfTotalWidth:K,height:t._selfTotalHeight,gridRowStart:M,gridRowEnd:M+1,gridColumnStart:R,gridColumnEnd:R+1}}),b+=1);else{for(he=0,ge=y(ge,s),w=0;w<G;w++)1===(t=(i=D[w]).config).enabled&&(he+=Math.ceil(t._selfTotalHeight/ge));0===he&&(he=Math.max(1,Math.ceil(Y/ce))),$=S(he).map((function(){return S(ce)}));var ke,Ce=0,we=0;for(w=0,b=1;w<G;w++)if(1===(t=(i=D[w]).config).enabled){for(;Ce<he;){for(;we<ce;){if(void 0===$[Ce][we]){R=we+1,M=Ce+1,ke=+(t._selfTotalHeight/ge).toFixed(0),$[Ce][we]=!0;for(var xe=Ce;xe<Ce+ke;xe++)$[xe][we]=!0}if(we++,$[Ce][we-1])break}if(we>=ce&&(we=0,Ce++),ke)break}F.push({style:{width:R===ce?t._selfTotalWidth:x,height:t._selfTotalHeight,gridRowStart:M,gridRowEnd:M+ke,gridColumnStart:R,gridColumnEnd:R+1}}),b+=1,ke=void 0}for(b=he=0;b<$.length;b++)for(w=0;w<ce;w++)if($[b][w]){he++;break}T[T.length-1].style.gridTemplateRows=(ge+" ").repeat(he).slice(0,-1)}for(T[T.length-1].children=F,E=(0,p.computeLayout)(function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach((function(t){(0,r.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},L,{children:T})),B.itemWidth=K,(h=C(K-O))<0&&(de=h=q=0),B.symbolPadding=de,B.textPadding=q,B.width=B.totalWidth=y(E.layout.width,E.children[E.children.length-1].layout.width),Q.setStyle((0,l.extend2)({},ee.text)),w=0,b=0;w<G;w++)t=(i=D[w]).config,1===he&&(h=t._selfTotalWidth)<0&&(de=h=q=0),1===t.enabled&&(0===h&&(t.name=l.BLANKSTRING,t._totalWidth=g+de),t._legendX=E.children[E.children.length-1].children[b].layout.x,t._legendY=E.children[E.children.length-1].children[b].layout.y,t._legendH=E.children[E.children.length-1].children[b].layout.height,b+=1);if(N=he,u.height+=N*s+J,B.height=B.totalHeight=E.layout.height+2*Z,B.rowHeight=s,B.legendNumColumns=ce,B.initialItemX=pe&&re>E.children[E.children.length-1].layout.width&&V>B.width?E.children[E.children.length-1].layout.x:0,B.initialItemY=E.children[E.children.length-1].layout.y,B.height-2*de>z?(B.height=z,(I=B.scroll||(B.scroll={})).enabled=!0,I.flatScrollBars=B.flatScrollBars,I.scrollBar3DLighting=B.scrollBar3DLighting,B.width=B.width+12>V?B.width:B.width+12):B.scroll.enabled=!1,B.width>V?(B.width=V,(P=B.horizontalScroll||(B.horizontalScroll={})).enabled=!0,P.flatScrollBars=B.flatScrollBars,P.scrollBar3DLighting=B.scrollBar3DLighting,B.height+12<=z?B.height=B.height+12:(B.height=z,B.totalHeight+=4,(I=B.scroll||(B.scroll={})).enabled=!0,I.flatScrollBars=B.flatScrollBars,I.scrollBar3DLighting=B.scrollBar3DLighting,B.scroll.enabled=!0)):B.horizontalScroll.enabled=!1,B.totalWidth>B.width&&B.totalWidth-B.width<=4){for(w=0,b=0;w<G;w++)1===(t=(i=D[w]).config).enabled&&(E.children[E.children.length-1].children[b].style.gridColumnStart%ce!=1&&(t._legendX+=4,1===E.children[E.children.length-1].children[b].style.gridRowStart&&(B.totalWidth+=4)),b+=1);B.totalHeight+=4}c+=B.height,B.isActive=!0,B.enabled=!0}else B.enabled=!1,B.width=0,c=0;return{width:B.width,height:c}},o._placeLegendBlockBottom=function(e,t){void 0===t&&(t=1);var o,n,r,i,a,s=this.getFromEnv("chart"),c=s.config,h=s.getFromEnv("chartWidth"),d=s.getFromEnv("chartHeight"),g=c.canvasLeft,u=c.width-(c.canvasRight||0),p=s.getFromEnv("smartLabel"),f=this.config,m=f.chartMarginLeft,b=f.chartMarginRight,v=f.chartMarginTop,y=f.alignLegendWithCanvas,k=this.getSortedLegendItems().length,C=f.legendPadding,w=c.canvasMarginRight,x=c.canvasMarginLeft,S=s.getChildren("yAxis"),L=S&&S[0].config.isVertical?S:s.getChildren("xAxis"),T=L&&L[0],F=L&&L[1],E=T&&T.config||{},N=F&&F.config||{},_=E.nameMaxW,A=N.nameMaxW,I=E.name&&E.name.style||{},P=N.name&&N.name.style||{},O=E.axisName||l.BLANKSTRING,M=N.axisName||l.BLANKSTRING,R=c.canvasWidth-c.canvasMarginLeft-c.canvasMarginRight,B=c.width,D=c.height,G=f.legendPos?f.legendPos.split("-"):[];return f.paddingBottom=c.height-c.canvasBottom,p.useEllipsesOnOverflow(c.useEllipsesWhenOverflow),p.setStyle(I),i=p.getOriSize(O),p.setStyle(P),a=p.getOriSize(M),R<C&&(f.padding=C=R=0),(i||a)&&(n=(0,l.pluckNumber)(i.height,0)>(0,l.pluckNumber)(a.height,0)?(r=_)&&i.width:(r=A)&&a.width),R=y?R:h-(n+v>d-e?2*r+b+m+w+x:b+m+x+w),G[0]===l.POSITION_ABSOLUTE&&(R=B,f.legendMaxWidth<B?R=f.legendMaxWidth:R*=t),f.showLegend&&0!==k?(f.x=(g-m-u+b)/2,o=this.setDimension({width:R,height:G[0]===l.POSITION_ABSOLUTE?f.legendMaxHeight<D?f.legendMaxHeight:D:e}).height):(o=0,f.height=0,f.width=0),{bottom:o,right:0}},o._placeLegendBlockRight=function(e){var t,o=e,n=this.config,r=this.getFromEnv("chart"),i=r.config,a=r.getFromEnv("smartLabel"),s=n.legendPadding,c=this.getStateCosmetics("default"),h=i.canvasHeight,d={},g=this.getSortedLegendItems().length;return o<s&&(n.padding=s=o=0),a.useEllipsesOnOverflow(i.useEllipsesWhenOverflow),a.setStyle((0,l.extend2)({},c.text)),n.numColumns||n.numRows||(n.numColumns=1),n.showLegend&&0!==g?(t=this.setDimension({width:o-s,height:h}).width,d.right=t+s,d.right+10<=o&&(d.right+=10)):(d.right=0,n.height=0,n.width=0),d},o.postSpaceManager=function(){var e=this.config,t=e.legendPos?e.legendPos.split("-"):[],o=this.getFromEnv("chart").config.canvasHeight;t[0]!==l.POSITION_RIGHT&&t[0]!==l.POSITION_LEFT||(e.totalHeight>o?(e.totalHeight<=e.height&&(e.scroll.enabled=!0,e.scroll.flatScrollBars=e.flatScrollBars,e.scroll.scrollBar3DLighting=e.scrollBar3DLighting,e.width+=(e.scroll.scrollBarWidth=10)+(e.scroll.scrollBarPadding=2)),e.height=o):e.scroll.enabled=!1)},o.configureAttributes=function(t){void 0===t&&(t={}),e.prototype.configureAttributes.call(this,t);var o,n,r,i,a,s=this.config,c=this.getFromEnv("chart"),h=c.config,d=this.getFromEnv("style"),g=c.getFromEnv("chart-attrib"),u=c.config.is3D,p=this.getFromEnv("color-manager"),f=u?l.chartPaletteStr.chart3D:l.chartPaletteStr.chart2D,b=s.interactiveLegend=!1!==c.hasInteractiveLegend&&Boolean((0,l.pluckNumber)(g.interactivelegend,1)),v=(0,l.pluckNumber)(g.useroundedges,0),k=d.outCancolor,C=t.style&&t.style.text,w=(0,l.pluck)(g.legenditemfont,C&&C["font-family"],d.outCanfontFamily),S=(0,l.pluckNumber)(g.legendiconscale,1),L=(0,l.pluckFontSize)(g.legenditemfontsize,C&&C["font-size"],d.fontSize)+"px",T=(0,l.pluck)(g.legenditemfontcolor,C&&C.color,k).replace(/^#?([a-f0-9]+)/gi,"#$1"),F=(0,l.getFirstColor)((0,l.pluck)(g.legenditemhoverfontcolor,T));s.isActive=!1,s.chartMarginTop=h.origMarginTop,s.chartMarginRight=h.origMarginRight,s.chartMarginBottom=h.origMarginBottom,s.chartMarginLeft=h.origMarginLeft,s.reverselegend=(0,l.pluckNumber)(g.reverselegend,0),s.showLegend=(0,l.pluckNumber)(g.showlegend,!c.dontShowLegendByDefault,1),o=(0,l.setLineHeight)({fontSize:L}),s.legendPos=(0,l.pluck)(g.legendposition,c.legendposition,t.legendPosition,l.POSITION_BOTTOM).toLowerCase(),s.numColumns=(0,l.pluckNumber)(Math.floor(g.legendnumcolumns)),s.numRows=(0,l.pluckNumber)(Math.floor(g.legendnumrows)),s.numColumns<0&&(s.numColumns=void 0),s.numRows<0&&(s.numRows=void 0),s.legendXPosition=y((0,l.pluckNumber)(g.legendxposition,c.legendxposition,t.legendXPosition,0),0),s.legendYPosition=y((0,l.pluckNumber)(g.legendyposition,c.legendyposition,t.legendYPosition,0),0),s.legendMaxWidth=(0,l.pluckNumber)(g.legendmaxwidth,c.legendmaxwidth,t.legendMaxWidth),s.legendMaxHeight=(0,l.pluckNumber)(g.legendmaxheight,c.legendmaxheight,t.legendMaxHeight),s.legendMaxWidth<0&&(s.legendMaxWidth=void 0),s.legendMaxHeight<0&&(s.legendMaxHeight=void 0),s.xL=s.yL=0,(S<=0||S>5)&&(S=1),s.drawCustomLegendIcon=(0,l.pluckNumber)(g.drawcustomlegendicon,t.drawcustomlegendicon,0),s.legendScale=S,s.legendPadding=(0,l.pluckNumber)(g.legendpadding,7),s.alignLegendWithCanvas=(0,l.pluckNumber)(t.alignlegendwithcanvas,h.alignLegendWithCanvas),s.title.style={fontFamily:(0,l.pluck)(g.legendcaptionfont,w),fontSize:(0,l.pluckFontSize)(g.legendcaptionfontsize,d.fontSize)+"px",color:(0,l.pluck)(g.legendcaptionfontcolor,k).replace(/^#?([a-f0-9]+)/gi,"#$1"),fontWeight:x.fontWeight[(0,l.pluckNumber)(g.legendcaptionfontbold,1)]||l.BLANKSTRING},a=g.legendcaptionalignment?g.legendcaptionalignment.toLowerCase():m.center,s.title.align=m[a]||m.center,s.title.style["text-anchor"]=s.title.align,s.padding=4,n=(0,l.pluck)(g.legendbordercolor,p.getColor(f.legendBorderColor)),r=s.borderAlpha=(0,l.pluckNumber)(g.legendborderalpha,100),s.borderColor=(0,l.convertColor)(n,r),s.borderWidth=(0,l.pluckNumber)(g.legendborderthickness,t.legendborderthickness,!v||g.legendbordercolor?1:0),s.borderRadius=(0,l.pluckNumber)(v,0),s.backgroundAlpha=i=(0,l.pluckNumber)(g.legendbgalpha,t.legendbgalpha,100),s.backgroundColor=(0,l.convertColor)((0,l.pluck)(g.legendbgcolor,p.getColor(f.legendBgColor)),i),s.symbol3DLighting=Boolean((0,l.pluckNumber)(g.use3dlighting,g.useplotgradientcolor,1)),s.shadow=Boolean((0,l.pluckNumber)(g.legendshadow,1)),s.shadow&&(s.shadow={enabled:s.shadow,opacity:y(r,i)/100}),s.prevReversed=Boolean((0,l.pluckNumber)(s.reversed,0)),s.reversed=Boolean((0,l.pluckNumber)(g.reverselegend,0)),s.lineWidth=(0,l.pluckNumber)(g.linethickness,2),s.borderRadius=(0,l.pluckNumber)(g.legendborderradius,v?3:0),s.legendAllowDrag=Boolean((0,l.pluckNumber)(g.legendallowdrag,0)),s.title.oriText=(0,l.parseUnsafeString)((0,l.getFirstValue)(g.legendcaption,l.BLANKSTRING)),s.legendScrollBgColor=(0,l.getFirstColor)((0,l.pluck)(g.legendscrollbgcolor,g.scrollcolor,p.getColor("altHGridColor"))),s.legendScrollBarColor=(0,l.pluck)(g.legendscrollbarcolor,n),s.legendScrollBtnColor=(0,l.pluck)(g.legendscrollbtncolor,n),s.minimiseWrappingInLegend=(0,l.pluckNumber)(g.minimisewrappinginlegend,0),s.flatScrollBars=(0,l.pluckNumber)(g.flatscrollbars,0),s.scrollBar3DLighting=(0,l.pluckNumber)(g.scrollbar3dlighting,1),s.orderReversed=!1,this.setStateCosmetics("hidden",{symbol:{fill:(0,l.convertColor)((0,l.pluck)(g.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/gi,"#$1")),stroke:(0,l.convertColor)((0,l.pluck)(g.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/gi,"#$1"))},text:{fill:(0,l.convertColor)((0,l.pluck)(g.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/gi,"#$1"))}}),this.setStateCosmetics("default",{text:{fill:(0,l.convertColor)(T),"font-family":w,cursor:b?l.preDefStr.POINTER:"default","font-size":L,"line-height":o,"vertical-align":l.POSITION_TOP,"text-anchor":l.POSITION_START,direction:"rtl"===h.textDirection?"rtl":"initial","font-weight":x.fontWeight[(0,l.pluckNumber)(g.legenditemfontbold,0)]||l.BLANKSTRING},symbol:{bgColor:(0,l.pluck)(g.legendiconbgcolor),cursor:b?l.preDefStr.POINTER:"default",borderColor:(0,l.pluck)(g.legendiconbordercolor),bgAlpha:(0,l.pluck)(g.legendiconbgalpha,g.legendiconalpha,100),borderAlpha:(0,l.pluck)(g.legendiconborderalpha,g.legendiconalpha,100),borderThickness:(0,l.pluckNumber)(g.legendiconborderthickness),startAngle:(0,l.pluckNumber)(g.legendiconstartangle,45),sides:(0,l.pluckNumber)(g.legendiconsides,t.legendiconsides,4)}}),this.setStateCosmetics("hover",(function(e,t){return t.hasState("hidden")||(e.text||(e.text={}),e.text.fill=(0,l.convertColor)(F.replace(/^#?([a-f0-9]+)/gi,"#$1")),e.text.cursor="inherit"),e})),s.legendAllowDrag&&!s._dragEvtListenerBinded?(this.addEventListener("fc-dragstart",s.handlers.dragstart),this.addEventListener("fc-dragmove",s.handlers.dragmove),s._dragEvtListenerBinded=!0):!s.legendAllowDrag&&s._dragEvtListenerBinded&&(this.removeEventListener("fc-dragstart",s.handlers.dragstart),this.removeEventListener("fc-dragmove",s.handlers.dragmove),s._dragEvtListenerBinded=!1)},o.getLegendState=function(){return this._legendState},o.hasState=function(e){var t,o,n=this.getLegendState();for(t=0,o=n.length;t<o;t++)if(n[t]===e)return!0;return!1},o.setLegendState=function(e,t){this.hasState(e)||(t?this._legendState.push(e):this._legendState.unshift(e)),this.asyncDraw()},o.removeLegendState=function(e){var t,o,n=1;if(e)for(t=0,o=this._legendState.length;t<o&&n;t++)e===this._legendState[t]&&(this._legendState.splice(t,1),n=0);else this._legendState.length=0;this.asyncDraw()},o.setStateCosmetics=function(e,t){this._stateCosmetics[e]=t},o.removeStateCosmetics=function(e){delete this._stateCosmetics[e]},o.getStateCosmetics=function(e){return this._stateCosmetics[e]},o.hide=function(){var e=this.getFromEnv("chart").getChildContainer("legendGroup");e&&e.hide()},t}(s.ComponentInterface);t.default=L},246:function(e,t,o){"use strict";t.__esModule=!0,t.pluckNumber=t.getDisplayProperty=t.attachLayoutInformation=t.cloneObject=void 0;var n=o(243);t.pluckNumber=function(){var e,t,o;for(t=0,o=arguments.length;t<o;t+=1)if(((e=arguments[t])||!1===e||0===e)&&!isNaN(e=Number(e)))return e},t.attachLayoutInformation=function e(t,o){var n,r;for(void 0===t&&(t={}),void 0===o&&(o={}),t.layout=o.layout,n=0,r=(t.children||[]).length;n<r;n++)e(t.children[n],o.children[n])},t.cloneObject=function e(t){if(n.ATOMIC_DATA_TYPE.indexOf(typeof t)>-1||null===t)return t;if(Array.isArray(t)){var o,r,i=[];for(o=0,r=t.length;o<r;o++)i.push(e(t[o]));return i}if("object"==typeof t){var a,l={};for(a in t)l[a]=e(t[a]);return l}},t.getDisplayProperty=function(e){return e.style&&e.style.display}},247:function(e,t,o){"use strict";var n=o(11);t.__esModule=!0,t.default=void 0;var r,i=n(o(3)),a=o(4),l=n(o(94)),s=o(5),c=n(o(244)),h=o(2),d=o(8),g=n(o(261)),u=(0,s.getDep)("redraphael","plugin"),p=window.navigator.userAgent,f=/msie/i.test(p)&&!window.opera,m=window.Math,b=m.min,v=m.max,y=/stroke/gi,k=/AppleWebKit/.test(p),C=m.ceil,w=function(e,t){var o=t?(0,h.extend2)(e.FCcolor,t,!1,!0):{FCcolor:e};return o.toString=h.toRaphaelColor,o},x=function(e,t){var o,n,r={};if(n=t||1,!e||"object"!=typeof e)return r;for(o in e)y.test(o)||("stroke-width"===o?(r[o]=Number(e[o])/n,k&&(r[o]=r[o]&&C(r[o])||0)):r[o]=e[o]);return r},S={right:function(){return arguments[1]},left:function(e,t){return e-t},center:function(e,t){return 2*b(t,e-t)}},L={top:function(){return arguments[1]},middle:function(e,t){return 2*b(t,e-t)},bottom:function(e,t){return e-t}},T=function(e,t){e&&e.graphics.outlines.attr(t)};(0,s.addDep)({name:"mapsAnimation",type:"animationRule",extension:c.default}),(0,g.default)(u);var F=function(e){function t(){var t;return(t=e.call(this)||this).components={},t}(0,i.default)(t,e);var o=t.prototype;return o.getName=function(){return"entities"},o.getType=function(){return"dataset"},o.configureAttributes=function(e){if(e){this.JSONData={data:e};var o,n,i,a,l,s,c,d,g=this,u=g.getFromEnv("chart").jsonData,p=g.config,f=u.map||u.chart,m=[],b=g.getFromEnv("colorManager"),v=u.entitydef||[];for(l in!p.attachEvent&&b&&(g.addExtEventListener("legendUpdate",(function(){if("legend"===(d=arguments[1]).component)g.legendInteractivity(d.legendItem,d.colorObj);else for(m=d.maxMinArray,s=m.length,c=0;c<s;c++)g.updateEntityColors(m[c].min,m[c].max)}),b),p.attachEvent=!0),o=u.data&&u.data[0]&&u.data[0].data?g.JSONData=u.data[0].data||[]:g.JSONData=u.data||[],p.useSNameAsId=(0,h.pluckNumber)(f.usesnameasid,0),this._redefineEntities(v),n=g.components.data,p.showTooltip=(0,h.pluckNumber)(f.showtooltip,1),p.showHoverEffect=(0,h.pluckNumber)(f.showhovereffect,0),o=function(e){for(var t,o=e&&e.length||0,n={};o--;)(t=e[o]).id!==r&&(n[t.id.toLowerCase()]=t);return n}(o),g.calculateDataLimits(),!u.colorrange&&g._detachChild(g.getChildren("colorRange")&&g.getChildren("colorRange")[0]),n)i=o[l],a=n[l],i?this._configureEntity(l,a,(0,h.imprint)(t._sanitizeEntityOptions((0,h.extend2)({},i)),a.config)):this._configureEntity(l,a,a.config)}},o.updateEntityColors=function(e,t){var o,n,r,i,a,l=this.components.data,s=this.getFromEnv("chart").config.entityOpts,c=s.nullEntityAlpha,h=s.nullEntityColor,d=w({fill:h,alpha:c}),g={"fill-opacity":0};for(i in l)l.hasOwnProperty(i)&&(r=(n=(o=l[i]).config).cleanValue,a={"fill-opacity":(n.alphaArr||[])[0]/100||1},null==r?(T(o,d),o.hidden=!1):r<e||r>t?(T(o,g),o.hidden=!0):(T(o,a),o.hidden=!1))},o.legendInteractivity=function(e,t){var o,n,r,i,a,l,s=this.getFromEnv("chart"),c=this.components.data,h=e.config,d=e.hasState("hidden"),g=this.getFromEnv("colorManager"),u={},p={"fill-opacity":0};for(o in s.getFromEnv("animationManager").setAnimationState("legendInteraction"),c)c.hasOwnProperty(o)&&(r=(h=(n=c[o]).config).cleanValue,l=g.getColorObj(r),i=h.visibleEntityAttr,u["fill-opacity"]=i["fill-opacity"],a=d?u:p,t.code===(!l.outOfRange&&l.code)&&(n.hidden=!d,T(n,a),d?e&&e.removeLegendState("hidden"):e.setLegendState("hidden")))},o.calculateDataLimits=function(){var e,t,o,n,r=this.getFromEnv("chart"),i=this.config,a=r.jsonData.data||[],l=this.getFromEnv("number-formatter"),s=1/0,c=-1/0;for(n=0,o=a.length;n<o;n++)t=a[n].value,e=l.getCleanValue(t),s=b(s,e),c=v(c,e);i.max=c,i.min=s},o._configureEntity=function(e,t,o){var n,i,a,l,s,c,d,g,u,p,f,m,b,v,y,k,C,x,S,L,T,F,E=this.getFromEnv("chart"),N=this.config,_=this.getFromEnv("number-formatter"),A=E.config.entityOpts,I=t.config,P=t.labelConfig,O=o.value,M=I.cleanValue=_.getCleanValue(O),R=I.formattedValue=M!==r?_.dataLabels(M):r,B=(0,h.pluckNumber)(o.showtooltip,A.showTooltip),D=this._getDefaultTooltip(t,o,this),G={formattedValue:R,sName:o.shortLabel,lName:o.label},V=A.dataLabels.style,z=I.toolText=B?(0,h.parseUnsafeString)((0,h.pluck)((0,h.parseTooltext)((0,h.pluck)(o.tooltext,A.tooltext,D),[1,2,7,38,39],G,o)),!1):"",H=I.borderColor=(0,h.pluck)(o.bordercolor,A.borderColor),j=I.borderAlpha=(0,h.pluck)(o.borderalpha,A.borderAlpha),W=I.borderThickness=(0,h.pluckNumber)(o.borderthickness,A.borderThickness),Y=A.hoverOnNull,X=I.useHoverColor=(0,h.pluckNumber)(o.showhovereffect,o.usehovercolor,Y?A.showHoverEffect:isNaN(O)?0:A.showHoverEffect),K=I.labelAlignment,U=this.getFromEnv("colorManager");if(t.hidden=!1,I.showLabel=(0,h.pluckNumber)(o.showlabel,A.showLabels),I.labelPadding=(0,h.pluckNumber)(o.labelpadding,A.labelPadding),I.fontFamily=(0,h.pluck)(o.font,V.fontFamily),I.fontSize=(0,h.pluckNumber)(parseInt(o.fontsize,10),parseInt(V.fontSize,10)),I.fontBold=(0,h.pluckNumber)(o.fontbold,0),I.fontColor=(0,h.pluck)(o.labelcolor,o.fontcolor,V.color),I.labelBgColor=(0,h.pluck)(o.labelbgcolor,V.bgColor)||"",I.labelBorderColor=(0,h.pluck)(o.labelbordercolor,V.borderColor)||"",I.connectorColor=(0,h.pluck)(o.labelconnectorcolor,A.connectorColor),I.connectorAlpha=(0,h.pluck)(o.labelconnectoralpha,A.connectorAlpha),I.hoverBorderThickness=(0,h.pluckNumber)(o.borderhoverthickness,o.hoverborderthickness,A.hoverBorderThickness),I.hoverBorderColor=(0,h.pluck)(o.borderhovercolor,o.hoverbordercolor,A.hoverBorderColor,I.borderColor),I.hoverBorderAlpha=(0,h.pluck)(o.borderhoveralpha,o.hoverborderalpha,A.hoverBorderAlpha,I.borderAlpha),I.connectorThickness=(0,h.pluckNumber)(o.labelconnectorthickness,A.connectorThickness),I.origConnectorThickness=I.connectorThickness,I.borderThickness=W,I.link=o.link,I.isVisible=!0,I.id=e,I.originalId=o.origId,null!==M&&(n=U&&U.getColor(M))&&!n.outOfRange&&(k=n.code,n.oriAlpha!==r&&(C=n.oriAlpha+"")),(0,h.pluck)(o.color,o.alpha,o.angle,o.ratio)!==r?(s=(0,h.pluck)(o.color,k,A.fillColor),c=(0,h.pluck)(o.alpha,C,A.fillAlpha),d=(0,h.pluck)(o.angle,A.fillAngle),g=(0,h.pluck)(o.ratio,A.fillRatio),u=w({color:s,alpha:c,angle:d,ratio:g})):(v=w({color:(0,h.pluck)(k,A.fillColor),alpha:(0,h.pluck)(C,A.fillAlpha),angle:(0,h.pluck)(A.fillAngle),ratio:(0,h.pluck)(A.fillRatio)}),b=w({color:(0,h.pluck)(A.nullEntityColor),alpha:(0,h.pluck)(A.nullEntityAlpha),angle:(0,h.pluck)(A.nullEntityAngle),ratio:(0,h.pluck)(A.nullEntityRatio)}),s=(u=null===M?b:v).FCcolor.color,c=u.FCcolor.alpha,d=u.FCcolor.angle,g=u.FCcolor.ratio),""===z&&(N.showTooltip=0),I.visibleEntityAttr={stroke:(0,h.convertColor)(H,j),fill:(I.fillColor=u).toString(),"fill-opacity":c/100},F=c.split(","),I.alphaArr=F,X&&((0,h.pluck)(o.fillhovercolor,o.fillhoveralpha,o.fillhoverangle,o.fillhoverratio,o.hoverfillcolor,o.hoverfillalpha,o.hoverfillratio,o.hoverfillangle)!==r?(s=(0,h.pluck)(o.fillhovercolor,o.hoverfillcolor,A.hoverFillColor),c=(0,h.pluck)(o.fillhoveralpha,o.hoverfillalpha,A.hoverFillAlpha),d=(0,h.pluck)(o.fillhoverangle,o.hoverfillangle,A.hoverFillAngle),g=(0,h.pluck)(o.fillhoverratio,o.hoverfillratio,A.hoverFillRatio),y=w({color:s,alpha:c,angle:d,ratio:g})):(A.hoverColorObject||(A.hoverColorObject=w({color:A.hoverFillColor,alpha:A.hoverFillAlpha,angle:A.hoverFillAngle,ratio:A.hoverFillRatio})),y=A.hoverColorObject),I.hoverColor=y),!P&&(P=t.labelConfig={}),p=I.fontColor,f=I.fontFamily,m=I.fontBold,z=I.toolText,i=I.link,K?(a=K[0],l=K[1]):(a="center",l="middle"),P.align=a,P.vAlign=l,P.fontColor=p,P.bgColor=I.labelBgColor,P.borderColor=I.labelBorderColor,P.fontFamily=f,P.fontBold=m,P.toolText=z,P.link=i,"object"==typeof I.options)for(x=I.entityLabels=I.entityLabels||[],T=(L=I.labels||[]).length;T--;)x[T]||(x[T]={config:{}}),P=x[T].config,(K=L[T].labelAlignment)?(a=K[0],l=K[1]):(a="center",l="middle"),P.align=a,P.vAlign=l,P.displayValue=this.getDisplayValue(t,L[T],I.options.isDataEnabled,!T,o),P.toolText=z,P.align=a,P.vAlign=l,P.bgColor=I.labelBgColor,P.borderColor=I.labelBorderColor,P.fontColor=p,P.fontFamily=f,P.fontBold=m,P.toolText=z;else S={shortText:I.shortLabel,text:I.label},P.displayValue=this.getDisplayValue(t,S,!0,!0,o)},o.getDisplayValue=function(e,t,o,n,i){var a,l=this.getFromEnv("chart").config.entityOpts,s=e.config,c=s.cleanValue,d=s.formattedValue,g=l.labelSepChar;return o?n&&void 0!==i.displayvalue?a=i.displayvalue:(a=(0,h.pluck)(l.includeNameInLabels?l.useShortName?t.shortText:t.text:""),l.includeValueInLabels&&null!==c&&(a=a===r?d:a+g+d)):a=s.label,a},t._sanitizeEntityOptions=function(e){return delete e.outlines,delete e.label,delete e.shortlabel,delete e.labelposition,delete e.labelalignment,delete e.labelconnectors,e},o._redefineEntities=function(e){var t,o,n,r,i,a,l,s,c,d,g,u,p=this.config,f={},m={},b=this.getFromEnv("chart").config.entities,v=p.useSNameAsId,y=0;for(t=e.length;t--;)if(n=(o=e[t]).internalid,r=o.newid?o.newid:n,i=o.sname,a=o.lname,u=b[n],n=(0,h.trimString)(n),r=(r=(0,h.trimString)(r))&&r.toLowerCase(),u){for(g in f[r]=s={origId:n},m[n]=!0,u)s[g]=u[g];s.shortLabel=i||u.shortLabel,s.label=a||u.label,s.showhovereffect=o.showhovereffect,s.fillhovercolor=o.fillhovercolor,s.fillhoveralpha=o.fillhoveralpha,s.fillhoverangle=o.fillhoverangle,s.fillhoverratio=o.fillhoverratio,s.borderhoverthickness=o.borderhoverthickness}for(l in(d=this.components.data)||(d=this.components.data={}),f)d[l=l.toLowerCase()]||(d[l]={config:{}}),d[l].config=f[l],y+=1;for(l in c=d,b)if(s=b[l],!m[l=(0,h.trimString)(l)]){for(g in v?((u=c[s.shortLabel.toLowerCase()])||(u=c[s.shortLabel.toLowerCase()]={}),u.config={},u.origId=s.shortLabel):((u=c[l.toLowerCase()])||(u=c[l.toLowerCase()]={}),u.config={},u.config.origId=l),s)u.config[g]=s[g];y+=1}p.entityCount=y},o.draw=function(){var e=this.config,t=this.getFromEnv("chart"),o=h.hasSVG?200:10;this.createContainer(),this.config.ready=!1,e.BATCH_SIZE=o,e.labelBatchSize=h.hasSVG?200:20,this._batchRender()(0),t.config.entityFlag=!0,t.checkComplete()},o._batchRender=function(){var e,t,o,n,i,a=this,l=a.config,s=a.getFromEnv("chart").config.entities.firstEntity,c=a.components.data,h=l.BATCH_SIZE,g=l.entityKeys=s?a._getKeys(s,c):Object.keys(c),u=l.entityLength=g.length;return function l(s){for(e=s,o=0;g[e]!==r;)if(t=c[g[e]],i=a.drawEntity(t,h),o+=i,t.config.drawn&&((n=e===u-1?t:c[g[e-1]])&&(n.config.drawn=!1,n.config.outlineStartIndex=r),e++),o>=h){a.addJob("entityDraw",l.bind(a,e),d.priorityList.entitydraw);break}e===u&&(a._addEventListenersToEntities(0),a.initComplete())}},o._addEventListenersToEntities=function(e){var t,o,n,r=this.components.data,i=this.config,a=i.BATCH_SIZE,l=i.entityKeys,s=i.entityLength,c=0;for(t=e;t<s;t++)if((n=(o=r[l[t]]).config.options)&&!1===n.isDataEnabled||this.addMouseGestures(o),++c===a){this.addJob("_addEventListenersToEntities",this._addEventListenersToEntities.bind(this,t),d.priorityList.entitydraw);break}},t._getKeys=function(e,t){for(var o=[e],n=e;t[n];)n=t[n].nextId,o.push(n);return o},o._getDefaultTooltip=function(e,t){var o,n,i=e.config.cleanValue,a=e.config.formattedValue,l=this.getFromEnv("chart").config.entityOpts;if("object"==typeof e.config.options){if(!(n=t.labels&&t.labels[0]))return r;o=(l.useSNameInTooltip?n.shortText:n.text)+(null===i?"":l.tooltipSepChar+a)}else o=(l.useSNameInTooltip?t.shortLabel:t.label)+(null===i?"":l.tooltipSepChar+a);return o},o.drawEntity=function(e,t){var o,n,i,a,l,s,c,d,g=this.getFromEnv("chart"),u=g.getFromEnv("animationManager"),p=e.config,m=h.hasSVG||!f?"litepath":"path",b=g.config.entityOpts,v=p.outlines,y=this.getFromEnv("toolTipController"),k=this.getLinkedParent().getChildContainer("plot"),C=this.getLinkedParent().getChildContainer("plotShadow"),w=p.toolText,S=b.shadow,L=[],T={};if(this._configureEntityDrawingParams(e),n=(p=e.config).visibleEntityAttr,d=p.shadowOptions,o=p.outlineStartIndex===r?v.length:p.outlineStartIndex,e.graphics||(e.graphics={}),s=0,L=p.outlinePath||(p.outlinePath=[]),c=p.customStrokeWidthModifier,"object"==typeof p.options){for(;o--;)if(L=v[o].outline,i=!0===p.options.isDataEnabled?n:(0,h.extend2)((0,h.extend2)({},n),x(v[o].style,c)),(a=e.graphics.outlines)||(a=e.graphics.outlines=[]),!a[o]&&(a[o]={}),l=a[o].outline,i[m]=L,(l=a[o].outline=u.setAnimation({el:m,container:k,attr:i,component:this,label:"path"})).shadow(!!S&&d,C),y.enableToolTip(l,w),s++,p.outlineStartIndex=o,s===t)return s;return p.drawn=!0,s}for(;o--;)if(L=v[o].concat(L),s++,p.outlineStartIndex=o,s===t)return p.outlinePath=L,s;return!e.graphics.outlines&&(n[m]=L),Object.assign(T,n,e.hidden&&{"fill-opacity":0}||{}),e.graphics.outlines=u.setAnimation({el:e.graphics.outlines||m,container:k,attr:T,component:this,label:"path"}),p.drawn=!0,p.outlineStartIndex=0,p.outlinePath=[],e.graphics.outlines.shadow(!!S&&d,C),y.enableToolTip(e.graphics.outlines,w),s},o._configureEntityDrawingParams=function(e){var t,o=this.getFromEnv("chart"),n=e.config,r=o.config.entityOpts,i=o.config.scalingParams,a=!f||h.hasSVG,l=i.scaleFactor,s=i.strokeWidth,c=(a?o.baseScaleFactor:1)*s,d=1===r.scaleBorder,g=n.borderThickness,u=n.alphaArr,p=n.origConnectorThickness,b=n.hoverBorderThickness,y=n.visibleEntityAttr,k=y["fill-opacity"];n.shadowOptions={scalefactor:[l,l*o.config.baseScaleFactor],opacity:v.apply(m,u)/100,useFilter:0},n.fillOpacity=e.hidden?0:k,a?(g=n.entityBorderThickness=d?g*c:g/l,p/=l,t=d?l:i.sFactor,b&&(b=n.hoverBorderThickness=d?b*c:b/l)):(g=d?g*s:g,t=d?i.scaleFactor:o.baseScaleFactor),n.entityBorderThickness=g,n.connectorThickness=p,n.customStrokeWidthModifier=t,y["stroke-width"]=g,y.transform=h.hasSVG||!f?"":i.transformStr},o.drawLabels=function(e){var t,o,n,r,i=e,a=this.getFromEnv("chart"),s=this.config,c=s.labelBatchSize,h=s.entityLength,d=[],g=a.getChildContainer("upperAnnotationGroup"),u=0,p=this.getChildren("mapLabelAnnotations")&&this.getChildren("mapLabelAnnotations")[u],f=0,m=0,b=a.config.annotationConfig;for(t in p||(r=new l.default,this.attachChild(r,"mapLabelAnnotations"),(p=this.getChildren("mapLabelAnnotations")[u]).addCustomGroup(g)),p.destroy(),p._renderer&&(p._renderer=null),b.showbelow=0,i){if(this.drawLabel(i[t],d),++f===c){for(o=0;o<d.length;o++)d[o].animationLabel="entityLabel";for(n=p.addGroup(Object.assign(b,{id:"entityLabels"+u,items:d,animationLabel:"entityLabelGroup"}),this),o=0;o<n.items.length;o++)n.items[o].addEventListener("fc-mouseover",d[o].onmouseover),n.items[o].addEventListener("fc-mouseout",d[o].onmouseout),n.items[o].addEventListener("fc-click",d[o].onclick);u++,(p=this.getChildren("mapLabelAnnotations")&&this.getChildren("mapLabelAnnotations")[u])||(r=new l.default,this.attachChild(r,"mapLabelAnnotations"),(p=this.getChildren("mapLabelAnnotations")[u]).addCustomGroup(g)),p.destroy(),p._renderer&&(p._renderer=null),f=0,d=[]}else if(m===h-1){for(o=0;o<d.length;o++)d[o].animationLabel="entityLabel";for(n=p.addGroup(Object.assign(b,{id:"entityLabels"+u,items:d,animationLabel:"entityLabelGroup"}),this),o=0;o<n.items.length;o++)n.items[o].addEventListener("fc-mouseover",d[o].onmouseover),n.items[o].addEventListener("fc-mouseout",d[o].onmouseout),n.items[o].addEventListener("fc-click",d[o].onclick)}m++}this.drawLabelConnFn(0)},o.drawLabelConnFn=function(e){var t,o,n,r,i,a=this.config,l=this.components.data,s=a.BATCH_SIZE,c=a.entityKeys,h=c.length,g=0;for(o=e;o<h;o++){if("object"==typeof(r=(i=l[c[o]]).config).options)for(t=(n=r.labels)&&n.length||0;t--;)n[t].labelConnectors&&(this.drawLabelConnectors(i,n[t].labelConnectors,this),g++);else r.labelConnectors&&(this.drawLabelConnectors(i,r.labelConnectors,this),g++);if(g===s){this.addJob("drawLabelConnectors",this.drawLabelConnFn.bind(this,o),d.priorityList.entitydraw);break}}},o._getLabelObject=function(e,t,o){var n,i,a,l,s,c,d,g,u,p,f,m=this,b=m.getFromEnv("chart"),v=m.getFromEnv("chart-attrib"),y=e.config,k=b.config.scalingParams,C=e.graphics&&e.graphics.outlines,w=y.fontSize,x=y.labelPadding,T=y.labels||[],F=y.entityLabels||[];return t!==r?(f=T[t],l=(n=F[t].config).style=f.style,i=f.labelPosition,a=f.labelAlignment):(n=e.labelConfig,i=y.labelPosition,a=y.labelAlignment),i?(s=i[0],c=i[1]):(s=(d=C.getBBox()).x+d.width/2,c=d.y+d.height/2),a?("right"===(g=a[0])?s-=x:"left"===g&&(s+=x),"top"===(u=a[1])?c-=x:"bottom"===u&&(c+=x)):(g="center",u="middle"),p=parseFloat(w)/k.sFactor,!o&&l&&(l.color&&(n.fontColor=l.color),l["font-size"]&&(p=parseFloat(l["font-size"])/k.sFactor),l["font-family"]&&(n.fontFamily=l["font-family"]),l["font-weight"]!==r&&(n.fontBold="bold"===l["font-weight"])),n.x=s.toString(),n.y=c.toString(),n.wrap=1,n.type="text",n.fontSize=p,{x:s.toString(),y:c.toString(),wrapwidth:S[g](void 0,s+void 0)-x,wrapheight:L[u](void 0,c+void 0)-x,wrap:1,type:"text",align:n.align,valign:n.vAlign,text:n.displayValue,tooltext:n.toolText,outlineText:(0,h.pluckNumber)(v.textoutline,0),css:n.link!==r&&{cursor:"pointer",_cursor:"hand"},bgcolor:n.bgColor,bordercolor:n.borderColor,fillcolor:n.fontColor,fontsize:n.fontSize,font:n.fontFamily,bold:n.fontBold,onclick:function(t){var o,n,r=e.graphics.outlines;if(r instanceof Array)for(o=0,n=r.length;o<n;o++)m.entityClick(r[o].outline,t);else m.entityClick(r,t)},onmouseover:function(t){var o,n,r=e.graphics.outlines;if(r instanceof Array)for(o=0,n=r.length;o<n;o++)m.entityRollOver(r[o].outline,t);else m.entityRollOver(r,t)},onmouseout:function(t){var o,n,r=e.graphics.outlines;if(r instanceof Array)for(o=0,n=r.length;o<n;o++)m.entityRollOut(r[o].outline,t);else m.entityRollOut(r,t)},ontouchstart:function(t){var o,n,r=e.graphics.outlines;if(r instanceof Array)for(o=0,n=r.length;o<n;o++)m.entityRollOver(r[o].outline,t);else m.entityRollOver(r,t);m.entityRollOver(r,t)}}},o.drawLabel=function(e,t){var o,n,i,a=e.config;if(a.showLabel)if("object"==typeof a.options)for(n=(i=a.labels)&&i.length||0,o=a.options.isDataEnabled;n--;)t.push(this._getLabelObject(e,n,o,!n));else t.push(this._getLabelObject(e,r,!0,!0))},o.drawLabelConnectors=function(e,t,o){for(var n,r,i=e.config,a=this.getFromEnv("chart"),l=a.getFromEnv("animationManager"),s=a.config.scalingParams,c=o.getLinkedParent().getChildContainer("plot"),d=t&&t.length||0,g=i.showLabel;d--;)r=t[d],n=e.graphics.connectorElem,g?e.graphics.connectorElem=n=l.setAnimation({el:e.graphics.connectorElem||"path",attr:{path:r,opacity:1,transform:h.hasSVG||!f?"":s.transformStr,stroke:(0,h.convertColor)(i.connectorColor,i.connectorAlpha),"shape-rendering":"crisp","stroke-width":i.connectorThickness},container:c,component:this,label:"labelConnectors"}):n&&n.hide()},o.entityClick=function(e,t){var o=e.node.__entity,n=this.getFromEnv("chart"),i=n.config.scalingParams,a=e.getBBox(),l=n.getFromEnv("linkClickFN"),s=o.config,c=s.link;a.width=a.width*i.scaleFactor,a.height=a.height*i.scaleFactor,a.x=a.x*i.scaleFactor+i.translateX,a.y=a.y*i.scaleFactor+i.translateY,a.x2=a.x+a.width,a.y2=a.y+a.height,n.fireChartInstanceEvent("entityclick",s.eventArgs,t),c!==r&&l.call({link:c,entity:o,entityBox:a},!0)},o.entityRollOver=function(e,t){var o=e.node.__entity,n=o.config,r=this.getFromEnv("chart"),i=r.getFromEnv("animationManager"),a=n.hoverAttr;r.plotEventHandler(e,t,"entityRollOver"),e.data("hovered")?clearTimeout(o.config.timer):n.useHoverColor&&n.isVisible&&!o.hidden&&a&&(r.config.hoverEntity=e,i.setAnimation({el:e,attr:a,component:this,state:"updating",label:"path"}),e.data("hovered",!0))},o.entityRollOut=function(e,t){var o=e.node.__entity,n=this,r=n.getFromEnv("chart"),i=r.getFromEnv("animationManager"),a=o.config.revertAttr;r.plotEventHandler(e,t,"entityRollOut"),o.config.timer=setTimeout((function(){!0!==o.hidden&&a&&(i.setAnimation({el:e,attr:a,component:n,state:"updating",label:"path"}),e.data("hovered",!1))}),100)},o.addMouseGestures=function(e){var t,o,n,i,a=e.config,l=a.originalId,s=this,c=e.graphics,d=a.useHoverColor,g=a.hoverBorderThickness,u=a.hoverBorderColor,p=a.hoverBorderAlpha,f=a.entityBorderThickness,m=a.borderColor,b=a.borderAlpha,v=a.link,y=a.visibleEntityAttr,k="groupId"+l,C=function(t){v!==r&&t.css({cursor:"pointer",_cursor:"hand"}),t.data("eventArgs",a.eventArgs),t.data("groupId",k),t.node.__entity=e,e._listenersBinded||t.on("fc-click",s.entityClick.bind(s,t)).hover(s.entityRollOver.bind(s,t),s.entityRollOut.bind(s,t))};for(t in a.eventArgs={value:a.cleanValue,label:a.label,shortLabel:a.shortLabel,originalId:a.origId,id:a.id||a.origId},a.legacyEventArgs={value:a.value,lName:a.label,sName:a.shortLabel,id:a.originalId||a.id},d&&(a.hoverAttr={fill:(0,h.toRaphaelColor)(a.hoverColor)},a.revertAttr={fill:(0,h.toRaphaelColor)(a.fillColor),stroke:(0,h.toRaphaelColor)(a.borderColor,a.borderAlpha)},a.revertAttr["fill-opacity"]=y["fill-opacity"],g!==f&&(a.hoverAttr["stroke-width"]=(0,h.pluckNumber)(g,f),a.revertAttr["stroke-width"]=f),u===m&&p===b||(a.hoverAttr.stroke=(0,h.convertColor)(u,p),a.revertAttr.stroke=(0,h.convertColor)(m,b))),c)if(c.hasOwnProperty(t))if(c[t]instanceof Array){for(o=0,n=(i=c[t]).length;o<n;o++)C(i[o].outline);e._listenersBinded=!0}else C(c[t]),e._listenersBinded=!0},o.getDataLimits=function(){var e=this.config;return{max:e.max,min:e.min}},o.createContainer=function(){var e=this.getLinkedParent(),t=this.getFromEnv("animationManager"),o=e.getChildContainer("layer0");!this.getChildContainer("abovePlotGroup")&&this.addChildContainer("abovePlotGroup",t.setAnimation({el:"group",attr:{name:"abovePlotGroup",opacity:1},container:o,component:this,label:"group"})),!this.getChildContainer("belowPlotGroup")&&this.addChildContainer("belowPlotGroup",t.setAnimation({el:"group",attr:{name:"belowPlotGroup",opacity:1},container:o,component:this,label:"group"}))},o.initComplete=function(){var e=this.getFromEnv("chart"),t=this.components.data;this.drawLabels(t),e.config.entitiesReady=!0,e.checkComplete()},t}(a.ComponentInterface);t.default=F},248:function(e,t,o){"use strict";var n=o(9),r=o(11);t.__esModule=!0,t.default=void 0;var i=r(o(3)),a=r(o(249)),l=o(4),s=n(o(97)),c=r(o(17)),h=o(7),d=o(2),g=r(o(260)),u=r(o(96)),p=r(o(265)),f=r(o(269)),m=(0,d.extend2)({foregroundcolor:"333333",foregroundalpha:"100",foregrounddarkcolor:"111111",foregrounddarkalpha:"100",foregroundlightcolor:"666666",foregroundlightalpha:"100",backgroundlightcolor:"FFFFFF",backgroundlightalpha:"100",backgroundlightangle:90,backgroundlightratio:"",backgroundcolor:"FFFFCC",backgroundalpha:"100",backgrounddarkcolor:"ffcc66",backgrounddarkalpha:"100",backgrounddarkangle:270,backgrounddarkratio:"",shadow:1},s),b={basefontcolor:"foregroundcolor",bordercolor:"foregrounddarkcolor",borderalpha:"foregrounddarkalpha",bgcolor:"backgroundlightcolor",bgalpha:"backgroundlightalpha",bgangle:"backgroundlightangle",bgratio:"backgroundlightratio",canvasbordercolor:"foregrounddarkcolor",canvasborderalpha:"foregrounddarkalpha",canvasbgcolor:"backgroundlightcolor",canvasbgalpha:"backgroundlightalpha",canvasbgangle:"backgroundlightangle",canvasbgratio:"backgroundlightratio",tooltipbordercolor:"foregrounddarkcolor",tooltipborderalpha:"foregrounddarkalpha",tooltipbgcolor:"backgroundlightcolor",tooltipbgalpha:"backgroundlightalpha",tooltipfontcolor:"foregroundcolor",legendbordercolor:"foregrounddarkcolor",legendborderalpha:"foregrounddarkalpha",markerbordercolor:"foregroundlightcolor",markerborderalpha:"foregroundlightalpha",markerfillcolor:"backgrounddarkcolor",markerfillalpha:"backgrounddarkalpha",markerfillangle:"backgrounddarkangle",markerfillratio:"backgrounddarkratio",plotfillcolor:"backgroundcolor",plotfillalpha:"backgroundalpha",plotfillangle:"backgroundangle",plotfillratio:"backgroundratio",plothoverfillcolor:"backgrounddarkcolor",plothoverfillalpha:"backgrounddarkalpha",plothoverfillangle:"backgrounddarkangle",plothoverfillratio:"backgrounddarkratio",plotbordercolor:"foregroundcolor",plotborderalpha:"foregroundalpha",shadow:"shadow"},v={getMapName:function(){return this.jsVars.instanceAPI.getName().toLowerCase()},getEntityList:function(){var e,t,o,n,r,i=this.jsVars.instanceAPI.getDatasets()||[],a=i.length,l=[];for(e=0;e<a;e++)if("entities"===(o=i[e]||[]).getName()){t=o;break}for(e in a=(n=t.components.data).length,n)n.hasOwnProperty(e)&&(r=(n[e]||{}).config||{},l.push({id:r.id,originalId:r.originalId||r.id,label:r.label,shortlabel:r.shortLabel,value:r.value,formattedValue:r.formattedValue,toolText:r.toolText}));return l},getMapAttribute:function(){var e=this;return(0,h.raiseWarning)(this,"12061210581","run","JavaScriptRenderer~getMapAttribute()",'Use of deprecated "getMapAttribute()". Replace with "getChartAttribute()".'),e.getChartAttribute.apply(e,arguments)},exportMap:function(){var e=this;return(0,h.raiseWarning)(this,"12061210581","run","JavaScriptRenderer~exportMap()",'Use of deprecated "exportMap()". Replace with "exportChart()".'),e.exportChart&&e.exportChart.apply(e,arguments)},addMarker:function(e){var t,o,n,r=this.jsVars.instanceAPI.getDatasets()||[],i=r.length;for(t=0;t<i;t++)if("markers"===(o=r[t]||[]).getName()){n=o;break}n&&!n.addMarkerItem(e)&&(0,h.raiseWarning)(this,"1309264086","run","MapsRenderer~addMarker()","Failed to add marker. Check the options and try again.")},updateMarker:function(e,t){var o,n,r,i,a=this.jsVars.instanceAPI.getDatasets()||[],l=a.length;for(n=0;n<l;n++)if("markers"===(r=a[n]||[]).getName()){i=r;break}i&&e&&(o=(e+y).toLowerCase(),i.updateMarkerItem(o,t))},removeMarker:function(e){var t,o,n,r,i=this.jsVars.instanceAPI.getDatasets()||[],a=i.length;for(o=0;o<a;o++)if("markers"===(n=i[o]||[]).getName()){r=n;break}e&&(t=(e+y).toLowerCase(),r._removeMarkerItem(t))}},y="",k=window.Math,C=k.min,w=k.max,x=function(e){function t(t,o){var n,r;for(r in(n=e.call(this)||this).subpalette=d.BLANKSTRING,n.key=d.BLANKSTRING,n.index=o,t)n.subpalette=m[t[r]],n[r]=n.subpalette instanceof Array?n.subpalette[o]:n.subpalette,n.key=r;return n}return(0,i.default)(t,e),t}(l.ComponentInterface),S=function(e){function t(){var t;return(t=e.call(this)||this).friendlyName="Map",t.revision=1,t.hasCanvas=!0,t.standaloneInit=!1,t.defaultDatasetType="maps",t.defaultSeriesType="geo",t.fireGroupEvent=!0,t.legendposition="right",t.hasGradientLegend=!0,t.isMap=!0,t.defaultPaletteOptions={paletteColors:[["A6A6A6","CCCCCC","E1E1E1","F0F0F0"],["A7AA95","C4C6B7","DEDFD7","F2F2EE"],["04C2E3","66E7FD","9CEFFE","CEF8FF"],["FA9101","FEB654","FED7A0","FFEDD5"],["FF2B60","FF6C92","FFB9CB","FFE8EE"]],bgColor:["FFFFFF","CFD4BE,F3F5DD","C5DADD,EDFBFE","A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:["0,100","0,100","0,100","0,100","0,100"],bgAlpha:["100","60,50","40,20","20,10","30,30"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F","845001","68001B"],baseFontColor:["555555","60634E","025B6A","A15E01","68001B"],tickColor:["333333","60634E","025B6A","A15E01","68001B"],trendColor:["545454","60634E","415D6F","845001","68001B"],plotFillColor:["545454","60634E","415D6F","845001","68001B"],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50]},t.colorPaletteMap=b,t.eiMethods=v,t.registerFactory("legend",f.default,["canvas"]),t.registerFactory("axis",d.stubFN,["canvas"]),t.registerFactory("colormanager-decider",p.default,["legend"]),t.registerFactory("dataset",g.default,["colormanager-decider"]),t.registerFactory("canvas",u.default),t}(0,i.default)(t,e);var o=t.prototype;return o._checkInvalidSpecificData=function(){return this.config.invalid=!1,!1},o.__setDefaultConfig=function(){e.prototype.__setDefaultConfig.call(this);var t=this.config;!t.baseWidth&&(t.baseWidth=400),!t.baseHeight&&(t.baseHeight=300),!t.baseScaleFactor&&(t.baseScaleFactor=1)},t.getName=function(){return"maps"},t.getType=function(){return"chartAPI"},o.getName=function(){return this.config.name||"GEO"},o.getType=function(){return"chartAPI"},o.configureAttributes=function(t){var o,n=this.getChildren("colorPalette")&&this.getChildren("colorPalette")[0];o=t.chart=t.chart||t.graph||t.map||{},this.jsonData=t,n||(n=new x(this.colorPaletteMap,(o.palette>0&&o.palette<6?o.palette:(0,d.pluckNumber)(this.paletteIndex,1))-1),this.attachChild(n,"colorPalette")),this.config.skipCanvasDrawing=!0,e.prototype.configureAttributes.call(this,t),this._parseBackgroundCosmetics()},o.parseChartAttr=function(t){var o,n,r,i,a,l=this.jsonData,s=l.chart||l.map,c=l.markers,h=new x(this.colorPaletteMap,(s.palette>0&&s.palette<6?s.palette:(0,d.pluckNumber)(this.paletteIndex,1))-1),g=(0,d.pluck)(s.entitybordercolor,s.bordercolor,h.plotbordercolor),u=(0,d.pluck)(s.entityfillcolor,s.fillcolor,h.plotfillcolor),p=(0,d.pluck)(s.entityfillalpha,s.fillalpha,h.plotfillalpha),f=(0,d.pluck)(s.entityfillratio,s.fillratio,h.plotfillratio),m=(0,d.pluck)(s.entityfillangle,s.fillangle,h.plotfillangle),b=(0,d.pluck)(s.nullentityfillcolor,s.nullentitycolor,u),v=(0,d.pluckNumber)(s.usevaluesformarkers,l.markers&&l.markers.items&&l.markers.items.length,!(l.markers&&l.markers.application&&l.markers.application.length&&l.markers.definition&&l.markers.definition.length));e.prototype.parseChartAttr.call(this,t),(o=this.config).origMarginTop=(0,d.pluckNumber)(s.charttopmargin,s.maptopmargin,11),o.origMarginLeft=(0,d.pluckNumber)(s.chartleftmargin,s.mapleftmargin,11),o.origMarginBottom=(0,d.pluckNumber)(s.chartbottommargin,s.mapbottommargin,11),o.origMarginRight=(0,d.pluckNumber)(s.chartrightmargin,s.maprightmargin,11),o.labelsOnTop=(0,d.pluckNumber)(s.entitylabelsontop,1),n=(a=o.style).inCancolor,r=a.inCanfontFamily,i=a.inCanfontSize,o.entityOpts={baseScaleFactor:o.baseScaleFactor,dataLabels:{style:{fontFamily:r,fontSize:i,lineHeight:a.inCanLineHeight,color:(0,d.pluck)(s.entitylabelcolor,a.inCancolor),bgColor:(0,d.pluck)(s.entitylabelbgcolor)||y,borderColor:(0,d.pluck)(s.entitylabelbordercolor)||y}},fillColor:u,fillAlpha:p,fillRatio:f,fillAngle:m,borderColor:g,borderAlpha:(0,d.pluck)(s.entityborderalpha,s.borderalpha,this.borderAlpha,"100"),borderThickness:(0,d.pluckNumber)(s.showentityborder,s.showborder,1)?(0,d.pluckNumber)(s.entityborderthickness,s.borderthickness,1):0,scaleBorder:(0,d.pluckNumber)(s.scaleentityborder,s.scaleborder,0),hoverFillColor:(0,d.pluck)(s.entityfillhovercolor,s.hoverfillcolor,s.hovercolor,h.plothoverfillcolor),hoverFillAlpha:(0,d.pluck)(s.entityfillhoveralpha,s.hoverfillalpha,s.hoveralpha,h.plothoverfillalpha),hoverFillRatio:(0,d.pluck)(s.entityfillhoverratio,s.hoverfillratio,s.hoverratio,h.plothoverfillratio),hoverFillAngle:(0,d.pluck)(s.entityfillhoverangle,s.hoverfillangle,s.hoverangle,h.plothoverfillangle),hoverBorderThickness:(0,d.pluck)(s.entityborderhoverthickness,s.hoverborderthickness),hoverBorderColor:(0,d.pluck)(s.entityborderhovercolor,g,h.plotbordercolor),hoverBorderAlpha:(0,d.pluck)(s.entityborderhoveralpha,h.plotborderalpha),nullEntityColor:b,nullEntityAlpha:(0,d.pluck)(s.nullentityfillalpha,s.nullentityalpha,p),nullEntityRatio:(0,d.pluck)(s.nullentityfillratio,s.nullentityratio,f),nullEntityAngle:(0,d.pluck)(s.nullentityfillangle,s.nullentityangle,m),connectorColor:(0,d.pluck)(s.labelconnectorcolor,s.connectorcolor,n),connectorAlpha:(0,d.pluck)(s.labelconnectoralpha,s.connectoralpha,"100"),connectorThickness:(0,d.pluckNumber)(s.labelconnectorthickness,s.borderthickness,1),showHoverEffect:(0,d.pluckNumber)(s.showentityhovereffect,s.usehovercolor,s.showhovereffect,1),hoverOnNull:(0,d.pluckNumber)(s.hoveronnull,s.entityhoveronnull,1),labelPadding:(0,d.pluckNumber)(s.labelpadding,5),showLabels:(0,d.pluckNumber)(s.showlabels,1),labelsOnTop:(0,d.pluckNumber)(s.entitylabelsontop,1),includeNameInLabels:(0,d.pluckNumber)(s.includenameinlabels,1),includeValueInLabels:(0,d.pluckNumber)(s.includevalueinlabels,0),useSNameInTooltip:(0,d.pluckNumber)(s.usesnameintooltip,0),useShortName:(0,d.pluckNumber)(s.usesnameinlabels,1),labelSepChar:(0,d.pluck)(s.labelsepchar,", "),showTooltip:(0,d.pluckNumber)(s.showentitytooltip,s.showtooltip,1),tooltipSepChar:(0,d.pluck)(s.tooltipsepchar,", "),tooltext:s.entitytooltext,hideNullEntities:(0,d.pluckNumber)(s.hidenullentities,0),showHiddenEntityBorder:(0,d.pluckNumber)(s.showhiddenentityborder,1),showNullEntityBorder:(0,d.pluckNumber)(s.shownullentityborder,1),hiddenEntityColor:(0,d.pluck)(s.hiddenentitycolor,s.hiddenentityfillcolor,s.hiddenentityalpha||s.hiddenentityfillalpha?b:"ffffff"),hiddenEntityAlpha:(0,d.pluck)(s.hiddenentityalpha,s.hiddenentityfillalpha,.001),shadow:(0,d.pluckNumber)(s.showshadow,this.defaultPlotShadow,h.shadow)},o.markerOpts={dataLabels:{style:{fontFamily:(0,d.pluck)(s.markerfont,r),fontSize:(0,d.pluckNumber)(s.markerfontsize,parseInt(i,10)),fontColor:(0,d.pluck)(s.markerlabelcolor,s.markerfontcolor,n),labelBgColor:(0,d.pluck)(s.markerlabelbgcolor)||y,labelBorderColor:(0,d.pluck)(s.markerlabelbordercolor)||y}},showTooltip:(0,d.pluckNumber)(s.showmarkertooltip,s.showtooltip,1),showLabels:(0,d.pluckNumber)(s.showmarkerlabels,s.showlabels,1),showHoverEffect:(0,d.pluckNumber)(s.showmarkerhovereffect,1),labelPadding:(0,d.pluck)(s.markerlabelpadding,"5"),labelWrapWidth:(0,d.pluckNumber)(s.markerlabelwrapwidth,0),labelWrapHeight:(0,d.pluckNumber)(s.markerlabelwrapheight,0),fillColor:(0,d.pluck)(s.markerfillcolor,s.markerbgcolor,h.markerfillcolor),fillAlpha:(0,d.pluck)(s.markerfillalpha,h.markerfillalpha),fillAngle:(0,d.pluck)(s.markerfillangle,h.markerfillangle),fillRatio:(0,d.pluck)(s.markerfillratio,h.markerfillratio),fillPattern:(0,d.pluck)(s.markerfillpattern,h.markerbgpattern),hoverFillColor:s.markerfillhovercolor,hoverFillAlpha:s.markerfillhoveralpha,hoverFillRatio:s.markerfillhoverratio,hoverFillAngle:s.markerfillhoverangle,borderThickness:(0,d.pluck)(s.markerborderthickness,1),borderColor:(0,d.pluck)(s.markerbordercolor,h.markerbordercolor),borderAlpha:(0,d.pluckNumber)(s.markerborderalpha,h.markerborderalpha),hoverBorderThickness:s.markerborderhoverthickness,hoverBorderColor:s.markerborderhovercolor,hoverBorderAlpha:s.markerborderhoveralpha,radius:(0,d.pluckNumber)(s.markerradius&&(0,d.trimString)(s.markerradius),7),shapeId:(0,d.pluck)(s.defaultmarkershape,"circle"),labelSepChar:(0,d.pluck)(s.labelsepchar,", "),tooltipSepChar:(0,d.pluck)(s.tooltipsepchar,", "),autoScale:(0,d.pluckNumber)(s.autoscalemarkers,0),tooltext:(0,d.pluck)(c&&c.tooltext,s.markertooltext),dataEnabled:v,valueToRadius:(0,d.pluckNumber)(s.markerradiusfromvalue,1),valueMarkerAlpha:(0,d.pluck)(s.valuemarkeralpha,"75"),hideNull:(0,d.pluckNumber)(s.hidenullmarkers,0),nullRadius:(0,d.pluckNumber)(s.nullmarkerradius,s.markerradius,7),adjustViewPort:(0,d.pluckNumber)(s.adjustviewportformarkers,0),startAngle:(0,d.pluckNumber)(s.markerstartangle,90),maxRadius:(0,d.pluckNumber)(s.maxmarkerradius,0),minRadius:(0,d.pluckNumber)(s.minmarkerradius,0),applyAll:(0,d.pluckNumber)(s.applyallmarkers,0),shadow:(0,d.pluckNumber)(s.showmarkershadow,s.showshadow,0)},o.connectorOpts={showHoverEffect:(0,d.pluckNumber)(s.showconnectorhovereffect,1),thickness:(0,d.pluckNumber)(s.connectorthickness,s.markerconnthickness,"2"),color:(0,d.pluck)(s.connectorcolor,s.markerconncolor,h.markerbordercolor),alpha:(0,d.pluck)(s.connectoralpha,s.markerconnalpha,"100"),hoverThickness:(0,d.pluckNumber)(s.connectorhoverthickness,s.connectorthickness,s.markerconnthickness,"2"),hoverColor:(0,d.pluck)(s.connectorhovercolor,s.connectorcolor,s.markerconncolor,h.markerbordercolor),hoverAlpha:(0,d.pluck)(s.connectorhoveralpha,s.connectoralpha,s.markerconnalpha,"100"),dashed:(0,d.pluckNumber)(s.connectordashed,s.markerconndashed,0),dashLen:(0,d.pluckNumber)(s.connectordashlen,s.markerconndashlen,3),dashGap:(0,d.pluckNumber)(s.connectordashgap,s.markerconndashgap,2),font:(0,d.pluck)(s.connectorfont,s.markerconnfont,r),fontColor:(0,d.pluck)(s.connectorlabelcolor,s.connectorfontcolor,s.markerconnfontcolor,n),fontSize:(0,d.pluckNumber)(s.connectorfontsize,s.markerconnfontsize,parseInt(i,10)),showLabels:(0,d.pluckNumber)(s.showconnectorlabels,s.showmarkerlabels,s.showlabels,1),labelBgColor:(0,d.pluck)(s.connectorlabelbgcolor,s.markerconnlabelbgcolor,h.plotfillcolor),labelBorderColor:(0,d.pluck)(s.connectorlabelbordercolor,s.markerconnlabelbordercolor,h.markerbordercolor),shadow:(0,d.pluckNumber)(s.showconnectorshadow,s.showmarkershadow,s.showshadow,0),showTooltip:(0,d.pluckNumber)(s.showconnectortooltip,s.showmarkertooltip,s.showtooltip,1),tooltext:(0,d.pluck)(c&&c.connectortooltext,s.connectortooltext),hideOpen:(0,d.pluckNumber)(s.hideopenconnectors,1)},o.adjustViewPortForMarkers=(0,d.pluckNumber)(s.adjustviewportformarkers,v)},o._attachMouseEvents=function(){var e=this.getFromEnv("eventListeners"),o=this.getFromEnv("chart-container");e.push(c.default.listen(o,d.hasTouch?"touchstart":"click",t.searchMouseMove,this)),e.push(c.default.listen(window.document,d.hasTouch?"touchstart":"mousemove",t.searchMouseMove,this))},o._dispose=function(){var o=this.getFromEnv("chart-container");d.hasTouch&&(c.default.unlisten(o,"touchstart",t.searchMouseMove),c.default.unlisten(window.document,"touchstart",t.searchMouseMove)),c.default.unlisten(o,"click",t.searchMouseMove),c.default.unlisten(window.document,"mousemove",t.searchMouseMove),e.prototype._dispose.call(this)},t.searchMouseMove=function(e){var t,o=e.data,n=o.config,r=o.getDatasets()[1],i=r&&r.getFromEnv("toolTipController"),a=r&&r.config.currentToolTip,l=o.config.lastHoveredPoint,s={};o.getFromEnv("chart-container")&&o.config.lastInteractionEvent!==e.originalEvent&&(o.config.lastInteractionEvent=e.originalEvent,(t=function(e,t){var o=(0,d.getMouseCoordinate)(t.getFromEnv("chart-container"),e,t),n=o.chartX,r=o.chartY,i=t.config,a=i.canvasLeft,l=i.canvasTop,s=i.canvasLeft+i.canvasWidth,c=i.canvasHeight+i.canvasTop;return o.insideCanvas=!1,o.originalEvent=e,n>a&&n<s&&r>l&&r<c&&(o.insideCanvas=!0),o}(e,o))&&t.insideCanvas?(n.lastMouseEvent=e,s={x:t.chartX,y:t.chartY},o._searchNearestNeighbour(s,e)):(l&&r&&r.hoverOutFn(l.element),o.config.lastHoveredPoint=null,i&&i.hide(a)))},o._searchNearestNeighbour=function(e,t){var o,n=this.getDatasets()[1];if(n){if(!n.components.kDTree)return;(o=n.getElement(e))?n.highlightPoint(o,t):n.highlightPoint(!1,t)}},o._createLayers=function(){e.prototype._createLayers.call(this),this._attachMouseEvents()},o._parseBackgroundCosmetics=function(){var e,t=this.getChildren("background")[0].config,o=this.getChildren("colorPalette")[0],n=this.getFromEnv("chart-attrib");e=t.showBorder=(0,d.pluckNumber)(n.showcanvasborder,1),t.borderWidth=e?(0,d.pluckNumber)(n.canvasborderthickness,1):0,t.borderRadius=t.borderRadius=(0,d.pluckNumber)(n.canvasborderradius,0),t.borderDashStyle=t.borderDashStyle=(0,d.pluckNumber)(n.borderdashed,0)?(0,d.getDashStyle)((0,d.pluckNumber)(n.borderdashlen,4),(0,d.pluckNumber)(n.borderdashgap,2)):"none",t.borderAlpha=(0,d.pluck)(n.canvasborderalpha,o.borderAlpha),t.borderColor=t.borderColor=(0,d.convertColor)((0,d.pluck)(n.canvasbordercolor,o&&o.borderColor),t.borderAlpha)},o._getBackgroundCosmetics=function(){var e=this.getFromEnv("chart-attrib")||this.jsonData.map,t=this.getChildren("colorPalette")[0];return{FCcolor:{color:(0,d.pluck)(e.bgcolor,e.canvasbgcolor,t.bgcolor),alpha:(0,d.pluck)(e.bgalpha,e.canvasbgalpha,t.bgalpha),angle:(0,d.pluck)(e.bgangle,e.canvasbgangle,t.bgangle),ratio:(0,d.pluck)(e.bgratio,e.canvasbgratio,t.bgratio)}}},o._parseCanvasCosmetics=function(){e.prototype._parseCanvasCosmetics.call(this);var t=this.config,o=this.getFromEnv("chart-attrib")||this.jsonData.map,n=this.getChildren("canvas")[0].config;t.origMarginTop=(0,d.pluckNumber)(o.maptopmargin,11),t.origMarginLeft=(0,d.pluckNumber)(o.mapleftmargin,11),t.origMarginBottom=(0,d.pluckNumber)(o.mapbottommargin,11),t.origMarginRight=(0,d.pluckNumber)(o.maprightmargin,11),t.origCanvasLeftMargin=(0,d.pluckNumber)(o.canvasleftmargin,0),t.origCanvasRightMargin=(0,d.pluckNumber)(o.canvasrightmargin,0),t.origCanvasTopMargin=(0,d.pluckNumber)(o.canvastopmargin,0),t.origCanvasBottomMargin=(0,d.pluckNumber)(o.canvasbottommargin,0),n.canvasBorderRadius=(0,d.pluckNumber)(o.canvasborderradius,0),n.origCanvasTopPad=(0,d.pluckNumber)(o.canvastoppadding,0),n.origCanvasBottomPad=(0,d.pluckNumber)(o.canvasbottompadding,0),n.origCanvasLeftPad=(0,d.pluckNumber)(o.canvasleftpadding,0),n.origCanvasRightPad=(0,d.pluckNumber)(o.canvasrightpadding,0)},o.preliminaryScaling=function(){for(var e,t,o,n=this.jsonData,r=n.markers&&n.markers.items||[],i=r&&r.length||0,a=1/0,l=1/0,s=-1/0,c=-1/0;i--;)o=r[i],e=Number(o.x),t=Number(o.y),a=C(a,e),l=C(l,t),s=w(s,e),c=w(c,t);return{x:a,y:l,x1:s,y1:c}},o.getScalingParameters=function(e,t,o,n){var r,i,a=e/t,l=o/(e*this.config.baseScaleFactor),s=n/(t*this.config.baseScaleFactor),c=0,h=0;return l>s?(c+=(o-n*a)/2,i=200/(t*(r=s))):(h+=(n-o/a)/2,i=200/(e*(r=l))),{scaleFactor:r,strokeWidth:i,translateX:c,translateY:h}},o.calculateMarkerBounds=function(e,t,o){var n,r,i,a,l,s,c,h,d,g,u,p,f=this.config,m=f.markerOpts,b=this.getDatasets(),v=this.getDataLimits(),y=v.dataMin,k=v.dataMax,x=m.hideNull,S=m.nullRadius,L=m.valueToRadius,T=1/0,F=1/0,E=-1/0,N=-1/0;for(s=0,h=b.length;s<h;s++)"markers"===(c=b[s]).getName()&&(n=c);if(n)for(s in n.calculateMarkerRadiusLimits(),i=(r=n.config||{}).minRadius,a=r.maxRadius,l=n.components&&n.components.markerObjs||{})p=(f=l[s].config).definition||{},null!==f.cleanValue?(L&&void 0===p.radius&&(f.radius=i+(a-i)*(f.cleanValue-y)/(k-y)),u=Number(f.radius),d=(Number(p.x)+t)*e,g=(Number(p.y)+o)*e,T=C(T,d-u),F=C(F,g-u),E=w(E,d+u),N=w(N,g+u)):x?f.__hideMarker=!0:null===f.radius&&(f.radius=S);return{x:T,y:F,x1:E,y1:N}},o._spaceManager=function(){var e,t,o,n,r,i,a,l,s,c,h=this.config,g=this.getChildren("legend")&&this.getChildren("legend")[0],u=this.getChildren("gLegend")&&this.getChildren("gLegend")[0],p=g&&g.config.legendPos?g.config.legendPos.split("-"):u&&u.conf.legendPosition?u.conf.legendPosition.split("-"):[],f=this.getFromEnv("chart-attrib"),m=h.showBorder,b=h.origMarginLeft,v=h.origMarginTop,y=this.config.baseWidth,k=this.config.baseHeight,C={},w=0,x=0,S=h.markerOpts,L=h.borderWidth=m?(0,d.pluckNumber)(f.borderthickness,1):0;this._allocateSpace({top:L,bottom:L,left:L,right:L}),this._allocateSpace(this._manageActionBarSpace&&this._manageActionBarSpace(.225*h.availableHeight)||{}),s="right"===p[0]||"left"===p[0]?.3*h.canvasWidth:.3*h.canvasHeight,t=p[0]===d.POSITION_TOP||"bottom"===p[0]?h.canvasHeight:h.canvasWidth,h.showLegend&&this._manageLegendSpace(s),e="bottom"===p[0]||p[0]===d.POSITION_TOP?.225*h.canvasHeight:.225*h.canvasWidth,"top"===p[0]&&(v+=t-h.canvasHeight),c=this._manageChartMenuBar(e),"left"===p[0]&&(b+=t-h.canvasWidth),n=h.canvasWidth,r=h.canvasHeight,S.dataEnabled?(h.adjustViewPortForMarkers?((C=this.preliminaryScaling()).x1>y&&(y=C.x1),C.x<0&&(y+=-C.x,w=-C.x),C.y1>k&&(k=C.y1),C.y<0&&(k+=-C.y,x=-C.y),o=this.getScalingParameters(y,k,n,r),a=r,l=n,(C=this.calculateMarkerBounds(o.scaleFactor*this.config.baseScaleFactor,w,x)).x<0&&(b+=-C.x,n+=C.x),C.y<0&&(v+=-C.y,r+=C.y),C.x1>l&&(n-=C.x1-l),C.y1>a&&(r-=C.y1-a)):(o=this.getScalingParameters(y,k,n,r),this.calculateMarkerBounds(o.scaleFactor*this.config.baseScaleFactor,w,x)),b+=w*(o=this.getScalingParameters(y,k,n,r)).scaleFactor*this.config.baseScaleFactor,v+=x*o.scaleFactor*this.config.baseScaleFactor):o=this.getScalingParameters(y,k,n,r),this.config.scalingParams=o,i=o.scaleFactor,o.translateX=o.translateX+b,o.translateY=o.translateY+v+c.top||0,o.sFactor=i*this.config.baseScaleFactor*100/100,o.transformStr=["t",o.translateX,",",o.translateY,"s",i,",",i,",0,0"].join(""),this.config.annotationConfig={id:"Geo",showbelow:0,autoscale:0,grpxshift:o.translateX?o.translateX:0,grpyshift:o.translateY?o.translateY:0,xscale:100*(i?i*this.config.baseScaleFactor:1),yscale:100*(i?i*this.config.baseScaleFactor:1),scaletext:1,options:{useTracker:!0}}},o.getDataLimits=function(){var e,t,o=this.getDatasets(),n=o.length,r=1/0,i=-1/0;for(t=0;t<n;t++)e=o[t].getDataLimits(),r=C(r,e.min),i=w(i,e.max);return{dataMin:r,dataMax:i}},o.getEntityPaths=function(e){var t,o={},n=this.config.entities;if(e){for(t in n)o[t]=n[t];return o}return n},o.checkComplete=function(){this.config.entityFlag&&this.config.entitiesReady&&(this.config.entityFlag=!1,this.config.markersDrawn=!0,this.fireChartInstanceEvent("internal.mapdrawingcomplete",{renderer:this}))},t}(a.default);t.default=S},249:function(e,t,o){"use strict";var n=o(11);t.__esModule=!0,t.default=void 0;var r=n(o(3)),i=n(o(95)),a=o(250),l=n(o(251)),s=n(o(252)),c=function(e){function t(){var t;return(t=e.call(this)||this).registerFactory("dataset",l.default,["vCanvas"]),t.registerFactory("legend",s.default),t}(0,r.default)(t,e),t.getName=function(){return"MSCartesian"};var o=t.prototype;return o.getName=function(){return"MSCartesian"},o.getType=function(){return"chartAPI"},o._manageLegendSpace=function(){a._manageLegendSpace.call(this)},o.manageGradientLegendSpace=function(e){return a.manageGradientLegendSpace.call(this,e)},t}(i.default);t.default=c},250:function(e,t,o){"use strict";t.__esModule=!0,t._manageLegendSpace=function(){var e,t,o,r,i=this.config,a=this.getChildren("legend")&&this.getChildren("legend")[0],l=this.getChildren("gLegend")&&this.getChildren("gLegend")[0],s=this.getFromEnv("dataSource").colorrange,c=i.hasLegend,h={},d=this.hasGradientLegend,g=this.getFromEnv("dataSource").chart,u=(0,n.pluckNumber)(g.mapbycategory,0);d&&s&&(0,n.pluckNumber)(s.gradient)&&!u?(e=l.conf,d=!0,i.gLegendEnabled=!0,t=e.legendPosition?e.legendPosition.split("-"):[],r=t[0]===n.POSITION_RIGHT||t[0]===n.POSITION_LEFT?.4:.5):(e=a&&a.config,d=!1,i.gLegendEnabled=!1,t=e&&e.legendPos?e.legendPos.split("-"):[n.POSITION_BOTTOM],r=t[0]===n.POSITION_RIGHT||t[0]===n.POSITION_LEFT?.8:.4);o=t[0]===n.POSITION_ABSOLUTE?.4*i.availableHeight:t[0]===n.POSITION_RIGHT||t[0]===n.POSITION_LEFT?i.availableWidth*r:i.availableHeight*r;d?h=this.manageGradientLegendSpace(o):!1!==c&&a&&!a.getState("removed")&&(h=a&&a._manageLegendPosition(o));h&&this._allocateSpace(h)},t.manageGradientLegendSpace=function(e){var t,o,r,i=this.config,a=this.getFromEnv("gLegend"),l=a&&a.conf,s={top:0,bottom:0,left:0,right:0};i.gLegendPadding=(0,n.pluckNumber)(this.getFromEnv("chart-attrib").legendpadding,10),o=Math.min(i.gLegendPadding,.5*e),l&&(t=l.legendPosition?l.legendPosition.split("-"):[],r=a.getLogicalSpace(e),t[0]===n.POSITION_BOTTOM?s.bottom=(r.height||0)+o:t[0]===n.POSITION_TOP?s.top=(r.height||0)+o:t[0]===n.POSITION_LEFT?s.left=(r.width||0)+o:t[0]!==n.POSITION_ABSOLUTE&&(s.right=(r.width||0)+o));return s};var n=o(2)},251:function(e,t,o){"use strict";t.__esModule=!0,t.default=function(e){var t,o,r,i,a=e.getFromEnv("dataSource").dataset,l=e.getChildren().canvas[0],s=t=l.getChildren("vCanvas")[0],c=e.config.defaultDatasetType||"";if(!a)return void e.setChartMessage();(r=e.getDSGroupdef())&&((0,n.componentFactory)(t,r,"datasetGroup_"+c,1,[a]),i=t.getChildren("datasetGroup_"+c));i&&(s=i[0]),o=e.getDSdef(),(0,n.datasetFactory)(s,o,"dataset",a.length,a)};var n=o(2)},252:function(e,t,o){"use strict";var n=o(11);t.__esModule=!0,t.default=function(e){var t;(0,r.componentFactory)(e,i.default,"legend"),(t=e.getChildren("legend")[0]).configure(),e.addToEnv("legend",t),e.config.showLegend||t.remove()};var r=o(2),i=n(o(245))},253:function(e,t,o){"use strict";var n=o(11);t.__esModule=!0,t.default=void 0;var r=n(o(3)),i=o(2),a=o(4),l=o(5),s=n(o(254)),c=i.preDefStr.POINTER,h="M",d="L",g="Z",u=function(e,t){var o=e.config,n=e.getLinkedParent().config,r=.5*n.symbolWidth,a=(n.initialItemX||0)+o._legendX,l=(n.initialItemY||0)+o._legendY,s=a+n.symbolPadding+r,h=l+(o._markerYGutter||0)+n.symbolPadding+r,d=(0,i.mapSymbolName)(o.anchorSide),g=o.symbol=d&&d.split("_")||[],u="spoke"===g[0]?1:0;return("line"===o.type||o.drawLine)&&(r*=.6),{path:(0,i.polyPathToPath)([g[1]||2,s,h,r,o.startAngle,o.spoke||u]),cursor:t.cursor||c,stroke:t.stroke,fill:t.fill,"stroke-width":t["stroke-width"]||.5}};(0,l.addDep)({name:"legendItemAnimation",type:"animationRule",extension:s.default});var p=function(e){function t(){var t;return(t=e.call(this)||this)._stateCosmetics={},t._legendState=[],t}(0,r.default)(t,e);var o=t.prototype;return o.getName=function(){return"legendItem"},o.parseLegendCosmetics=function(){var e,t,o,n=this.getLinkedParent(),r=n.getLegendState(),a=this.getLegendState(),l=["default"],s={};for(l=l.concat(r,a),o=0;o<l.length;o++)e=n.getStateCosmetics(l[o]),t=this.getStateCosmetics(l[o]),e&&("function"==typeof e?s=e(s,this):(0,i.extend2)(s,e)),t&&("function"==typeof t?s=t(s,this):(0,i.extend2)(s,t));return s},o.getType=function(){return"legendItem"},o.configure=function(e){var t,o,n=this.config;for(t in e)if(e.hasOwnProperty(t))if("object"!=typeof e[t])n[t]=e[t];else{var r=n[t]?n[t]:{};for(o in e[t])r[o]=e[t][o];n[t]=r}},o.itemClickFn=function(){var e=this.getFromEnv("chart-attrib"),t=(0,i.pluckNumber)(e.interactivelegend,1),o=this.getLinkedItem("owner");t&&o.legendInteractivity(this)},o.dispose=function(){this.removeEventListener("fc-click",this.click),this.removeEventListener("fc-mouseover",this.mouseover),this._dispose()},o.getLegendState=function(){return this._legendState},o.hasState=function(e){var t,o,n=this.getLegendState();for(t=0,o=n.length;t<o;t++)if(n[t]===e)return!0;return!1},o.setLegendState=function(e,t){this.hasState(e)||(t?this._legendState.push(e):this._legendState.unshift(e)),this.asyncDraw()},o.__setDefaultConfig=function(){e.prototype.__setDefaultConfig.call(this),this.config.eventArguments={}},o.removeLegendState=function(e){var t,o,n=1;if(e)for(t=0,o=this._legendState.length;t<o&&n;t++)e===this._legendState[t]&&(this._legendState.splice(t,1),n=0);else this._legendState.length=0;this.asyncDraw()},o.removeStateCosmetics=function(e){delete this._stateCosmetics[e]},o.setStateCosmetics=function(e,t){this._stateCosmetics[e]=t},o.getStateCosmetics=function(e){return this._stateCosmetics[e]},o.draw=function(){var e,t,o,n,r,a,l,s,p,f,m,b,v,y,k,C,w,x,S,L,T,F,E,N,_,A,I,P,O,M,R,B,D,G,V,z,H,j,W=this.getLinkedParent(),Y=W.getFromEnv("chart").config,X=this.getFromEnv("animationManager"),K=this.config,U=W.config,J=U.legendHeight,$=U.symbolPadding,Z=U.symbolWidth,q=U.interactiveLegend,Q=U.textPadding||2,ee=U.itemHoverStyle,te=W.getChildContainer("itemGroup"),oe=U.drawCustomLegendIcon,ne=this.hasState("hidden"),re={};o=(e=this.parseLegendCosmetics()).symbol,n=U.initialItemX||0,r=U.initialItemY||0,p=K.type,S=e.symbol.stroke||"000000",L=e.symbol.fill,t=e.symbol.lineWidth||U.lineWidth,F=K.anchorSide,E=K.drawLine,f=n+K._legendX,m=r+K._legendY,R=this.getGraphicalElement("legendItemBackground"),s=this.getGraphicalElement("legendItemText"),b=this.getGraphicalElement("legendItemLine"),y=this.getGraphicalElement("legendItemSymbol"),!(q=(0,i.pluck)(K.interactiveLegend,q))&&(e.cursor="default"),B=e.text,H=f+J+Q-2,j=m+(K._legendTestY||0),B.text=K.name,B.x=H,B.y=j,l=X.setAnimation({el:s||"text",attr:B,component:this,container:te,label:"icon"}),s||(l=this.addGraphicalElement("legendItemText",l)),l.data("legendItem",K),D=!1,oe&&!1!==K.customLegendIcon?(A=!ne&&o.borderColor,I=(0,i.pluck)(o.borderAlpha),N=!ne&&o.bgColor,_=(0,i.pluck)(o.bgAlpha,"100"),P=e.symbol.rawFillColor,L=ne?e.symbol.fill:N||P,L=(0,i.convertColor)(L,_),O=e.symbol.rawStrokeColor,S=ne?e.symbol.stroke:A||O||P,S=(0,i.convertColor)(S,I),k=f+$+(C=.5*Z),a=m+(K._markerYGutter||0)+$+C,w="spoke"===(x=(0,i.mapSymbolName)(o.sides)&&(0,i.mapSymbolName)(o.sides).split("_")||[])[0]?1:0,G={path:(0,i.polyPathToPath)([x[1]||2,k,a,C,o.startAngle||0,w]),cursor:e.symbol.cursor||c,stroke:S,fill:L,"stroke-width":(0,i.pluckNumber)(o.borderThickness,1)}):"line"===p||E?(a=m+(K._markerYGutter||0)+$+.5*Z,z={path:[h,f+$,a,d,f+$+Z,a]},D=!0,re={opacity:Y.legendiconalpha||1,"stroke-width":t,stroke:S,cursor:e.cursor||c},F&&(G=u(this,e.symbol))):F?G=u(this,e.symbol):"line"!==p&&(S=K.symbolStroke||S,G={path:function(e,t,o,n,r){var i,a,l,s,c,u,p,f,m,b=[h];switch(r){case"column":case"dragColumn":case"column3D":case"realtimeColumn":case"errorBar2D":a=.5*(i=.25*o),l=.7*n,s=.4*n,b=b.concat([e,t+n,"l",0,-l,i,0,0,l,"z","m",i+a,0,"l",0,-n,i,0,0,n,"z","m",i+a,0,"l",0,-s,i,0,0,s,"z"]);break;case"bar2D":case"bar3D":i=.3*o,a=.6*o,s=(l=n/4)/2,b=b.concat([e,t,d,e+a,t,e+a,t+l,e,t+l,g,h,e,t+l+s,d,e+o,t+l+s,e+o,t+l+s+l,e,t+2*l+s,g,h,e,t+2*(l+s),d,e+i,t+2*(l+s),e+i,t+n,e,t+n,g]);break;case"area":case"area3d":case"areaspline":case"dragArea":case"realTimeArea":case"splinearea":i=.3*o,a=.6*o,l=.6*n,s=.2*n,c=.8*n,b=b.concat([e,t+c,d,e,t+l,e+i,t+s,e+a,t+l,e+o,t+s,e+o,t+c,g]);break;case"pie2D":case"pie3d":case"doughnut2D":case"doughnut3D":a=.9*(i=.5*o),1,1,u=e+i+1,f=t+i-1,p=e+i-1,m=t+i+1,b=b.concat([u,f,d,u,f-a+1,"A",a-1,a-1,0,0,1,u+a-1,f,g,h,p,m,d,p,m-a,"A",a,a,0,1,0,p+a,m,g]);break;case"boxandwhisker2d":b=b.concat([e,t,d,e+o,t,e+o,t+n,e,t+n,g]);break;default:b=b.concat([e,t,d,e+o,t,e+o,t+n,e,t+n,g])}return{path:b}}(f+$,m+(K._markerYGutter||0)+$,Z,Z,p).path,"stroke-width":.5,stroke:S,fill:L,cursor:e.cursor||c}),z&&D?(Object.assign(z,re),b=X.setAnimation({el:b||"path",attr:z,component:this,callback:function(){this.show()},container:te}),this.getGraphicalElement("legendItemLine")||(b=this.addGraphicalElement("legendItemLine",b))):b&&b.hide(),G?(G.opacity=(0,i.pluckNumber)(e.symbol.opacity,1),v=X.setAnimation({el:y||"path",attr:G,component:this,callback:function(){this.show()},container:te,label:"icon"}),y&&y.node||(v=this.addGraphicalElement("legendItemSymbol",v)),v.data("legendItem",K)):y&&y.hide(),T=e.background&&e.background.legendBackgroundColor?(0,i.convertColor)(e.background.legendBackgroundColor,e.background.alpha):i.TRACKER_FILL,V={x:f,y:m,width:K._totalWidth,height:K._legendH,r:0,fill:T,opacity:1,"stroke-width":1,stroke:"none",cursor:e.symbol.cursor||c},M=X.setAnimation({el:R||"rect",attr:V,css:void 0,component:this,label:"background",container:te}),R||this.addGraphicalElement("legendItemBackground",M),M.data("legendItem",this).data("interactive",q).data("itemHoverStyle",ee).data("itemStyle",e)},t}(a.ComponentInterface);t.default=p},254:function(e,t,o){"use strict";t.__esModule=!0,t.default=void 0;var n=o(2),r={"*.legendItem.legendItem":function(){return{"icon.appearing":function(e){return[{initialAttr:{opacity:0},slot:"plot",startEnd:{start:.5,end:1},finalAttr:{opacity:(0,n.pluckNumber)(e.attr.opacity,1)}}]},"background.appearing":function(e){return[{initialAttr:{opacity:0},slot:"plot",startEnd:{start:.5,end:1},finalAttr:{opacity:e.attr.opacity}}]},"icon.disappearing":function(){return[{finalAttr:{opacity:0},slot:"initial"}]}}}};t.default=r},255:function(e,t,o){"use strict";t.__esModule=!0,t.default=void 0;var n=[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"plot"}],r=[{slot:"plot",startEnd:{start:0,end:.5}}],i=[{slot:"intial"}],a={"*.legend.legend":function(){return{"legendGroup.appearing":n,"legendGroup.updating":r,"legendGroup.disappearing":i,"scrollbar.appearing":n,"scrollbar.updating":r,"scrollbar.disappearing":i}}};t.default=a},256:function(e,t,o){"use strict";t.__esModule=!0,t.computeLayout=void 0;var n=o(246),r=o(243),i=o(257),a=function(){function e(){this.gridLayoutEngine=i.computeGridLayout}return e.prototype.compute=function(e){switch((0,n.getDisplayProperty)(e)){case r.DISPLAY_GRID:case r.DISPLAY_FLEX:default:return this.gridLayoutEngine(e)}},e}();t.computeLayout=function(e){var t,o=new a,r=(0,n.cloneObject)(e);return r.root=!0,t=o.compute(r),(0,n.attachLayoutInformation)(e,t),e}},257:function(e,t,o){"use strict";var n=o(11);t.__esModule=!0,t.computeGridLayout=function(e,t){void 0===t&&(t=1);var o,n,r,a,l=e.style;if(!e||!e.style)return;e.userGivenStyles||(e.style.width=isNaN(e.style.width)?"auto":e.style.width,e.style.height=isNaN(e.style.height)?"auto":e.style.height,l.paddingStart=(0,i.pluckNumber)(l.paddingStart,l.padding,0),l.paddingEnd=(0,i.pluckNumber)(l.paddingEnd,l.padding,0),l.paddingTop=(0,i.pluckNumber)(l.paddingTop,l.padding,0),l.paddingBottom=(0,i.pluckNumber)(l.paddingBottom,l.padding,0),e.userGivenStyles={gridTemplateColumns:e.style.gridTemplateColumns,gridTemplateRows:e.style.gridTemplateRows,width:e.style.width,height:e.style.height});for(e.unResolvedChildren=[],o=0,n=e.children&&e.children.length;o<n;o++)r=e.children[o],(0,i.getDisplayProperty)(r)&&(f(r)?this.compute(r):e.unResolvedChildren.push(r));(a=new k).set("domTree",e).set("parent",this).compute(),t<2&&this.gridLayoutEngine(function(e,t){var o,n,r,a,l,s,c,h,d,g,u=e.style,p=t.getConfig("rowTracks"),f=t.getConfig("colTracks"),m=t.getConfig("mapping"),b=u.gridTemplateRows,v=u.gridTemplateColumns;for(e.style.gridTemplateRows=C(b,p),e.style.gridTemplateColumns=C(v,f),n=0,a=(e.children||[]).length;n<a;n++)if(o=e.children[n],(0,i.getDisplayProperty)(o)){if(o.style.gridTemplateColumns=o.userGivenStyles.gridTemplateColumns,o.style.gridTemplateRows=o.userGivenStyles.gridTemplateRows,isNaN(o.userGivenStyles.width)){for(d=o.style.gridColumnStart,g=o.style.gridColumnEnd,d=m.col.nameToLineMap[d],g=m.col.nameToLineMap[g],r=d,s=0;r<g;r++)s+=f[r].calculatedStyle.baseSize;o.style.width=s}if(isNaN(o.userGivenStyles.height)){for(c=o.style.gridRowStart,h=o.style.gridRowEnd,c=m.row.nameToLineMap[c],h=m.row.nameToLineMap[h],r=c,l=0;r<h;r++)l+=p[r].calculatedStyle.baseSize;o.style.height=l}}return e}(e,a),2);return e};var r=n(o(16)),i=o(246),a=n(o(258)),l=o(243),s=o(259);function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function h(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){(0,r.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var d=["auto","none"],g=/minmax/,u=/(?:[^\s[\]()]+|\[[^[\]]*\]|\([^()]*\))+/g,p=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},f=function(e){var t=e.style||{},o=t.gridTemplateColumns,n=t.gridTemplateRows;return!/repeat\(/g.test(o)&&!/repeat\(/g.test(n)},m=function(e){return e.split(/\(|\)/g)[1].split(",").map((function(e){return e&&e.trim()}))},b=function(e,t){var o,n,r=p(t),a="width"===t?"col":"row";return e.map((function(e){return o=e.style["gridTemplate"+p("col"===a?"columns":"rows")],n="grid"===(0,i.getDisplayProperty)(e)&&/repeat\(/g.test(o)?m(o)[1]:e.style["min"+r+"Contribution"]||e.style[t]||"auto",{start:e[a+"Start"],end:e[a+"End"],size:n}}))},v=function(e,t,o){var n,r;for(n=t.x;n<o.x;n++)for(r=t.y;r<o.y;r++)e[n][r]=!0},y=function(e,t){var o=e.gridRowStart,n=e.gridRowEnd,r=e.gridColumnStart,i=e.gridColumnEnd;if(e.gridColumn){var a=e.gridColumn.split("/").map((function(e){return e.trim()}));r=a[0],i=a[1],r=t?t.col.nameToLineMap[r]:1,/span\s+\d+/g.test(i)&&(i=r+ +i.match(/span\s+(\d+)/)[1]),i=t?t.col.nameToLineMap[i]:1}if(e.gridRow){var l=e.gridRow.split("/").map((function(e){return e.trim()}));o=l[0],n=l[1],o=t?t.row.nameToLineMap[o]:1,/span\s\d+/g.test(n)&&(n=o+ +n.match(/span\s(\d+)/)[1]),n=t?t.row.nameToLineMap[n]:1}return{gridRowStart:o,gridRowEnd:n,gridColumnStart:r,gridColumnEnd:i}},k=function(){function e(){this.setup()}var t=e.prototype;return t.setup=function(){return this._tsa=new a.default,this.props={},this._config={mapping:{}},this},t.set=function(e,t){return this.props[e]=t,this},t.getProps=function(e){return this.props[e]},t.getConfig=function(e){return this._config[e]},t.compute=function(e){var t=e||this.props.domTree;this._sanitizeTracks(t)._sanitizeItems(t)._inflateTracks()._assignCoordinatesToCells(t)},t._sanitizeTracks=function(e){void 0===e&&(e={});var t,o=e.style,n=o.gridTemplateRows,r=o.gridTemplateColumns,i=this._config,a=function(e){var t,o=1,n=1;return e.forEach((function(e){t=y(e.style),n=Math.max(isNaN(+t.gridColumnStart)?0:+t.gridColumnStart,n,isNaN(+t.gridColumnEnd-1)?0:+t.gridColumnEnd-1),o=Math.max(isNaN(+t.gridRowStart)?0:+t.gridRowStart,o,isNaN(+t.gridRowEnd-1)?0:+t.gridRowEnd-1)})),{maxRow:o,maxColumn:n}}(e.children),l=a.maxColumn,s=a.maxRow;return this.set("maxTracks",s),t=this._fetchTrackInformation(n),i.mapping.row={nameToLineMap:t.nameToLineMap,lineToNameMap:t.lineToNameMap},i.rowTracks=t.tracks,this.set("maxTracks",l),t=this._fetchTrackInformation(r),i.mapping.col={nameToLineMap:t.nameToLineMap,lineToNameMap:t.lineToNameMap},i.colTracks=t.tracks,this},t._fetchTrackInformation=function(e){void 0===e&&(e="none");var t,o,n,r,i,a,l=e.match(u),s=[{}],c={},h={};for(n=l.filter((function(e){return!e||"string"!=typeof e||!e.length||(o=e.length,"["===e[0]&&"]"===e[o-1])})),r=l.filter((function(e){return!!e&&(o=(e+"").toLowerCase().replace(/px|fr/,""),!(!(d.indexOf(o)>=0||g.test(o))&&isNaN(o)))})).map((function(e){return function(e){if("auto"===(e=e.trim()))return e;if(!isNaN(+e))return+e;if(g.test(e)){var t=e.split(/\(|\)/g)[1].split(",");return[t[0].trim(),t[1].trim()]}return e}(e)})),o=r.length,"none"===e&&(o=this.getProps("maxTracks")),t=0;t<o;t++)i=n[t]&&n[t].replace(/\[|\]/g,"").split(" ").filter((function(e){return e.length})).map((function(e){return e.trim()}))||[t+1+""],a=n[t+1]&&n[t+1].replace(/\[|\]/g,"").split(" ").filter((function(e){return e.length})).map((function(e){return e.trim()}))||[t+2+""],s.push({start:t+1,end:t+2,size:r[t]||"auto"}),h[t+1]=i,h[t+2]=a,i.forEach((function(e){return c[e]=t+1})),a.forEach((function(e){return c[e]=t+2})),c[t+1]=t+1,c[t+2]=t+2;return{tracks:s,nameToLineMap:c,lineToNameMap:h}},t._sanitizeItems=function(e){var t,o,n,r,i,a,l,s=e||this.props.domTree,c=s.children||[],d=this._config.mapping,g=s.style.gridAutoFlow||"row",u=Object.keys(d.row.lineToNameMap).length,p=Object.keys(d.col.lineToNameMap).length,f=[],m=[],b=[[]],k=[];for(i=1;i<=u;i++)b.push([]);for(i=0,l=c.length;i<l;i++)t=y(c[i].style,d),f.push(h({},c[i],{rowStart:d.row.nameToLineMap[t.gridRowStart],rowEnd:d.row.nameToLineMap[t.gridRowEnd],colStart:d.col.nameToLineMap[t.gridColumnStart],colEnd:d.col.nameToLineMap[t.gridColumnEnd]})),n=f[i],v(b,{x:n.rowStart,y:n.colStart},{x:n.rowEnd,y:n.colEnd});if((m=f.filter((function(e){return!e.colStart||!e.rowStart})))&&"row"===g){for(i=1;i<u;i++)for(a=1;a<p;a++)b[i][a]||k.push({row:i,col:a});for(;m.length&&k.length;)n=m.shift(),o=k.shift(),n.rowStart=o.row,n.colStart=o.col,n.rowEnd=o.row+1,n.colEnd=o.col+1;if(r=Math.ceil(m.length/p)){for(;r--;)s.style.gridTemplateRows+="auto ",d.row.nameToLineMap[u+1]=u+1,d.row.nameToLineMap[u+2]=u+2,u++,b.push([]);for(s.style.gridTemplateRows=s.style.gridTemplateRows.trim(),k=[],i=1;i<=u;i++)for(a=1;a<=p;a++)b[i][a]||k.push({row:i,col:a});for(;m.length;)n=m.shift(),o=k.shift(),n.rowStart=o.row,n.colStart=o.col,n.rowEnd=o.row+1,n.colEnd=o.col+1}}return this._config.sanitizedItems=f,this},t._inflateTracks=function(){var e,t=this._config,o=t.sanitizedItems,n=t.colTracks,r=t.rowTracks,i=0,l=0,s=this.props.domTree,c=s.style||{},h=c.paddingStart,d=c.paddingEnd,g=c.paddingTop,u=c.paddingBottom,p=c.width,f=c.height,m=new a.default;return isNaN(+p)||(p-=h+d),e=m.clear().set("tracks",n).set("items",b(o,"width")).set("containerSize",p||"auto").resolveTracks(),n.forEach((function(t,o){t.calculatedStyle=e[o],l+=e[o].baseSize||0})),this._solveUnresolvedChildren(),isNaN(+f)||(f-=g+u),e=m.clear().set("tracks",r).set("items",b(o,"height")).set("containerSize",f||"auto").resolveTracks(),r.forEach((function(t,o){t.calculatedStyle=e[o],i+=e[o].baseSize||0})),s.style.minHeightContribution=i,s.style.minWidthContribution=l,this},t._solveUnresolvedChildren=function(e){var t,o,n,r,i,a,l,c,h=((e||this.props.domTree).unResolvedChildren||[]).filter((function(e){return/repeat\(/g.test(e.style.gridTemplateColumns)||/repeat\(/g.test(e.style.gridTemplateRows)})),d=this._config,g=d.colTracks,u=d.mapping,p=this.getProps("parent"),f=[0];if(!h.length)return this;for(o=1,n=g.length;o<n;o++)f[o]=f[o-1]+g[o].calculatedStyle.baseSize;return h.forEach((function(e){a=m(e.style.gridTemplateColumns)[1],l=u.col.nameToLineMap[e.style.gridColumnStart],c=u.col.nameToLineMap[e.style.gridColumnEnd],r=f[c-1]-f[l-1],i={itemWidth:a,width:r},t=(0,s.repeatResolver)(e,i),e.style.gridTemplateColumns=t.gridTemplateColumns,e.style.gridTemplateRows=t.gridTemplateRows,p.gridLayoutEngine(e)})),this},t._assignCoordinatesToCells=function(e){var t,o,n,r,a,s,c,h,d,g=e||this.props.domTree,u=this._config,p=u.sanitizedItems,f=u.rowTracks,m=u.colTracks,b=g.style,v=b.justifyItems,y=b.alignItems,k=b.paddingStart,C=b.paddingTop,w=[k],x=[C];for(n=1,o=f.length;n<o;n++)w[n]=w[n-1]+f[n].calculatedStyle.baseSize;for(n=1,o=m.length;n<o;n++)x[n]=x[n-1]+m[n].calculatedStyle.baseSize;return g.layout={x:0,y:0,width:isNaN(g.style.width)?x[x.length-1]:g.style.width,height:isNaN(g.style.height)?w[w.length-1]:g.style.height},(g.children||[]).forEach((function(e,o){switch(t=p[o],r=x[t.colEnd-1]-x[t.colStart-1],a=w[t.rowEnd-1]-w[t.rowStart-1],s=isNaN(+e.style.width)?r:+e.style.width,c=isNaN(+e.style.height)?a:+e.style.height,v||e.style.justifySelf){case l.CENTER:h=x[t.colStart-1]+r/2-s/2;break;case l.END:h=x[t.colEnd-1]-s;break;case l.STRETCH:s=r,h=x[t.colStart-1];break;default:h=x[t.colStart-1]}switch(y||e.style.alignSelf){case l.CENTER:d=w[t.rowStart-1]+a/2-c/2;break;case l.END:d=w[t.rowEnd-1]-c;break;case l.STRETCH:c=a,d=w[t.rowStart-1];break;default:d=w[t.rowStart-1]}h+=(0,i.pluckNumber)(t.style.paddingStart,t.style.padding,0),d+=(0,i.pluckNumber)(t.style.paddingTop,t.style.padding,0),e.layout={x:h,y:d,x2:h+s,y2:d+c,width:s,height:c}})),this},e}(),C=function(e,t){void 0===e&&(e="");var o=(e.match(u)||[]).filter((function(e){return e&&!!e.trim()})),n="",r=1;return o.length&&!/repeat\(/.test(e)?o.forEach((function(e){d.indexOf(e)>-1||/[0-9]fr/.test(e)||g.test(e)||!isNaN(e)?(n+=t[r].calculatedStyle.baseSize+" ",r++):n+=e+" "})):t.forEach((function(e){isNaN(e.calculatedStyle.baseSize)||(n+=e.calculatedStyle.baseSize+" ")})),n.trim()}},258:function(e,t,o){"use strict";var n=o(11);t.__esModule=!0,t.default=void 0;var r=n(o(16));function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){(0,r.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var l=function(e){return+e.replace(/fr/,"")},s=function(){function e(e,t,o){return void 0===e&&(e=[]),void 0===t&&(t=[]),void 0===o&&(o=600),this.clear(),this.set("tracks",e),this.set("items",t),this.set("containerSize",o),this}var t=e.prototype;return t.set=function(e,t){switch(this.props[e]=t,e){case"tracks":this._initTrackSize();break;case"items":this._initItems();break;case"containerSize":this.props[e]=isNaN(+t)?0:+t}return this},t.get=function(e){return this.props[e]},t._initTrackSize=function(e){var t,o,n,r,i,s,c,h=e||this.props.tracks||[],d=this._config,g=[{}];for(d.frTracks=[],d.intrinsicTracks=[],t=1,o=h.length;t<o;t++)n=h[t].size,i=1,Array.isArray(n)?(s=+n[0]||0,n[1].indexOf("fr")>0||n[0].indexOf("fr")>0?(c=1/0,d.frTracks.push(t),r="minmax"):"auto"===n[1]||"auto"===n[0]?(c=1/0,d.intrinsicTracks.push(t),r="minmax"):isNaN(+n[0])||isNaN(+n[1])||(c=Math.max(+n[0],+n[1]),s=Math.min(+n[0],+n[1]),d.intrinsicTracks.push(t),r="minmax")):isNaN(+n)?n.indexOf("fr")>0?(s=0,c=1/0,d.frTracks.push(t),r="flex",i=l(n)):(s=0,c=1/0,r="intrinsic",d.intrinsicTracks.push(t)):(s=c=+n,r="fixed"),g.push(a({},h[t],{type:r,multiplier:i,baseSize:s,growthLimit:c}));return d.sanitizedTracks=g},t._initItems=function(e){var t,o,n,r,i=e||this.props.items||[],l=this._config,s=[],c=0;for(n=0,r=i.length;n<r;n++)isNaN(i[n].start)||isNaN(i[n].end)?l.autoFlow.push(i[n]):(s.push(a({},i[n])),o=s[c],c++,o.size=isNaN(o.size)?this._getParentSize(o):+o.size);for(s.sort((function(e,t){var o=e.end-e.start,n=t.end-t.start;return o===n?e.start-t.start:o-n})),n=0,t=r=s.length;n<r;n++)if(s[n].end-s[n].start>1){t=n;break}return this._config.nonSpanningItemStartIndex=t,this._config.sanitizedItems=s},t._getParentSize=function(e){var t=this._config.sanitizedTracks,o=0;return t.filter((function(t){return t.start>=e.start&&t.end<=e.end})).forEach((function(e){return o+=e.baseSize})),o||0},t.resolveTracks=function(){return this._placeNonSpanningItems()._placeSpanningItems()._distributeFreeSpace(),this._config.sanitizedTracks},t._placeNonSpanningItems=function(){var e,t,o=this._config,n=o.sanitizedItems,r=o.sanitizedTracks,i=o.nonSpanningItemStartIndex;return n.slice(0,i).forEach((function(o){t=o.start,"fixed"!==(e=r[t]).type&&(e.baseSize=Math.max(e.baseSize,o.size),e.growthLimit=Math.max(e.growthLimit,e.baseSize))})),this},t._placeSpanningItems=function(){var e,t,o,n,r,i,a,l=this._config,s=l.sanitizedItems,c=l.sanitizedTracks,h=l.nonSpanningItemStartIndex,d=l.frTracks,g=s.slice(h),u=[0];if(!g.length)return this;for(i=1,a=c.length;i<a;i++)u[i]=u[i-1]+(c[i].baseSize||0);return g.forEach((function(a){if(e=u[a.end-1]-u[a.start-1],t=Math.max(0,a.size-e)){for(i=a.start,r=!1,n=0;i<a.end;i++)d.indexOf(i)>=0&&(r=!0),"fixed"!==c[i].type&&n++;if(n&&!r)for(o=t/n,i=a.start;i<a.end;i++)"fixed"!==c[i].type&&(c[i].baseSize+=o)}})),this},t._distributeFreeSpace=function(){var e=this._config,t=e.frTracks,o=e.intrinsicTracks,n=e.sanitizedTracks,r=this.props.containerSize,i=0;return n.forEach((function(e){return i+=e.baseSize||0})),i<r&&(t.length?(t.forEach((function(e,o){t[o]=n[e]})),t.forEach((function(e){return i-=e.baseSize})),function e(t,o,n){var r,i,a=0;if(t.length){if(t.forEach((function(e){return a+=e.multiplier})),r=(n-o)/a,(i=t.filter((function(e){return e.baseSize<=e.multiplier*r}))).length<t.length)return t.filter((function(e){return e.baseSize>e.multiplier*r})).forEach((function(e){return o+=e.baseSize})),e(i,o,n);i.forEach((function(e){return e.baseSize=e.multiplier*r}))}}(t,i,r)):o.length&&(o.forEach((function(e,t){o[t]=n[e]})),function(e,t,o){var n,r,i,a,l,s,c,h=0;if(e.length){for(n=o-t,(l=e.filter((function(e){return"minmax"===e.type&&e.growthLimit!==1/0}))).sort((function(e,t){return e.growthLimit-e.baseSize-(t.growthLimit-t.baseSize)})),a=l.length;h<a&&n;)for(r=n/(l.length-h||1),i=0,a=l.length;i<a;i++)s=l[i].growthLimit,n-=(c=Math.min(r+l[i].baseSize,s))-l[i].baseSize,l[i].baseSize=c,s!==c||l[i].frozen||(l[i].frozen=!0,h++);e=e.filter((function(e){return"minmax"===e.type&&e.growthLimit===1/0||"minmax"!==e.type})),r=n/e.length,e.forEach((function(e){return e.baseSize+=r}))}}(o,i,r))),this},t.clear=function(){return this.props={},this._config={frTracks:[],intrinsicTracks:[],autoFlow:[]},this},e}();t.default=s},259:function(e,t,o){"use strict";t.__esModule=!0,t.repeatResolver=function(e,t){var o,n,r,i=e.children,a=0,l=0,s="",c="",h=0,d=t.itemWidth,g=t.width;for(g=isNaN(+g)?0:+g,i.forEach((function(e){return h=Math.max(h,+e.style.height||0)})),a+=d=+d,s+=d+" ",l=1,n=1,r=i.length;n<r&&!(a+d>g);n++)a+=d,s+=d+" ";for(l=n,o=Math.ceil(r/l);o--;)c+=h+" ";return{gridTemplateColumns:s.trim(),gridTemplateRows:c.trim()}}},260:function(e,t,o){"use strict";var n=o(11);t.__esModule=!0,t.default=function(e){var t,o=e.getFromEnv("dataSource"),n=o.data||{},s=o.markers;(0,r.componentFactory)(e,l.default,"mapGroup"),t=e.getChildren("mapGroup")[0],(0,r.datasetFactory)(t,i.default,"entities",1,[n]),s?(0,r.datasetFactory)(t,a.default,"markers",1,[s]):e.getDatasets()[1]&&e.getDatasets()[1].remove()};var r=o(2),i=n(o(247)),a=n(o(262)),l=n(o(264))},261:function(e,t,o){"use strict";t.__esModule=!0,t.default=function(e){var t,o,n,r=window.parseFloat,i=e._createNode,a=e._setFillAndStroke,l=e.el.constructor,s={Q:"L",Z:"X",q:"l",z:"x",",":" "},c=/,?([achlmqrstvxz]),?/gi,h=function(){return this.join(",").replace(c,t)};e.svg?(t="$1",o=function(){var o=this,n=e.is(arguments[0],"array")?arguments[0]:Array.prototype.slice.call(arguments);n?"string"==typeof n?n=n.replace(c,t):n.toString=h:n="M0,0",o.node.setAttribute("d",n.toString())},e._engine.litepath=function(t,o,n,r,s){var c,h=i("path");return(r||o).canvas.appendChild(h),(c=new l(h,o,r)).type="litepath",c.id=h.raphaelid=e._oid++,h.raphael=!0,a(c,s||{fill:"none",stroke:"#000"}),c},e._getPath.litepath=function(t){return e.parsePathString(t.node.getAttribute("d"))}):e.vml&&(t=function(e,t){return s[t]||t},n=function(){var e=this;return e._transform.apply(e,arguments),e._.bcoord&&(e.node.coordsize=e._.bcoord),e},o=function(e){var o=e;return o?"string"==typeof o?o=o.replace(c,t):o.toString=h:o="M0,0",this.node.path=o,this},e._engine.litepath=function(t,o,a,s,c){var h,d=i("shape"),g=d.style,u=new l(d,o,s),p=c||{fill:"none",stroke:"#000"},f=a;return g.cssText="position:absolute;left:0;top:0;width:21600px;height:21600px;",f=r(f),isNaN(f)?d.coordsize="21600 21600":(u._.bzoom=f,g.width="1px",g.height="1px",d.coordsize=u._.bcoord=f+" "+f),d.coordorigin=o.coordorigin,u.type="litepath",u.id=d.raphaelid=e._oid++,d.raphael=!0,u._transform=u.transform,u.transform=n,e._setFillAndStroke(u,p),(s||o).canvas.appendChild(d),(h=i("skew")).on=!0,d.appendChild(h),u.skew=h,u},e._getPath.litepath=function(t){return e.parsePathString(t.node.path||"")});e.fn.litepath=function(t,n,r){var i,a,s,c=t,h=n,d=r;return"object"==typeof c&&c.constructor!==l&&(i=c,a=(c=c.litepath).zoom,d=c.group),h&&h.constructor===l?(d=h,a=void 0):a=h,c&&c.constructor===l&&(d=c,c=""),(s=e._engine.litepath(c,this,a,d,i)).ca.litepath=o,c&&s.attr("litepath",e.is(c,"array")?[c]:c),this.__set__&&this.__set__.push(s),this._elementsById[s.id]=s}}},262:function(e,t,o){"use strict";var n=o(11);t.__esModule=!0,t.default=void 0;var r,i=n(o(3)),a=n(o(247)),l=n(o(263)),s=n(o(94)),c=o(5),h=n(o(244)),d=o(2),g=o(7),u=o(8),p=window.Math,f=p.min,m=p.max,b=function(e){var t,o=this.getFromEnv("chart"),n=this.getChildren("mapAnnotations")[0],i=e.markerShape,a=i.groupConfig,l=i.data("unfilteredConfig"),s=l._markerEventArgs,c=e.config;l.hovereffect&&("circle"===i.config.type&&(t=(0,d.extend2)({fillcolor:l.hoverfillcolor,fillalpha:l.hoverfillalpha,fillangle:l.hoverfillangle,fillratio:l.hoverfillratio,gradientUnits:"objectBoundingBox",radialGradient:1},l._hoverattrs)),t=(0,d.extend2)({},l._hoverattrs),n.update(i.getId(),t)),s||(s=l._markerEventArgs={x:+l.x,y:+l.y,scaledX:l.x*a.scaleX,scaledY:l.y*a.scaleY,chartX:l.x*a.scaleX+a.grpXShift,chartY:l.y*a.scaleY+a.grpYShift,id:l.id,label:l.label}),(0,g.raiseEventGroup)(c.options.id,"markerRollOver",s,o.getFromEnv("chartInstance"),c,r,r,r)},v=function(e){var t,o=this.getFromEnv("chart"),n=this.getChildren("mapAnnotations")[0],i=e.markerShape,a=i.getElement(),l=e.config,s=i.data("unfilteredConfig");a&&s.hovereffect&&("circle"===i.config.type&&(t=(0,d.extend2)({fillcolor:i.config.rawColor,fillalpha:i.config.rawAlpha,fillangle:i.config.rawAngle,fillratio:i.config.rawRatio,gradientUnits:"objectBoundingBox",radialGradient:"radial"===i.config.rawFillPattern},s._defaultattrs)),t=(0,d.extend2)({},s._defaultattrs),n.update(i.getId(),t)),(0,g.raiseEventGroup)(l.id,"markerRollOut",s._markerEventArgs,o.getFromEnv("chartInstance"),r,r,r)},y=function(e,t){var o=t.config.options,n=this.getFromEnv("chart"),r=t.markerShape,i=r.config,a=r.groupConfig,l=this.getFromEnv("linkClickFN"),s=r.config.link,c=i._markerEventArgs;s&&l&&l.call({link:s},!0),c||(c=i._markerEventArgs={x:+i.x,y:+i.y,scaledX:i.x*a.scaleX,scaledY:i.y*a.scaleY,chartX:i.x*a.scaleX+a.grpXShift,chartY:i.y*a.scaleY+a.grpYShift,id:o.id,label:o.label}),n.fireChartInstanceEvent("markerClick",c,e)},k=function(e,t){var o,n=e&&e.length||!1,i=t||"id",a={};if(!e)return e;for(;n--;)(o=e[n])[i]!==r&&(a[o[i].toLowerCase()]=o);return a},C=function(e,t,o){return{x:e.toString(),y:(t-o).toString(),align:"center",valign:"top"}},w=function(e,t,o){return{x:(e-o).toString(),y:t.toString(),align:"right",valign:"middle"}},x=function(e,t,o){return{x:(e+o).toString(),y:t.toString(),align:"left",valign:"middle"}},S=function(e,t,o){return{x:e.toString(),y:(t+o).toString(),align:"center",valign:"bottom"}},L=function(e,t){return{x:e.toString(),y:t.toString(),align:"center",valign:"middle"}},T=function(){return arguments[1]},F=function(e,t){return e-t},E=function(e,t){return 2*f(t,e-t)},N=function(){return arguments[1]},_=function(e,t){return 2*f(t,e-t)},A=function(e,t){return e-t};(0,c.addDep)({name:"mapsAnimation",type:"animationRule",extension:h.default});var I=function(e){function t(){var t;return(t=e.call(this)||this).components={},t.getLabelAlignment={top:C,left:w,right:x,bottom:S,center:L},t.getWrapWidth={right:T,left:F,center:E},t.getWrapHeight={top:N,middle:_,bottom:A},t.hoverFn=b,t.hoverOutFn=v,t.clickFn=y,t}(0,i.default)(t,e);var o=t.prototype;return o.getName=function(){return"markers"},o.getType=function(){return"dataset"},o.configureAttributes=function(e){if(e){this.JSONData=e;var t,o=this.getChildren("mapAnnotations")&&this.getChildren("mapAnnotations")[0],n=this.getFromEnv("chart").config.markerOpts;o||(t=new s.default,this.attachChild(t,"mapAnnotations"),o=this.getChildren("mapAnnotations")[0]),o.destroy(),this.calculateDataLimits(),n.dataEnabled?this._parseMarkers():this.defineMarkersNShapes(),this.configureConnectors()}},o.calculateMarkerRadiusLimits=function(){if(this.JSONData){var e=this.JSONData,o=this.config,n=this.getFromEnv("chart"),r=n.config.width,i=n.config.height,a=e.markermaxradius,l=e.markerminradius,s=t.getMarkerRadiusLimits(r,i,a,l);o.minRadius=s.min,o.maxRadius=s.max}},o.calculateDataLimits=function(){var e,t,o,n,r=this.getFromEnv("chart"),i=this.config,a=(r.jsonData.markers||{}).items||[],l=this.getFromEnv("number-formatter"),s=1/0,c=-1/0;for(n=0,t=a.length;n<t;n++)o=a[n].value,null!==(e=l.getCleanValue(o))&&(s=f(e,s),c=m(e,c));i.min=s,i.max=c},o._parseMarkers=function(){var e,o,n,i,a,l,s,c,h=this.getFromEnv("chart"),g=h.jsonData.markers,u=g.items,p=g.shapes,f=h.config.markerOpts,m=f.dataLabels.style,b=this.getFromEnv("number-formatter"),v=this.components.shapeObjs={},y=this.components.markerObjs={};if(u&&u.length){if(p&&p.length)for(o=p.length;o;o-=1)(c=(i=p[o-1]).id.toLowerCase())&&(v[c]=i);for(o=u.length;o--;)(c=(i=u[o]).id&&i.id.toLowerCase())&&((e=i.value)!==r&&""!==e&&(e=parseFloat(e)),(a=(n=t._initializeMarkerItem(c,i,null,h)).config.options.shapeid)&&"string"==typeof a&&(a=a.toLowerCase()),s=(l=n.config).options,l.cleanValue=b.getCleanValue(e),null!==l.cleanValue?l.formattedValue=b.dataLabels(e):l.formattedValue=r,l.fillColor=(0,d.pluck)(s.fillcolor,s.color,f.fillColor),l.fillAlpha=(0,d.pluck)(s.fillalpha,s.alpha,f.fillAlpha),l.fillRatio=(0,d.pluck)(s.fillratio,f.fillRatio),l.fillAngle=(0,d.pluck)(s.fillangle,f.fillAngle),l.borderThickness=(0,d.pluckNumber)(s.borderthickness,f.borderThickness),l.borderColor=(0,d.pluck)(s.bordercolor,f.borderColor),l.borderAlpha=(0,d.pluck)(s.borderalpha,f.borderAlpha),l.labelPadding=s.labelpadding||f.labelPadding,l.fontColor=(0,d.pluck)(s.labelcolor,m.fontColor),l.labelBgColor=(0,d.pluck)(s.labelbgcolor,m.labelBgColor)||"",l.labelBorderColor=(0,d.pluck)(s.labelbordercolor,m.labelBorderColor)||"",i.__hideMarker&&(n._isHidden=!0),a&&(n.shapeObj=v[a]),y[c]=n)}},o.defineMarkersNShapes=function(){var e,o,n,i,a,l,s,c,h=this.getFromEnv("chart"),g=h.jsonData.markers,u=g.definition,p=this.getFromEnv("number-formatter"),f=h.config.markerOpts,m=f.dataLabels.style,b=k(u)||{},v=k(g.application)||{},y=g.shapes,C=this.components.shapeObjs=this.components.shapeObjs||(this.components.shapeObjs={}),w=this.components.markerObjs=this.components.markerObjs||(this.components.markerObjs={}),x={},S={};if(u&&u.length){for(i in C)x[i]=!1;for(i in w)S[i]=!1;if(y&&y.length)for(i=y.length;i;i-=1)(c=(l=y[i-1]).id.toLowerCase())&&(C[c]=l,x[c]=!0);for(c in b)l=b[c],a=w[c]=t._initializeMarkerItem(c,l,v[c],h),S[c]=!0,s=a.config.options.shapeid,o=a.config,n=l.value,o.cleanValue=p.getCleanValue(n),e=o.options,null!==o.cleanValue?o.formattedValue=p.dataLabels(n):o.formattedValue=r,o.fillColor=(0,d.pluck)(e.fillcolor,e.color,f.fillColor),o.fontColor=(0,d.pluck)(e.labelcolor,m.fontColor),o.fillAlpha=(0,d.pluck)(e.fillalpha,e.alpha,f.fillAlpha),o.fillRatio=(0,d.pluck)(e.fillratio,f.fillRatio),o.fillAngle=(0,d.pluck)(e.fillangle,f.fillAngle),o.borderThickness=(0,d.pluckNumber)(e.borderthickness,f.borderThickness),o.borderColor=(0,d.pluck)(e.bordercolor,f.borderColor),o.borderAlpha=(0,d.pluck)(e.borderalpha,f.borderAlpha),o.labelPadding=e.labelpadding||f.labelPadding,o.options.tooltext=(0,d.pluck)(e.tooltext,f.tooltext),o.link=e.link,s&&(a.shapeObj=C[s.toLowerCase()]);for(i in x)x[i]||delete C[i];for(i in w)S[i]||delete w[i]}},t.getMarkerRadiusLimits=function(e,t,o,n){var r,i,a=f(e,t),l=.02*a,s=.07*a;return r=parseFloat(n),i=parseFloat(o),isNaN(r)||isNaN(i)?isNaN(r)?isNaN(i)?{min:l,max:s}:{min:parseInt(i/10,10),max:i}:{min:r,max:10*r}:r<i?{min:r,max:i}:{min:i,max:r}},o.getDataLimits=function(){var e=this.config;return{min:e.min,max:e.max}},t._initializeMarkerItem=function(e,t,o){var n,r={},i=r.config;return i||(i=r.config={}),i.id=e,i.definition=t,i.application=o,i.hasValue=null,i.value=null,i.options=null,i.label=null,i.markerShape=null,i.markerLabel=null,i.drawOptions={shape:null,label:null},i.drawComplete=!1,n=r.config.options=(0,d.extend2)({},i.definition),i.dataEnabled?isNaN(n.value)||""===n.value||(r.value=parseFloat(n.value),r.hasValue=!0):(i.applyAll||o)&&(i.options=(0,d.extend2)(n,i.application)),r},o.configureConnectors=function(){var e,t,o,n,r,i,a,l,s,c,h,g,u,p,f=this.getFromEnv("chart"),m=this.getChildren("mapAnnotations")[0],b=f.jsonData,v=this.components,y=b.markers||{},k=y.connector||y.connectors||[],C=v.markerObjs,w=k.length,x=this.components.connectors,S=function(e){return function(t){var o=this.data("unfilteredConfig");o.hoverEffect&&m.update(this.getId(),o._hoverAttrs),f.fireChartInstanceEvent("connectorrollover",e,t)}},L=function(e){return function(t){var o=this.data("unfilteredConfig");o.hoverEffect&&m.update(this.getId(),o._defaultAttrs),f.fireChartInstanceEvent("connectorrollout",e,t)}},T=function(e){return function(t){f.fireChartInstanceEvent("connectorClick",e,t)}},F=f.config.connectorOpts,E={};for(x=this.components.connectors=[],p=0;p<w;p++)((u=k[p]).from||u.to)&&(t=C[u.from.toLowerCase()],o=C[u.to.toLowerCase()],t&&o&&(n=k[p].label,!(E=x[p])&&(E=x[p]={}),!E.config&&(e=E.config={}),!E.graphics&&(E.graphics={}),(e=E.config=(0,d.extend2)({},u)).fromMarker=t,e.toMarker=o,e.link=u.link,e.showTooltip=(0,d.pluckNumber)(u.showtooltip,F.showTooltip),r=e.tooltext=e.showTooltip?(0,d.pluck)(u.tooltext,F.tooltext):"",i=e.thickness=(0,d.pluck)(u.thickness,F.thickness),a=e.color=(0,d.pluck)(u.color,F.color),l=e.alpha=(0,d.pluck)(u.alpha,F.alpha),e.hoverEffect=(0,d.pluckNumber)(u.showhovereffect,F.showHoverEffect),s=(0,d.pluck)(u.hovercolor,F.hoverColor,a),c=(0,d.pluck)(u.hoveralpha,F.hoverAlpha,l),h=(0,d.pluck)(u.hoverthickness,F.hoverThickness,i),e.dashed=(0,d.pluck)(u.dashed,F.dashed),e.dashLen=(0,d.pluckNumber)(u.dashlen,F.dashlen),e.dashGap=(0,d.pluckNumber)(u.dashgap,F.dashgap),r&&(e.tooltext=r=(0,d.parseUnsafeString)((0,d.parseTooltext)(r,[3,40,41,42,43],{label:n,fromId:t.config.definition.id,toId:o.config.definition.id,fromLabel:t.config.definition.label,toLabel:o.config.definition.label},void 0),!1)),e.eventArgs={fromMarkerId:t.config.id,toMarkerId:o.config.id,label:n},e._hoverAttrs={color:s,alpha:c,thickness:h},e._defaultAttrs={color:a,alpha:l,thickness:i},e.type="line",e.onclick=T(e.eventArgs),e.onmouseover=S(e.eventArgs),e.onmouseout=L(e.eventArgs),n&&(!(g=E.labelConfig)&&(g=E.labelConfig={}),g.type="text",g.text=n,g.align="center",g.valign="middle",g.font=F.font,g.fillcolor=(0,d.pluck)(u.labelcolor,F.fontColor),g.bgcolor=(0,d.pluck)(u.labelbgcolor,F.labelBgColor),g.bordercolor=(0,d.pluck)(u.labelbordercolor,F.labelBorderColor),g.tooltext=e.tooltext)))},o.draw=function(){var e,t,o,n,r,i,a,l,s=this.getFromEnv("chart"),c=this.config,h=this.getChildren("mapAnnotations")[0],d=this.components.markerObjs,g=s.config,p=g.markerOpts,f=g.scalingParams,m=s.config.annotationConfig,b=[],v=[],y={},k={};for(r in h.destroy(),this.createContainer(),this._drawConnectors(),this.imageLoadCount=0,this.imageCount=0,c.autoScale=p.autoScale?f.sFactor:1,d)e=null,(n=(t=d[r]).config).conIsHidden||(e=this._drawMarkerItem(t)),e&&(k[r]=e,n._annotationIndex=b.length,y[r]=t,e.markerShape&&(o=Object.assign({align:"center",valign:"middle",animationLabel:"markerItem",autoscale:"image"===e.markerShape.type?0:1},e.markerShape),b.push(o)),e.markerLabel&&(o=Object.assign({animationLabel:"markerItem",id:e.markerShape.id},e.markerLabel),v.push(o)));for(r in l=h.addGroup(Object.assign(m,{id:"markers",fillalpha:"100",items:b,scaleimages:1}),this),a=h.addGroup(Object.assign(m,{id:"markerLabels",items:v,scaleimages:1}),this),this.components.markerGroup=l,this.components.markerLabelGroup=a,i=0,d)k[r]&&((t=d[r]).markerShape=l.retrieveItem(b[i].id),t.markerShape.data("unfilteredConfig",b[i]),k[r].markerLabel&&(t.markerLabel=a.retrieveItem(b[i].id),t.markerLabel.data("unfilteredConfig",v[i])),i++);this.addJob("buildKdtree",this._buildKdTree.bind(this),u.priorityList.kdTree)},o._buildKdTree=function(){var e,t,o=this.components.kdArrayMap,n=this.components.markerGroup,r=[],i=n&&n.items,a=i&&i.length||0;for(t=0;t<a;t++)o[e=i[t].config.id]&&r.push(o[e]);this.components.kDTree||(this.components.kDTree=new l.default(!0)),this.components.kDTree._setSearchLimit(1/0,1/0),this.components.kDTree.buildKdTree(r)},o._drawMarkerItem=function(e){var t,o,n,i,a,l,s,c,h,g,u,p,f,m,b,v,y,k,C=this,w=C.getFromEnv("chart"),x=w.config,S=C.config,L=x.scalingParams,T=e.config,F=T.options,E=T.definition,N=x.markerOpts,_=N.dataLabels.style,A=F.shapeid,I=F.scale||1,P=F.label||"",O=w.config.scalingParams.scaleFactor*w.config.baseScaleFactor,M=(F.labelpos||"top").toLowerCase(),R=T.formattedValue===r?r:T.formattedValue,B=F.tooltext||N.tooltext,D=(0,d.pluckNumber)(E.radius,T.radius,N.radius)*I*S.autoScale||1e-4,G=T.fillColor,V=T.fillAlpha,z=T.fillRatio,H=T.fillAngle,j=T.borderThickness,W=T.borderColor,Y=T.borderAlpha,X=C.getChildren("mapAnnotations")[0],K=C.components.kdArrayMap||(C.components.kdArrayMap={}),U=e.config.id;if(T.autoScale=N.autoScale?O:1,A)return B=B?(0,d.parseUnsafeString)((0,d.parseTooltext)(B,[1,2,3],{formattedValue:R,label:P},F),!1):R?P+N.tooltipSepChar+R:P,R!==r&&null!==R?P=P+N.labelSepChar+R:isNaN(I)?I=1:I<0?I=0:I>5&&(I=5),(0,d.extend2)(F,{x:F.x&&F.x.toString(),y:F.y&&F.y.toString(),fillcolor:G,fillalpha:V,fillratio:z,fillangle:H,borderthickness:j,bordercolor:W,borderalpha:Y,hovereffect:(0,d.pluck)(N.showHoverEffect),radius:D&&D.toString(),link:F.link,showshadow:(0,d.pluckNumber)(F.showshadow,T.shadow),_markerLabel:P,_markerId:F.id,id:(F.id+"").toLowerCase()}),delete F.tooltext,T.tooltext=!!N.showTooltip&&B,f=Number(F.x)*L.sFactor+L.translateX,m=Number(F.y)*L.sFactor+L.translateY,D=F.radius,"triangle"===A?((0,d.extend2)(F,{type:"polygon",sides:3,startangle:N.startAngle}),k="polygon",y=3):"diamond"===A?((0,d.extend2)(F,{type:"polygon",sides:4,startangle:N.startAngle}),k="polygon",y=4):"arc"===A?(v=.6*D,(0,d.extend2)(F,{type:"arc",startangle:0,endangle:360,innerradius:v}),k="arc"):"circle"===A?(F.type="circle",k="circle"):(u=C.getShapeArgs.call(e),N.dataEnabled&&N.valueToRadius&&F.radius!==r?delete u.radius:(!u.radius&&(u.radius=N.radius),u.radius*=I*T.autoScale),(0,d.extend2)(F,u),F.id=F._markerId&&F._markerId.toLowerCase(),v=u.innerradius,u.radius&&(D=u.radius),k=u.type&&u.type.toLowerCase(),y=u.sides,(D=Number(D))&&v&&D<v&&(p=D,F.radius=D=v,F.innerradius=v=p)),F.type=F.type&&F.type.toLowerCase(),(0,d.extend2)(F,{hoverfillcolor:(0,d.pluck)(F.fillhovercolor,N.hoverFillColor,F.fillcolor),hoverfillalpha:(0,d.pluck)(F.fillhoveralpha,N.hoverFillAlpha,F.fillalpha),hoverfillratio:(0,d.pluck)(F.fillhoverratio,N.hoverFillRatio,F.fillratio),hoverfillangle:(0,d.pluck)(F.fillhoverangle,N.hoverFillAngle,F.fillangle),hoverborderthickness:(0,d.pluckNumber)(F.borderhoverthickness,N.hoverBorderThickness,F.borderthickness),hoverbordercolor:(0,d.pluck)(F.borderhovercolor,N.hoverBorderColor,F.bordercolor),hoverborderalpha:(0,d.pluck)(F.borderhoveralpha,N.hoverBorderAlpha,F.borderalpha)}),F._hoverattrs={fillalpha:F.hoverfillalpha,fillcolor:F.hoverfillcolor,fillangle:F.hoverfillangle,fillratio:F.hoverfillratio,borderThickness:"0"!==F.showborder?F.hoverborderthickness:0,borderColor:F.hoverbordercolor,borderAlpha:F.hoverborderalpha},F._defaultattrs={fillalpha:F.fillalpha,fillcolor:F.fillcolor,fillangle:F.fillangle,fillratio:F.fillratio,borderThickness:"0"!==F.showborder?F.borderthickness:0,borderColor:F.bordercolor,borderAlpha:F.borderalpha},"image"===F.type?(F.borderthickness=F.borderthickness||0,F.onload=function(t){var o=t.width,n=t.height;b={},F=this.config,f=(Number(F.derivedX)-o/(2*L.sFactor))*L.sFactor,m=(Number(F.derivedY)-n/(2*L.sFactor))*L.sFactor,(b=K[U]||(K[U]={})).x=f+L.translateX,b.y=m+L.translateY,b.element=e,b.shapeInfo={type:"rect",width:o,height:n},o&&n&&X.update(this.getId(),{x:f,y:m,width:o,height:n,autoscale:0}),C.imageLoadCount++,C.imageLoadCount===C.imageCount&&C._buildKdTree()},F.onerror=function(){C.imageLoadCount++,C.imageLoadCount===C.imageCount&&C._buildKdTree()},C.imageCount++):((b=K[U]||(K[U]={})).x=f,b.y=m,b.element=e,b.shapeInfo={type:k,sides:y,radius:Number(D)+F.borderthickness/2,innerradius:v}),T.drawOptions.shape=F,N.showLabels?(g=F.labelpadding||N.labelPadding,o=(t=C._getLabelOptions(M,g,F)).align,n=t.valign,i=T._labelBaseWidth,a=T._labelBaseHeight,l=T._labelXOffset,s=T._labelYOffset,(c=N.labelWrapWidth?N.labelWrapWidth:C.getWrapWidth[o](i,Number(t.x)+l))>g&&(c-=g),(h=N.labelWrapHeight?N.labelWrapHeight:C.getWrapHeight[n](a,Number(t.y)+s))>g&&(h-=g),T.drawOptions.label=(0,d.extend2)({type:"text"},{text:P,tooltext:F.tooltext,x:t.x,y:t.y,align:o,valign:t.valign,wrap:1,wrapwidth:c,wrapheight:h,fontsize:_.fontSize/L.sFactor,font:_.fontFamily,color:T.fontColor,bgcolor:T.labelBgColor||"",bordercolor:T.labelBorderColor||""}),{markerShape:F,markerLabel:T.drawOptions.label}):{markerShape:F}},o.highlightPoint=function(e,t){var o=e.element,n=t.originalEvent,r=this.getFromEnv("chart"),i=this.getFromEnv("toolTipController"),a=this.config.currentToolTip,l=r.config.lastHoveredPoint;l&&l!==e&&(l&&this.hoverOutFn(l.element),r.config.lastHoveredPoint=null,i.hide(a)),!1!==e&&("click"===t.type||"touchstart"===t.type?(r.config.lastHoveredPoint!==e&&this.hoverFn(o),this.clickFn(t,o)):"mousemove"===t.type&&r.config.lastHoveredPoint!==e&&this.hoverFn(o),o.config.tooltext&&(a?i.draw(n,o.config.tooltext,a):a=this.config.currentToolTip=i.draw(n,o.config.tooltext)),r.config.lastHoveredPoint=e)},o._drawConnectors=function(){var e,t,o,n,r,i,a,l,s,c,h,d,g,u=this.getFromEnv("chart"),p=u.config.annotationConfig,f=this.components.connectors||(this.components.connectors=[]),m=f.length,b=u.config.scalingParams,v=u.config.connectorOpts,y=v.showLabels,k=this.getChildren("mapAnnotations")[0],C=[],w=[],x=[],S={};for(x.push({id:"connectorLabels",fillalpha:"100",items:w}),x.push({id:"connectors",fillalpha:"100",items:C}),o=0;o<m;o++)f[o]&&(S[o]=!0,s=f[o].config.fromMarker.config,c=f[o].config.toMarker.config,r=s.options.x,i=s.options.y,a=c.options.x,l=c.options.y,f[o].config.x=r,f[o].config.y=i,f[o].config.tox=a,f[o].config.toy=l,g=Object.assign({animationLabel:"markerItem"},f[o].config),C.push(g),f[o].labelConfig&&y&&(f[o].labelConfig.x=((Number(r)+Number(a))/2).toString(),f[o].labelConfig.y=((Number(i)+Number(l))/2).toString(),f[o].labelConfig.fontsize=v.fontSize/(b.scaleFactor*u.config.baseScaleFactor),g=Object.assign({animationLabel:"markerItem"},f[o].labelConfig),w.push(g)));for(h=k.addGroup(Object.assign(p,x[1]),this),d=k.addGroup(Object.assign(p,x[0]),this),o=0,n=0;o<m;o++)S[o]&&((e=h.items[n])&&(e.data("unfilteredConfig",C[n]),e.addEventListener("fc-mouseover",f[o].config.onmouseover),e.addEventListener("fc-mouseout",f[o].config.onmouseout),e.addEventListener("fc-click",f[o].config.onclick)),f[o].labelConfig&&y&&(t=d.items[n])&&t.data("unfilteredConfig"),n++)},o.getShapeArgs=function(){var e,t=this.config,o=(0,d.extend2)({},this.shapeObj);return t.autoScale=1,o?("polygon"===o.type?o.sides<3?o.type="circle":o.startangle=t.startAngle:"arc"===o.type&&(e=(o.radius||t.markerRadius)*t.autoScale,o.radius=e,o.innerradius=o.innerradius&&o.innerradius*t.autoScale||.6*e),o):null},o._getLabelOptions=function(e,t,o,n,i){var a,l,s,c=e&&e.toLowerCase();return this.getLabelAlignment[c]||(c="center"),l=Number(o.x),s=Number(o.y),a=n===r||i===r?o.radius||0:/^(top|bottom)$/gi.test(c)&&.5*i||/^(left|right)$/gi.test(c)&&.5*n||0,a=Number(a)+Number(t),this.getLabelAlignment[c](l,s,a)},o.addMarkerItem=function(e){var o,n,i,a,l,s,c,h,g=this.getFromEnv("chart"),u=e,p=this.components.markerObjs,f=this.components.shapeObjs,m=this.components.markerGroup,b=this.components.markerLabelGroup,v=this.getChildren("mapAnnotations")[0],y=this.getFromEnv("number-formatter"),k=g.config.markerOpts;if(h=u.id.toLowerCase()){if(p[h])return;delete u.value,this.imageLoadCount=0,(o=t._initializeMarkerItem(h,u,null)).dataset=this,c=o.config.options.shapeid,a=o.config,s=u.value,a.cleanValue=y.getCleanValue(s),n=a.options,null!==a.cleanValue?a.formattedValue=y.dataLabels(s):a.formattedValue=r,a.fillColor=(0,d.pluck)(n.fillcolor,n.color,k.fillColor),a.fillAlpha=(0,d.pluck)(n.fillalpha,n.alpha,k.fillAlpha),a.fillRatio=(0,d.pluck)(n.fillratio,k.fillRatio),a.fillAngle=(0,d.pluck)(n.fillangle,k.fillAngle),a.borderThickness=(0,d.pluckNumber)(n.borderthickness,k.borderThickness),a.borderColor=(0,d.pluck)(n.bordercolor,k.borderColor),a.borderAlpha=(0,d.pluck)(n.borderalpha,k.borderAlpha),a.labelPadding=n.labelpadding||k.labelPadding,a.options.tooltext=(0,d.pluck)(n.tooltext,k.tooltext),a.link=n.link,c&&(o.shapeObj=f[c&&c.toLowerCase()]),p[h]=o,i=this._drawMarkerItem(o),m&&b&&(i.markerShape&&(l=Object.assign({align:"center",valign:"middle",animationLabel:"markerItem",autoscale:"image"===i.markerShape.type?0:1},i.markerShape),o.markerShape=v.addItem(m.getId(),l,this),o.markerShape.data("unfilteredConfig",l)),i.markerLabel&&(l=Object.assign({animationLabel:"markerItem"},i.markerLabel),o.markerLabel=v.addItem(b.getId(),l,this),o.markerLabel.data("unfilteredConfig",l))),this._buildKdTree()}},o.updateMarkerItem=function(e,t){var o,n,r,i,a=this.getFromEnv("chart"),l=this.getChildren("mapAnnotations")[0],s=this.components.markerObjs,c=a.config.markerOpts,h={},g=s[e];if(g){for(n in o=g.config.options,(0,d.extend2)(o,t),this.imageLoadCount=0,r=g.config,t)h[n.toLowerCase()]=t[n]&&t[n].toString();r.fillColor=(0,d.pluck)(h.fillcolor,h.color,c.fillColor),r.fillAlpha=(0,d.pluck)(h.fillalpha,h.alpha,c.fillAlpha),r.fillRatio=(0,d.pluck)(h.fillratio,c.fillRatio),r.fillAngle=(0,d.pluck)(h.fillangle,c.fillAngle),r.borderThickness=(0,d.pluckNumber)(h.borderthickness,c.borderThickness),r.borderColor=(0,d.pluck)(h.bordercolor,c.borderColor),r.borderAlpha=(0,d.pluck)(h.borderalpha,c.borderAlpha),r.labelPadding=h.labelpadding||c.labelPadding,r.options.tooltext=(0,d.pluck)(h.tooltext,c.tooltext),r.link=h.link,i=this._drawMarkerItem(g).markerShape,this._buildKdTree(),l.update(e,i)}},o.createContainer=function(){var e=this.getLinkedParent(),t=this.getFromEnv("animationManager"),o=e.getChildContainer("layer1");!this.getChildContainer("abovePlotGroup")&&this.addChildContainer("abovePlotGroup",t.setAnimation({el:"group",attr:{name:"abovePlotGroup",opacity:1},container:o,component:this,label:"group"})),!this.getChildContainer("belowPlotGroup")&&this.addChildContainer("belowPlotGroup",t.setAnimation({el:"group",attr:{name:"belowPlotGroup",opacity:1},container:o,component:this,label:"group"}))},o._removeMarkerItem=function(e){var t,o,n=this.components,r=n.markerObjs,i=r[e],a=n.kdArrayMap,l=this.getChildren("mapAnnotations")[0];i&&(t=i.markerShape,o=i.markerLabel,t&&l.destroy(t.getId()),o&&l.destroy(o.getId()),delete a[e],this._buildKdTree()),delete r[e]},o.getElement=function(e){if(this.components.kDTree)return this.components.kDTree.getNeighbour(e)},t}(a.default);t.default=I},263:function(e,t,o){"use strict";t.__esModule=!0,t.default=void 0;var n=function(e,t,o,n,r){return Math.pow(o-e,2)+Math.pow(n-t,2)<=Math.pow(r,2)},r=Math.PI,i=Math.cos,a=Math.sin,l=Math.max,s=Math.min,c=r/180,h=function(e,t,o,n,r,i){var a,l,s;return a=(n-t)*(r-o),l=(o-e)*(i-n),isNaN(a)&&(a=0),isNaN(l)&&(l=0),0===(s=a-l)?0:s>0?1:2},d=function(e,t,o,n,r,i){return o<=l(e,r)&&o>=s(e,r)&&n<=l(t,i)&&n>=s(t,i)},g=function(e,t,o,n,r,i,a,l){var s=h(e,t,o,n,r,i),c=h(e,t,o,n,a,l),g=h(r,i,a,l,e,t),u=h(r,i,a,l,o,n);return s!==c&&g!==u||(!(0!==s||!d(e,t,r,i,o,n))||(!(0!==c||!d(e,t,a,l,o,n))||(!(0!==g||!d(r,i,e,t,a,l))||!(0!==u||!d(r,i,o,n,a,l)))))},u=function(e,t,o,l,s,u,p){var f,m,b,v,y,k,C,w=0,x=!1;if(n(e,t,o,l,s)&&u>=3){for(m=void 0===p?.5*r:p%360*c,C=2*r/u,b=o+s*i(-m),k=l+s*a(-m),f=0;f<u;f++){if(v=o+s*i(-(m+=C)),y=l+s*a(-m),g(b,k,v,y,e,t,1/0,t)){if(0===h(b,k,e,t,v,y))return d(b,k,e,t,v,y);w++}b=v,k=y}x=w%2!=0}return x},p=function(e,t){return!e||e&&t&&t.i>e.i?t:e};var f=function(){function e(e){this.configure(e)}var t=e.prototype;return t.configure=function(e){this.validatorFn=e?this.shapeValidator():this.defaultValidator()},t.defaultValidator=function(){var e=this;return function(t){var o=e.mousePoint;return!!(t&&Math.pow((t.x-o.x)/e.xLimit,2)+Math.pow((t.y-o.y)/e.yLimit,2)<=1)}},t.shapeValidator=function(){var e=this;return function(t){var o,r,i,a,l,s,c,h,d=e.mousePoint,g=t&&t.shapeInfo,p=!1,f=d.x,m=d.y;switch(g&&g.type){case"circle":r=g.radius,p=n(f,m,t.x,t.y,r);break;case"arc":o=g.innerradius,r=g.radius,p=!n(f,m,t.x,t.y,o)&&n(f,m,t.x,t.y,r);break;case"polygon":r=g.radius,a=g.startAngle,i=g.sides,p=u(f,m,t.x,t.y,r,i,a);break;case"rect":case"rectangle":l=t.x,c=t.y,s=l+(g.width||0),h=c+(g.height||0),p=f>=l&&f<=s&&m>=c&&m<=h;break;case"default":p=!1}return p}},t.buildKdTree=function(e){return this.kdTree=function(e){var t,o,n,r=e,i=r&&r[0]&&r[0].r||5,a=Math.max,l=Math.floor,s=Math.sqrt,c=Math.min,h=Math.log,d=Math.exp,g=Math.pow;function u(e,t,o){var n=e[t];e[t]=e[o],e[o]=n}for(o=function(e,t,n,r){for(var i,g,p,f,m,b,v,y,k,C,w=n,x=r;x>w;){for(x-w>600&&(g=t-w+1,p=h(i=x-w+1),f=.5*d(2*p/3),m=.5*s(p*f*(i-f)/i)*(g-i/2<0?-1:1),b=a(w,l(t-g*f/i+m)),v=c(x,l(t+(i-g)*f/i+m)),o(e,t,b,v)),y=e[t],k=w,C=x,u(e,w,t),e[x].x>y.x&&u(e,w,x);k<C;){for(u(e,k,C),k++,C--;e[k].x<y.x;)k++;for(;e[C].x>y.x;)C--}e[w].x===y.x?u(e,w,C):u(e,++C,x),C<=t&&(w=C+1),t<=C&&(x=C-1)}},n=function(e,t,o,r){for(var i,g,p,f,m,b,v,y,k,C,w=o,x=r,S=e;x>w;){for(x-w>600&&(g=t-w+1,p=h(i=x-w+1),f=.5*d(2*p/3),m=.5*s(p*f*(i-f)/i)*(g-i/2<0?-1:1),b=a(w,l(t-g*f/i+m)),v=c(x,l(t+(i-g)*f/i+m)),n(S,t,b,v)),y=S[t],k=w,C=x,u(S,w,t),S[x].y>y.y&&u(S,w,x);k<C;){for(u(S,k,C),k++,C--;S[k].y<y.y;)k++;for(;S[C].y>y.y;)C--}S[w].y===y.y?u(S,w,C):u(S,++C,x),C<=t&&(w=C+1),t<=C&&(x=C-1)}},t=(r=r||[]).length;t--;)r[t].r>i&&(i=r[t].r),r[t].i=t,r[t].x=+r[t].x,r[t].y=+r[t].y;return{tree:0===r.length?{}:function e(t,r,i,a){var l,s={},c=a?"y":"x";return r===i?(s.point=t[r],s):i-r==1?(t[r][c]>t[i][c]?(s.point=t[r],s.left={point:t[i]}):(s.point=t[i],s.left={point:t[r]}),s):(l=r+i>>1,a?n(t,l,r,i):o(t,l,r,i),s.point=t[l],s.left=e(t,r,l-1,!a),s.right=e(t,l+1,i,!a),s)}(r,0,r.length-1,!1),search:function(e,t,o,n){var r,a,l,c=this.tree,h=n,d=e-i,u=e+i,p=t-i,f=t+i,m=!1,b=0;function v(e,t,o,n){return s(g(e-o,2)+g(t-n,2))}function y(n,r){return"circle"===o?v(n,r,e,t)<=d:n>=d&&n<=u&&r>=p&&r<=f}function k(e,t,o){return e>=t&&e<=o}function C(o){var n=k(e,o.x1,o.x2)&&k(t,o.y1,o.y2),i=v(e,t,o.point.x,o.point.y);if(!r)return r=o,m=n,void(b=i);n?m?o.point.i>r.point.i&&(r=o,m=n,b=i):(r=o,m=n,b=i):m||i<b&&(r=o,m=n,b=i)}function w(n,r){"circle"===o?d=n:(d=e-n||0,u=e+n||0,p=t-r||0,f=t+r||0)}return h=h||{},l=function(e){e&&e.point&&(w(h.rx||e.point.r,h.ry||e.point.r),y(e.point.x,e.point.y)&&C(e),p<=e.point.y&&a(e.left),f>=e.point.y&&a(e.right))},(a=function(e){e&&e.point&&(w(h.rx||e.point.r,h.ry||e.point.r),y(e.point.x,e.point.y)&&C(e),d<=e.point.x&&l(e.left),u>=e.point.x&&l(e.right))})(c),r&&r.point||r}}}(e),this.tree=this.kdTree.tree,this},t.getNeighbour=function(e,t,o){var n=this.tree,r={x1:e.x-this.xLimit,x2:e.x+this.xLimit,y1:e.y-this.yLimit,y2:e.y+this.yLimit},i=this.validatorFn;return this.mousePoint=e,t?this.kdTree&&this.kdTree.search(e.x,e.y,o,e.options):n?this._searchBtwnLimit(r,n,!0,i):void 0},t._searchBtwnLimit=function(e,t,o,n){var r,i,a=o?"x":"y",l=o?e.x1:e.y1,s=o?e.x2:e.y2;if(void 0!==(r=t&&t.point&&t.point[a]))return n(t.point)&&(i=t.point),r>=l&&t.left&&(i=p(i,this._searchBtwnLimit(e,t.left,!o,n))),r<=s&&t.right&&(i=p(i,this._searchBtwnLimit(e,t.right,!o,n))),i},t._setSearchLimit=function(e,t){this.xLimit=e,this.yLimit=t},e}();f.prototype.constructor=f;var m=f;t.default=m},264:function(e,t,o){"use strict";var n=o(11);t.__esModule=!0,t.default=void 0;var r=n(o(3)),i=o(4),a=o(2),l=o(5),s=n(o(244)),c=function(e){e.configure&&e.configure()};(0,l.addDep)({name:"mapsAnimation",type:"animationRule",extension:s.default});var h=function(e){function t(){return e.apply(this,arguments)||this}(0,r.default)(t,e);var o=t.prototype;return o.getType=function(){return"group"},o.getName=function(){return"mapGroup"},o.configure=function(){this._mapChildren(c)},o.createContainer=function(){var e,t=this.getLinkedParent(),o=this.getFromEnv("animationManager"),n=t.getChildContainer();e=n.plotGroup,!this.getChildContainer("plotShadow")&&this.addChildContainer("plotShadow",o.setAnimation({el:"group",attr:{name:"manager-plot-shadow",opacity:1},container:e,component:this,label:"group"})),!this.getChildContainer("plot")&&this.addChildContainer("plot",o.setAnimation({el:"group",attr:{name:"manager-plot",opacity:1},container:e,component:this,label:"group"})),!this.getChildContainer("layer0")&&this.addChildContainer("layer0",o.setAnimation({el:"group",attr:{name:"ann-layer0",opacity:1},container:n.abovePlotGroup,component:this,label:"group"})),!this.getChildContainer("layer1")&&this.addChildContainer("layer1",o.setAnimation({el:"group",attr:{name:"ann-layer1",opacity:1},container:n.abovePlotGroup,component:this,label:"group"})),t.config.labelsOnTop?this.getChildContainer("layer0").toFront():this.getChildContainer("layer0").toBack()},o._transformGroup=function(){var e=this,t=this.getFromEnv("chart"),o=t.getFromEnv("chartInstance"),n=e.getFromEnv("animationManager"),r=t.jsonData,i=e.getChildContainer("plot"),l=e.getChildContainer("plotShadow"),s=t.config.scalingParams;i.hide(),l.hide(),t.config.entitiesReady=!1,o.addEventListener("internal.mapdrawingcomplete",(function(t){t.detachHandler(),a.hasSVG&&(o.args.link&&o.args.clickedEntityBox&&r.chart.linkedcharttransition,i&&n.setAnimation({el:i,attr:{transform:s.transformStr},component:e,label:"group"}),l&&n.setAnimation({el:l,attr:{transform:s.transformStr},component:e,label:"group"})),i.show(),l.show()})),t.checkComplete()},o.draw=function(){this.createContainer(),this._transformGroup()},o.getDataLimits=function(e){var t,o=1/0,n=-1/0,r=0,i=function(e){n=Math.max(n,e.max),o=Math.min(o,e.min)};return this._mapChildren((function(o){o.getState("removed")||!1===o.getState("visible")?e&&(t=o.getDataLimits(e),i(t)):(r++,t=o.getDataLimits(e),i(t))})),r?this.setState("visible",!0):this.setState("visible",!1),this.config.range||(this.config.range={},this.config.range.min=this.config.dataMin,this.config.range.max=this.config.dataMax),{max:n,min:o}},t}(i.ComponentInterface);t.default=h},265:function(e,t,o){"use strict";var n=o(11);t.__esModule=!0,t.default=function(e){!function(e){var t=e.getChildren("colorManager");if(!e.getFromEnv("dataSource").colorrange)return t&&(t[0].config.legendItemIds=[]),void e.deleteFromEnv("colorManager");if(t)return e.addToEnv("colorManager",t[0]),void t[0].configure();t=new r.default,e.attachChild(t,"colorManager"),e.addToEnv("colorManager",t),t.configure()}(e)};var r=n(o(266))},266:function(e,t,o){"use strict";var n=o(11);t.__esModule=!0,t.default=void 0;var r=n(o(3)),i=o(4),a=n(o(267)),l=n(o(268)),s=o(2);function c(e){var t=e||u;return(0,s.getValidColor)(t)||u}var h,d,g="rgba(192,192,192,"+(s.isIE?.002:1e-6)+")",u="#000000",p=((d={}).legendCarpetConf={spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},d.legendCaptionConf={spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},d.legendBodyConf={spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}},d.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:(0,s.toRaphaelColor)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},d.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:g,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:g,stroke:"#FFFFFF"}}},d.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},{init:function(e){h=e.chart},legacyDataParser:function(e,t){var o,n,r,i,a,l,d,g,u,p,f,m,b,v={},y=h.getFromEnv("number-formatter"),k=h.getFromEnv("dataSource"),C=k.data,w=t||{};if(!e)return!1;for("maps"!==h.defaultDatasetType||void 0!==w.min&&void 0!==w.max?"HeatMap"!==h.getName()||void 0!==w.min&&void 0!==w.max||(w={min:1/0,max:-1/0},k.dataset.forEach((function(e){e.data&&e.data.forEach((function(e){w.min=Math.min(w.min,(0,s.pluckNumber)(e.value,w.min)),w.max=Math.max(w.max,(0,s.pluckNumber)(e.value,w.max))}))}))):(w={min:1/0,max:-1/0},C&&C.forEach((function(e){w.min=Math.min(w.min,(0,s.pluckNumber)(e.value,w.min)),w.max=Math.max(w.max,(0,s.pluckNumber)(e.value,w.min))}))),v.mapByPercent=f=!!(0,s.pluckNumber)(e.mapbypercent,0),o=e.color||[],void 0===e.minvalue&&(e.minvalue=void 0!==w.min?f?0:w.min:0),void 0===e.maxvalue&&(e.maxvalue=void 0!==w.max?f?100:w.max:100),e.maxvalue!==e.minvalue&&w.min!==1/0&&w.max!==-1/0||(e.minvalue=0,e.maxvalue=100),m=!1,a=0,d=o.length;a<d;a++)if(o[a].maxvalue){m=!0;break}for(m||(o=[]),r=e.code,g=v.colorRange=[],v.gradient=!!(0,s.pluckNumber)(e.gradient,1),o.length?r=c(r):(r?(i=c(r),r=c()):(r=c(),b=r,i=(0,s.getLightColor)(b,1)),o.push({code:i,maxvalue:e.maxvalue,label:void 0})),function(e){var t,o,n,r=h.getFromEnv("number-formatter");for(t=0,o=e.length;t<o;t++)(n=e[t].maxvalue)&&(e[t].maxvalue=r.getCleanValue(n))}(o),o=o.sort((function(e,t){return e.maxvalue-t.maxvalue})),u=p=e.minvalue&&y.getCleanValue(e.minvalue),p=(void 0!==u||null!==u)&&(f?u+"%":y.legendValue(u)),g.push({code:(0,s.dehashify)(r),value:u,displayValue:p,label:e.startlabel}),a=0,d=o.length;a<d;a++)l=c((n=o[a]).code||n.color),u=p=n.maxvalue,isNaN(parseInt(u,10))||(p=(void 0!==u||null!==u)&&(f?u+"%":y.legendValue(u)),g.push({code:(0,s.dehashify)(l),value:u,displayValue:p,label:n.label||n.displayvalue}));return g[g.length-1].label=e.endlabel||n.label,v},getDefaultConf:function(e){return d[e]}}),f=function(e){function t(){var t;return(t=e.call(this)||this).datasource={},t.config.legendItemIds=[],t}(0,r.default)(t,e);var o=t.prototype;return o.configure=function(){var e,t,o=this.getFromEnv("chart"),n=this.getFromEnv("dataSource").chart.mapbycategory,r=o.config.showLegend,i=o.getChildren("colorRange")&&o.getChildren("colorRange")[0];switch(o.addToEnv("colorManager",this),this.datasource=o.getFromEnv("dataSource"),e=this.datasource.colorrange,i&&i.remove({instant:!0}),r||(this.config.legendItemIds=[]),"maps"===o.defaultDatasetType?e.gradient&&Number(e.gradient)?"gradient":e.color?"icon":"none":"TreeMap"===o.getName()||e.gradient&&"0"!==e.gradient&&!Number(n)?"gradient":"icon"){case"gradient":p.init({chart:o}),t=p.legacyDataParser(e),(0,s.componentFactory)(o,l.default,"colorRange",1,[t]),i=o.getChildren("colorRange")[0],o.addToEnv("colorRange",i),t||(i._dontPlot=!0),this.config.legendItemIds=[],this._configureGradientLegend(i);break;case"icon":(0,s.componentFactory)(o,a.default,"colorRange",1,[{colorRange:e,sortLegend:0,mapByCategory:(0,s.pluckNumber)(n,0),defaultColor:"cccccc",numberFormatter:o.getFromEnv("number-formatter")}]),o.addToEnv("colorRange",o.getChildren("colorRange")[0]),r&&this._addLegendItems();break;case"none":o.deleteFromEnv("colorManager"),this.config.legendItemIds=[]}},o._configureGradientLegend=function(e){var t=this,o=t.getFromEnv("chart").getFromEnv("gLegend");o&&(o.setColorRange(e),t.addExtEventListener("rangeUpdated",(function(e,o){t.fireEvent("legendUpdate",{"original-event":e,maxMinArray:o,component:"gradientlegend"})}),o))},o._addLegendItems=function(){var e,t,o,n,r,i=this.config,a=this.getFromEnv("chart"),l=a.getChildren("legend")[0],c=a.getFromEnv("colorRange").colorArr,h=c.length;for(n=0;n<h;n++)r={label:(0,s.pluck)(c[n].label,c[n].displayvalue),datasetObj:c[n],index:n},t=(0,s.getLightColor)(c[n].code,40),e={FCcolor:{color:c[n].code+","+c[n].code+","+t,ratio:"0,70,30",angle:270,alpha:"100,100,100"}},(o=l.getItem(i.legendItemIds[n]))||(i.legendItemIds.push(l.createItem(this)),(o=l.getItem(i.legendItemIds[n])).addEventListener("fc-click",o.itemClickFn)),o.removeLegendState("hidden"),c[n].legendItemId=o&&o.getId(),o.configure(r),o.setStateCosmetics("default",{symbol:{fill:(0,s.toRaphaelColor)(e),rawFillColor:c[n].code}});for(n=h;n<i.legendItemIds.length;n++)l.disposeItem(i.legendItemIds[n]);i.legendItemIds.splice(h)},o.legendInteractivity=function(e){var t=this.getFromEnv("colorRange").colorArr[e.config.index];this.fireEvent("legendUpdate",{legendItem:e,colorObj:t,component:"legend"})},o.getColor=function(e){return!Number(this.datasource.chart.mapbycategory)&&Number(this.datasource.colorrange.gradient)?{code:this.getColorByValue(e),label:this.getLabelByValue(e)}:this.getColorObj(e)},o.getValueRatio=function(){return this.getFromEnv("colorRange").getValueRatio()},o.getCumulativeValueRatio=function(){return this.getFromEnv("colorRange").getCumulativeValueRatio()},o.getBoxFill=function(e){return this.getFromEnv("colorRange").getBoxFill(e)},o.getColorByValue=function(e){return this.getFromEnv("colorRange").getColorByValue(e)},o.getColorObj=function(e){return this.getFromEnv("colorRange").getColorObj(e)},o.getLabelByValue=function(e){return this.getFromEnv("colorRange").getLabelByValue(e)},t}(i.ComponentInterface);t.default=f},267:function(e,t,o){"use strict";var n=o(11);t.__esModule=!0,t.default=void 0;var r=n(o(6)),i=n(o(3)),a=o(2),l=o(4),s=function(e,t){return+e.minvalue==+t.minvalue?e.maxvalue-t.maxvalue:e.minvalue-t.minvalue},c=function(e,t,o){var n=e[0],r=e[1],i=e[2],l=n+(t[0]-n)*o,s=r+(t[1]-r)*o,c=i+(t[2]-i)*o;return{hex:(a.COLOR_BLACK+(l<<16|s<<8|c).toString(16)).slice(-6),rgb:[l,s,c]}},h=function(e){function t(){var t;t=e.call(this)||this;var o=(0,r.default)(t);return o.mapByCategory=!1,o.colorArr=[],o.noValidRange=!0,o.sortLegend=!1,t}(0,i.default)(t,e);var o=t.prototype;return o.__setDefaultConfig=function(){e.prototype.__setDefaultConfig.call(this),this.config.defaultObj={code:"CCCCCC",alpha:"100"}},o.getType=function(){return"colorComponent"},o.getName=function(){return"colorBucket"},o.configure=function(e){if(e){var t,o,n,r,i,l,c,h,d,g,u,p=this.mapByCategory,f=e.numberFormatter,m=e.colorRange||{},b=(0,a.extend2)([],m.color),v=this.getLinkedParent(),y=Math.min(Math.max((0,a.pluckNumber)(this.getFromEnv("dataSource").chart.palette,0)-1,0),4),k=v.defaultPaletteOptions&&v.defaultPaletteOptions.paletteColors[y],C=(0,a.pluckNumber)(f.getCleanValue(m.maxvalue),1/0),w=(0,a.pluckNumber)(f.getCleanValue(m.minvalue),-1/0),x=this.colorArr;if(void 0!==e.mapByCategory&&(p=this.mapByCategory=!!Number(e.mapByCategory)),(b=p?b.filter((function(e){return e.code||e.color})):b.filter((function(e){return e.minvalue||e.maxvalue}))).forEach((function(e){e.minvalue&&e.maxvalue&&+e.maxvalue<+e.minvalue&&(h=e.maxvalue,e.maxvalue=e.minvalue,e.minvalue=h),e.minvalue?e.maxvalue?(g=f.getCleanValue(e.minvalue),d=f.getCleanValue(e.maxvalue),e.rangeLabel=f.dataLabels(g)+"-"+f.dataLabels(d)):(g=f.getCleanValue(e.minvalue),e.maxvalue=d=C,e.rangeLabel=d===1/0?">"+f.dataLabels(g):f.dataLabels(g)+"-"+f.dataLabels(d)):(e.minvalue=g=w,d=f.getCleanValue(e.maxvalue),e.rangeLabel=g===-1/0?"<"+f.dataLabels(d):f.dataLabels(g)+"-"+f.dataLabels(d))})),b.sort(s),b&&(t=b.length)){for(x.length=0,o=0;o<t;o+=1)c=b[o],n=(0,a.pluck)(c.color,c.code,k&&k[o]),r=(0,a.pluck)(c.alpha),l=(0,a.pluck)(c.bordercolor),i=(0,a.pluck)(c.borderalpha,100),d=(0,a.pluckNumber)(c.maxvalue),g=(0,a.pluckNumber)(c.minvalue),u=(0,a.pluck)(c.label,c.displayvalue,c.rangeLabel),(n&&d>=g||p&&u)&&x.push({code:n,alpha:r||"100",oriAlpha:r,maxvalue:d,minvalue:g,label:(0,a.parseUnsafeString)(u),labelId:u.toLowerCase(),bordercolor:l,borderAlpha:i,name:c.name});this.sortedColorArr=this.colorArr.slice(0)}else this.noValidRange=!0,this.colorArr=[],this.sortedColorArr=[]}},o.getColorObj=function(e){if(void 0===e)return{outOfRange:!0};var t,o,n=this.sortedColorArr,r=this.gradient?1:0,i=n[r],l=e;if(this.mapByCategory){for(l=(0,a.parseUnsafeString)(l).toLowerCase()||l.toString().toLowerCase();i;){if(i.labelId===l||i.maxvalue>=l&&i.minvalue<=l)return{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,legendItemId:i.legendItemId};i=n[r+=1]}return{outOfRange:!0}}if(this.gradient){if(this.scaleMin<=l&&this.scaleMax>=l){for(;i&&i.maxvalue<l;)i=n[r+=1];return o=(l-i.minvalue)/i.range,{code:c(n[r-1].codeRGB,i.codeRGB,o).hex}}return{outOfRange:!0}}for(;i;){if(l<i.minvalue&&!t)return 0===r?{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,name:i.name,label:i.label,outOfRange:!0,bordercolor:i.bordercolor,borderalpha:i.borderAlpha}:{code:n[r-1].code,alpha:n[r-1].alpha||"100",oriAlpha:n[r-1].oriAlpha,seriesIndex:r,name:n[r-1].name,label:n[r-1].label,outOfRange:!0,bordercolor:n[r-1].bordercolor,borderalpha:n[r-1].borderAlpha};if(l>i.maxvalue&&r===n.length-1)return{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,name:i.name,label:i.label,outOfRange:!0,bordercolor:i.bordercolor,borderalpha:i.borderAlpha};if(i.maxvalue>l&&i.minvalue<=l)return{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,name:i.name,label:i.label,bordercolor:i.bordercolor,borderalpha:i.borderAlpha};if(l===i.maxvalue&&(t={code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,name:i.name,label:i.label,bordercolor:i.bordercolor,borderalpha:i.borderAlpha}),r===n.length-1&&t)return t;i=n[r+=1]}return n.length?void 0:{outOfRange:!0}},o.getColorRangeArr=function(e,t){var o,n,r,i,l,s,c,h,d=[],g=e,u=t;if(!this.defaultAsigned&&(g>u&&(o=g,g=u,u=o),g<u&&(i=this.getColorObj(g),s=this.getColorObj(u),i&&s))){for(l=g,n=i.seriesIndex,r=s.seriesIndex;n<=r;n+=1)(c=(0,a.extend2)({},this.colorArr[n])).minvalue!==l&&(c.minvalue=l),d.push(c),h=c,l=c.maxvalue;h&&(h.maxvalue=u)}return d},t}(l.ComponentInterface);t.default=h},268:function(e,t,o){"use strict";var n=o(11);t.__esModule=!0,t.default=void 0;var r=n(o(3)),i=o(4),a=o(2),l=function(e){function t(){var t;return(t=e.call(this)||this).colorRange={},t.valueRatio={},t.data={},t.mapByPercent=a.UNDEF,t}(0,r.default)(t,e);var o=t.prototype;return o.getType=function(){return"colorComponent"},o.getName=function(){return"gradientColorRange"},o.configure=function(e){if(e){var t,o,n;for(this.data=e,this.appender=a.BLANKSTRING,n=this.colorRange=e.colorRange.sort((function(e,t){return e.value-t.value})),this.valueRatio=a.UNDEF,this.values=[],t=0,o=n.length;t<o;t++)this.values.push(n[t].value)}},o.getValueRatio=function(){var e,t,o=this.colorRange,n=o.length,r=this.valueRatio,i=o[n-1].value,a=o[0].value,l=i-a,s=0;if(r)return r;for(r=this.valueRatio=[],e=0;e<n;e++)t=(o[e].value-a)/l,r.push(100*(t-s)),s=t;return r},o.getCumulativeValueRatio=function(){var e,t,o=this.colorRange,n=o.length,r=o[0].value,i=o[n-1].value,a=[];for(t=0;t<n;t++)e=o[t],a.push((e.value-r)/(i-r)*100);return a},o.getBoxFill=function(e){var t,o,n,r=this.colorRange,i=r.length,l=[];for(n=e?90:0,o=0;o<i;o++)t=r[o],l.push(t.code);return(0,a.toRaphaelColor)({FCcolor:{alpha:"100,100,100",angle:n,color:l.join(","),ratio:this.getValueRatio().join(",")}})},o.getColorByValue=function(e){var t,o,n,r,i=this.values,l=this.colorRange;if(e!==a.UNDEF&&null!==e){for(o=0,t=i.length;o<t;o++){if(e===i[o]){r=l[o].code;break}if(!o&&e<i[o]){n=!0;break}if(o===t-1&&e>i[o]){n=!0;break}if(e>i[o]&&e<i[o+1]){s=l[o],c=l[o+1],h=e,d=void 0,g=void 0,u=void 0,p=void 0,g=s.value,u=(0,a.HEXtoRGB)(s.code),p=(0,a.HEXtoRGB)(c.code),d=c.value-g,r=(0,a.RGBtoHex)([Math.round(u[0]+(p[0]-u[0])/d*(h-g)),Math.round(u[1]+(p[1]-u[1])/d*(h-g)),Math.round(u[2]+(p[2]-u[2])/d*(h-g))]);break}}var s,c,h,d,g,u,p;if(!n)return r}},o.getLabelByValue=function(e){var t,o,n,r,i=this.values,l=this.colorRange;if(e!==a.UNDEF&&null!==e){for(o=0,t=i.length;o<t;o++){if(e===i[o]){r=l[o].label;break}if(!o&&e<i[o]){n=!0;break}if(o===t-1&&e>i[o]){n=!0;break}if(e>i[o]&&e<i[o+1]){r=l[o].label;break}}if(!n)return r}},t}(i.ComponentInterface);t.default=l},269:function(e,t,o){"use strict";var n=o(11);t.__esModule=!0,t.default=function(e){!function(e){var t,o=e.getFromEnv("dataSource").colorrange,n=e.getFromEnv("dataSource").chart.mapbycategory,l="maps"===e.defaultDatasetType,s="TreeMap"===e.getName(),c=e.getFromEnv("legend"),h=e.getFromEnv("gLegend");t=o&&e.config.showLegend?l?o.gradient&&Number(o.gradient)?"gradient":o.color?"icon":"none":s?o.gradient&&"0"!==o.gradient?"gradient":"none":o.gradient&&"0"!==o.gradient&&!Number(n)?"gradient":"icon":"none";switch(t){case"gradient":e.deleteFromEnv("legend"),c&&c.remove(),(0,r.componentFactory)(e,i.default,"gLegend",1),(h=e.getChildren("gLegend")[0]).configure(),e.addToEnv("gLegend",h);break;case"icon":e.deleteFromEnv("gLegend"),h&&h.remove(),(0,r.componentFactory)(e,a.default,"legend",1,{showLegend:!0}),(c=e.getChildren("legend")[0]).configure(),e.addToEnv("legend",c);break;case"none":e.deleteFromEnv("gLegend"),e.deleteFromEnv("legend"),h&&h.remove(),c&&c.remove()}}(e)};var r=o(2),i=n(o(270)),a=n(o(245))},270:function(e,t,o){"use strict";var n=o(11);t.__esModule=!0,t.default=void 0;var r,i,a,l,s,c=n(o(6)),h=n(o(3)),d=o(2),g=o(4),u={},p="rgba(192,192,192,"+(d.isIE?.002:1e-6)+")",f={}.hasOwnProperty,m="M",b="L";function v(e,t){return function e(t,o){var n,i;for(i in t)f.call(t,i)&&(n=t[i],o[i]===r?o[i]=n:"object"==typeof n&&null!==n&&e(n,o[i]))}(e,t),t}function y(e){var t=e||"#000000";return(0,d.getValidColor)(t)||"#000000"}function k(e){var t,o=e.fontSize+"";return o?(t=o.replace(/(\d+)(px)*/,"$1px"),e.fontSize=t,e):e}function C(e){return!(e!==r&&null!=e&&!isNaN(e))}u.CAPTION="CAPTION",u.LEGEND_BODY="LEGEND_BODY",u.AXIS_LABEL="LEGEND_LABEL",u.LEGEND_AXIS="LEGEND_AXIS",u.RANGE="RANGE",u.AXIS_VALUE="AXIS_VALUE",(s={}).legendCarpetConf={spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},s.legendCaptionConf={spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},s.legendBodyConf={spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}},s.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:(0,d.toRaphaelColor)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},s.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:p,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:p,stroke:"#FFFFFF"}}},s.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},i={init:function(e){l=e.chart},legacyDataParser:function(e,t){var o,n,i,a,s,c,h,g,u,p,f,m,b,v={},k=l.getFromEnv("number-formatter");if(!e)return!1;for(v.mapByPercent=f=!!(0,d.pluckNumber)(e.mapbypercent,0),o=e.color||[],e.minvalue===r&&(e.minvalue=t.min!==r?f?0:t.min:0),e.maxvalue===r&&(e.maxvalue=t.max!==r?f?100:t.max:100),m=!1,s=0,h=o.length;s<h;s++)if(o[s].maxvalue){m=!0;break}for(m||(o=[]),i=e.code,g=v.colorRange=[],v.gradient=!!(0,d.pluckNumber)(e.gradient,1),o.length?i=y(i):(i?(a=y(i),i=y()):(i=y(),b=i,a=(0,d.getLightColor)(b,1)),o.push({code:a,maxvalue:e.maxvalue,label:r})),function(e){var t,o,n,r=l.getFromEnv("number-formatter");for(t=0,o=e.length;t<o;t++)(n=e[t].maxvalue)&&(e[t].maxvalue=r.getCleanValue(n))}(o),o=o.sort((function(e,t){return e.maxvalue-t.maxvalue})),u=p=e.minvalue&&k.getCleanValue(e.minvalue),p=(u!==r||null!==u)&&(f?u+"%":k.legendValue(u)),g.push({code:(0,d.dehashify)(i),value:u,displayValue:p,label:e.startlabel}),s=0,h=o.length;s<h;s++)c=y((n=o[s]).code||n.color),u=p=n.maxvalue,isNaN(parseInt(u,10))||(p=(u!==r||null!==u)&&(f?u+"%":k.legendValue(u)),g.push({code:(0,d.dehashify)(c),value:u,displayValue:p,label:(0,d.parseUnsafeString)(n.label||n.displayvalue)}));return g[g.length-1].label=(0,d.parseUnsafeString)(e.endlabel||n.label),v},getDefaultConf:function(e){return s[e]}};var w=function(e){(0,h.default)(o,e);var t=o.prototype;function o(){var t;return t=e.call(this)||this,a=(0,c.default)(t),t.enabled=!1,t.drawOptions={},t.components={},t}return t.getType=function(){return"gradientLegend"},t.getName=function(){return"gLegend"},t.setColorRange=function(e){var t=this.drawOptions.colorRange=e;t&&t._preparationGoneWrong&&(this._dontPlot=!0)},t.configureAttributes=function(){var e,t,o,n,a,l,s,c,h,g,u=this.getFromEnv("chart"),p=this.getFromEnv("dataSource").chart,f=this.conf={},m=p.outcnvbasefont,b=p.outcnvbasefontsize,v=p.outcnvbasefontcolor,y=u.config.dataLabelStyle;i.init({chart:u}),this.data=this.getFromEnv("dataSource").colorrange,this._dontPlot||(this.drawOptions={smartLabel:this.getFromEnv("smartLabel"),gLegend:this},this._dontPlot=!1,this._recalculateLogicalSpace=!0,f.caption=(0,d.parseUnsafeString)((0,d.pluck)(p.legendcaption)),f.legendPosition=(0,d.pluck)(p.legendposition,"bottom").toLowerCase(),f.legendXPosition=(0,d.pluckNumber)(p.legendxposition,0),f.legendYPosition=(0,d.pluckNumber)(p.legendyposition,0),f.legendMaxHeight=(0,d.pluckNumber)(p.legendmaxheight,0),f.legendMaxWidth=(0,d.pluckNumber)(p.legendmaxwidth,0),f.legendVertical="string"==typeof p.legendorientation&&"vertical"===p.legendorientation.toLowerCase(),f.showLegend=(0,d.pluckNumber)(p.showlegend,1),f.interactiveLegend=(0,d.pluckNumber)(p.interactivelegend,1),f.showLegendLabels=(0,d.pluckNumber)(p.showlegendlabels,1),e=p.legenditemfontcolor||v,t=p.legenditemfont||m,o=p.legenditemfontsize||b,n=(0,d.pluckNumber)(p.legenditemfontbold,0),a=p.legendcaptionfontcolor||v,l=p.legendcaptionfont||m,s=p.legendcaptionfontsize||b,c=(0,d.pluckNumber)(p.legendcaptionfontbold,1),g=(h=p.legendaxisbordercolor?(0,d.hashify)((0,d.dehashify)(p.legendaxisbordercolor)):r)?(0,d.pluckNumber)(p.legendaxisborderalpha,100)/100:r,f.axisTextItemConf={style:{fill:e?(0,d.convertColor)((0,d.pluck)(e)):y.color,fontFamily:t?(0,d.pluck)(t):y.fontFamily,fontSize:o?(0,d.pluckNumber)(o):y.fontSize.match(/\d+/)[0],fontWeight:n?"bold":y.fontWeight}},f.legendCaptionConf={style:{fill:a?(0,d.convertColor)((0,d.pluck)(a)):y.color,fontFamily:l?(0,d.pluck)(l):y.fontFamily,fontSize:s?(0,d.pluckNumber)(s):y.fontSize.match(/\d+/)[0],fontWeight:c?"bold":y.fontWeight,fontStyle:"normal"}},f.legendAxisConf={legendAxisHeight:11,style:{stroke:h,"stroke-opacity":g},line:{style:{stroke:(0,d.convertColor)((0,d.pluck)(p.legendscalelinecolor,"FFF8E9"),(0,d.pluckNumber)(p.legendscalelinealpha,100)),"stroke-width":(0,d.pluckNumber)(p.legendscalelinethickness)}}},f.sliderGroupConf={showTooltip:(0,d.pluckNumber)(p.showtooltip,1),outerCircle:{rFactor:(0,d.pluckNumber)(p.sliderdiameterfactor),style:{stroke:(0,d.convertColor)((0,d.pluck)(p.legendpointerbordercolor,"757575"),(0,d.pluckNumber)(p.legendpointerborderalpha,100))}},innerCircle:{rFactor:(0,d.pluckNumber)(p.sliderholediameterfactor),style:{stroke:(0,d.convertColor)((0,d.pluck)(p.legendpointercolor,"FFFFFF"),(0,d.pluckNumber)(p.legendpointeralpha,100))}}},f.legendCarpetConf={spreadFactor:(0,d.pluckNumber)(p.legendspreadfactor),allowDrag:!!(0,d.pluckNumber)(p.legendallowdrag,0),captionAlignment:(0,d.pluck)(p.legendcaptionalignment,"center"),style:{fill:(0,d.convertColor)((0,d.pluck)(p.legendbgcolor,"e4d9c1"),(0,d.pluckNumber)(p.legendbgalpha,100)),stroke:(0,d.convertColor)((0,d.pluck)(p.legendbordercolor,"c4b89d"),(0,d.pluckNumber)(p.legendborderalpha,100)),"stroke-width":(0,d.pluckNumber)(p.legendborderthickness,1)}})},t.postConfigureInit=function(){var e,t,o,n,r,a,l,s,c,h,d,g=this.conf,p=g.legendPosition?g.legendPosition.split("-"):[];this.elem={},g.interactiveLegend?(n=v(i.getDefaultConf("sliderGroupConf"),g.sliderGroupConf),this.sGroup?((o=this.elem.sGroup=this.sGroup).configure(n),this.elem.sGroup.gLegend=this):(this.sGroup=this.elem.sGroup=o=new _(n),o.configure(n),this.elem.sGroup.gLegend=this)):(this.sGroup&&this.sGroup.dispose(),this.sGroup&&delete this.sGroup),(n=v(i.getDefaultConf("legendCarpetConf"),g.legendCarpetConf)).legendPosition="absolute"===p[0]&&!g.legendVertical||"top"===p[0]||"bottom"===p[0]?"bottom":"right",d=i.getDefaultConf("legendBodyConf"),"absolute"===p[0]&&!g.legendVertical||"top"===p[0]||"bottom"===p[0]?(this.drawOptions.refSideKey="canvasWidth",this.drawOptions.refOffsetKey="canvasLeft",r=v(i.getDefaultConf("axisTextItemConf"),g.axisTextItemConf),d.legendPosition="bottom",(h=v(i.getDefaultConf("legendAxisConf"),g.legendAxisConf)).legendPosition="bottom",r.legendPosition="bottom"):(this.drawOptions.refSideKey="canvasHeight",this.drawOptions.refOffsetKey="canvasTop",r=v(i.getDefaultConf("axisTextItemConf"),g.axisTextItemConf),d.legendPosition="right",(h=v(i.getDefaultConf("legendAxisConf"),g.legendAxisConf)).legendPosition="right",r.legendPosition="right"),Object.keys(this.components).length||(this.components.LegendCarpet=new S,this.components.LegendBody=new T,this.components.LegendAxis=new E,this.components.LegendValues=new A,g.showLegendLabels&&(this.components.LegendLabels=new F)),t=this.components.LegendAxis,s=this.components.LegendValues,e=this.components.LegendCarpet,a=this.components.LegendBody,g.showLegendLabels&&(l=this.components.LegendLabels),this.components.LegendCarpet.configure(n),this.components.LegendValues.configure(r),this.components.LegendAxis.configure(h),this.components.LegendBody.configure(this.drawOptions.colorRange,d,r),g.showLegendLabels&&l.configure(r),g.caption?(c=v(i.getDefaultConf("legendCaptionConf"),g.legendCaptionConf),this.componentCaption&&Object.keys(this.componentCaption).length?this.componentCaption.configure(g.caption,c):(this.componentCaption=new L).configure(g.caption,c),e.addCompositions(this.componentCaption,u.CAPTION)):(e.removeCompositions(u.CAPTION),this.componentCaption&&this.componentCaption.dispose(),delete this.componentCaption),o&&t.addCompositions(o,u.RANGE),l&&a.addCompositions(l,u.AXIS_LABEL),a.addCompositions(t,u.LEGEND_AXIS),a.addCompositions(s,u.AXIS_VALUE),e.addCompositions(a,u.LEGEND_BODY),this.elem.gl=new x(e)},t.getValueRange=function(){var e,t,o=this.elem&&this.elem.sGroup,n=o.sliders,r=o.extremes;return e=n.false.currPos,t=r[1]-r[0]+n.true.currPos,[{min:o.getValueFormPixel(e),max:o.getValueFormPixel(t)}]},t._dispose=function(){this.elem&&this.elem.gl&&this.elem.gl.dispose(),this.elem={},e.prototype._dispose.call(this)},t.getCalculatedLogicalSpace=function(){return this._logicalArea},t.setCalculatedLogicalSpace=function(e){this._logicalArea=e},t.getLogicalSpace=function(e){var t,o,n,r,i,a=this.conf,l={height:0,width:0},s=this.drawOptions,c=this.getFromEnv("chartConfig"),h="absolute"===a.legendPosition.split("-")[0];return this._recalculateLogicalSpace?this._dontPlot?l:(this._recalculateLogicalSpace=!1,this.postConfigureInit(),a.showLegend?(o=s.refSideKey,n=s.refOffsetKey,this.drawOptions.refSide=c[o],this.drawOptions.refOffset=c[n],this.drawOptions.maxOtherSide=e||this.drawOptions.maxOtherSide,this.elem.gl&&(t=this.elem.gl.getLogicalSpace(this.drawOptions,!0),this.elem.gl&&this.setCalculatedLogicalSpace(t)),this.getCalculatedLogicalSpace()):l):(o=s.refSideKey,n=s.refOffsetKey,this.drawOptions.refSide=c[o],h?(r=a.legendMaxHeight<=0?.8*c.height:a.legendMaxHeight<=c.height?a.legendMaxHeight:c.height,i=a.legendMaxWidth<=0?.8*c.width:a.legendMaxWidth<=c.width?a.legendMaxWidth:c.width,a.legendVertical?(this.drawOptions.refSide=r,this.drawOptions.maxOtherSide=i):(this.drawOptions.refSide=i,this.drawOptions.maxOtherSide=r)):(this.drawOptions.refOffset=c[n],this.drawOptions.maxOtherSide=e||this.drawOptions.maxOtherSide),t=this.elem.gl.getLogicalSpace(this.drawOptions,!0),this.setCalculatedLogicalSpace(t),this.getCalculatedLogicalSpace()||l)},t.resetLegend=function(){var e;(e=this.elem&&this.elem.sGroup)&&e.reset()},t._calculateTopPosition=function(e){var t=this.getFromEnv("chart"),o=t.config,n=e,r=t.getChildren("caption")&&t.getChildren("caption")[0],i=t.getChildren("subCaption")&&t.getChildren("subCaption")[0],a=t.getChildren("chartMenuBar")&&t.getChildren("chartMenuBar")[0],l=o.oriTopSpace;return!o.toolbarY&&a&&a.props&&a.props.height&&(l>a.props.height+a.props.y||(n=a.props.y+a.props.height)),r&&r.config&&r.config.text&&r.config.text!==d.BLANKSTRING&&r.config.height&&1===r.config.isOnTop&&(n=r.config.height+r.config.y+r.config.captionPadding),i&&i.config&&i.config.height&&1===i.config.isOnTop&&(n=i.config.y+i.config.height+(r&&r.config&&r.config.captionPadding||0)),n>e?n:e},t.allocatePosition=function(){var e,t,o,n,r,i,a,l,s=this.getFromEnv("chart"),c=s.config,h=this.conf||{},d=h.legendPosition.split("-"),g=c.canvasLeft,u=c.canvasTop,p=c.canvasWidth,f=c.canvasHeight,m=c.marginTop,b=c.marginBottom,v=c.marginRight,y=c.marginLeft;s.config.gLegendEnabled&&(e=this.getCalculatedLogicalSpace(),o=h.width=e.width,n=h.height=e.height,"absolute"===d[0]?(a=c.width-o,l=c.height-n,r=h.legendXPosition<0?0:h.legendXPosition>a?a:h.legendXPosition,i=h.legendYPosition<0?0:h.legendYPosition>l?l:h.legendYPosition):"top"===d[0]||"bottom"===d[0]?(t=p-o,r="left"===d[1]?g:"right"===d[1]?g+(t>0?t:0):g+(t<0?0:t/2),i="top"===d[0]?this._calculateTopPosition(m):c.height-e.height-b-(c.actionBarHeight||0)):(t=f-n,i="top"===d[1]?u:"bottom"===d[1]?u+t:u+(t<0?0:t/2),r="left"===d[0]?y:c.width-e.width-v),h.xPos=r,h.yPos=i)},t.draw=function(){var e=this.getFromEnv("chart"),t=e.getFromEnv("dataSource").colorrange,o=this.conf||{},n=e.hasGradientLegend;e.config.gLegendEnabled&&t&&n&&this.drawLegendComponent(o.xPos,o.yPos,{parentGroup:e.getContainer("parentgroup"),animationManager:e.getFromEnv("animationManager")})},t.drawLegendComponent=function(e,t,o){var n,r=this.conf;this._dontPlot||(r.showLegend?(this.drawOptions.animationManager=o.animationManager,this.drawOptions.parentGroup=o.parentGroup,this.drawOptions.x=e,this.drawOptions.y=t,this.drawOptions.maxOtherSide=this.drawOptions.maxOtherSide||o.maxOtherSide,n=this.elem.gl.draw(this.drawOptions).getBBox(),r.xPos=n.x,r.yPos=n.y,r.height=n.height,r.width=n.width,this.enabled=!0):this.enabled=!1)},o}(g.ComponentInterface),x=function(){function e(e){this.carpet=e}var t=e.prototype;return t.draw=function(e){return this.carpet.draw(e)},t.getLogicalSpace=function(e,t){return this.carpet.getLogicalSpace(e,t)},t.dispose=function(){this.carpet&&this.carpet.group&&this.carpet.group.remove()},e}(),S=function(){function e(e){this.conf=e,this._id="GL_CARPET",this.compositionsByCategory={},this.node=r,this.group=r,this._lSpace=r,this.autoRecalculate=!1,this.groupName="fc-gradient-legend",this.moveInstructions={}}var t=e.prototype;return t.configure=function(e){this.conf=e},t.getName=function(){return"LegendCarpet"},t.getType=function(){return"legend"},t.addCompositions=function(e,t){this.compositionsByCategory[t]=e},t.removeCompositions=function(e){delete this.compositionsByCategory[e]},t.getBoundingBox=function(e){var t,o,n=this.conf,i=n.spreadFactor,a=e.refSide,l=e.alignment,s=e.refOffset,c=e.x,h=e.y;return"bottom"===this.conf.legendPosition?(t=n.width=a*i,o=e.maxOtherSide,!l||c!==r&&null!==c||(c=(s+a)/2-t/2)):(o=n.height=a*i,t=e.maxOtherSide,!l||h!==r&&null!==h||(h=(s+a)/2-o/2)),{width:t,height:o,x:c,y:h}},t.getPostCalcDecisionsH=function(e,t){var o,n=this.conf.padding,r=0;for(o in this.moveInstructions={},t)r+=t[o].height||0;e.height=r+2*n.v},t.getLogicalSpace=function(e,t){var o,n,r,i,a,l=this._lSpace,s=["CAPTION","LEGEND_BODY"],c=this.conf.padding,h=this.compositionsByCategory,d=0,g={},u=0;if(l&&!t)return l.isImpure=!0,l;(C((l=this._lSpace=n=this.getBoundingBox(e)).x)||C(l.y)||C(l.height)||C(l.width))&&(this.autoRecalculate=!0),(r=v(n,{})).height-=2*c.v,r.width-=2*c.h,r.x+=c.h,r.y+=c.v;for(var p=0;p<s.length;p++)(o=h[s[p]])&&((a=v(r,{})).y+=d,d=r.height*o.conf.spreadFactor,a.height=d+u,i=o.getLogicalSpace(v(a,{}),e,t),u=a.height-i.height,g[s[p]]=i,d=i.height);return this.getPostCalcDecisions(n,g),this._lSpace=n,n},t.setupDragging=function(){var e=this.group,t=0,o=0,n=0,r=0;e.css({cursor:"move"}),e.drag((function(i,a){t=i,o=a,e.attr({transform:"t"+(n+t)+","+(r+o)})}),(function(){n+=t,r+=o}),d.stubFN)},t.draw=function(e){var t,o,n,r=this.conf,i=["CAPTION","LEGEND_BODY"],l=this.compositionsByCategory,s=e.animationManager,c=e.parentGroup;this.getLogicalSpace(e,this.autoRecalculate),n=this._lSpace,this.group=t=s.setAnimation({el:this.group||"group",attr:{name:this.groupName},component:a,container:c,label:"carpetGroup"}),this.node=s.setAnimation({el:this.node||"rect",attr:n,css:r.style,component:a,container:t,label:"rect"});for(var h=0;h<i.length;h++)(o=l[i[h]])&&o.draw(r.captionAlignment,n,{animationManager:s,colorRange:e.colorRange,numberFormatter:e.numberFormatter,parentLayer:t,smartLabel:e.smartLabel,moveInstructions:this.moveInstructions[void 0],gLegend:e.gLegend});return r.allowDrag&&this.setupDragging(),this.node},t.getPostCalcDecisions=function(e,t){return"bottom"===this.conf.legendPosition?this.getPostCalcDecisionsH(e,t):this.getPostCalcDecisionsV(e,t)},t.getPostCalcDecisionsV=function(e,t){var o,n,r,i=this.conf.padding,a=Number.NEGATIVE_INFINITY,l=this.moveInstructions;for(n in this.getPostCalcDecisionsH(e,t),t)a=a<(o=t[n].width)?o:a;for(n in e.width=a+2*i.h,t)(r=a-(o=t[n].width))&&(l[n]="t"+r/2+",0")},e}(),L=function(){function e(e,t){this.rawText=e,this.conf=t,this._id="GL_CAPTION",this.node=r,this.bound=r,this._lSpace=r,this.LegendCaption={},this.LegendCaption.LEFT={x:function(e,t){return t.x+e.width/2+2}},this.LegendCaption.RIGHT={x:function(e,t){return t.x+t.width-e.width/2-2}},this.LegendCaption.CENTER={x:function(){var e=arguments[1];return e.x+e.width/2}}}var t=e.prototype;return t.configure=function(e,t){this.rawText=e,this.conf=t},t.getName=function(){return"LegendCaption"},t.getType=function(){return"caption"},t.getLogicalSpace=function(e,t,o){var n,i,a,l,s=this.conf.padding,c=this._lSpace,h=this.rawText,d=t.gLegend.getFromEnv("chartConfig");return c&&!o?(c.isImpure=!0,c):(c=this._lSpace={bound:{height:0,width:0},node:{logicArea:r,smartText:r}},n=t.smartLabel,h?((i=v(e,{})).height-=2*s.v,i.width-=2*s.h,i.x+=s.h,i.y+=s.v,n.useEllipsesOnOverflow(d.useEllipsesWhenOverflow),k(l=v(this.conf.style,{})),n.setStyle(this._metaStyle=l),a=n.getSmartText(h,i.width,i.height),i.height=a.height,i.width=a.width,e.height=a.height+2*s.v,e.width=a.width+2*s.h,c.node.smartText=a,c.node.logicArea=i,c.bound=e,e):c.bound)},t.draw=function(){var e,t,o,n,r,i,l,s,c,h,d,g=this.conf,u=g.bound||{};return arguments.length>=3?(l=arguments[0],s=arguments[1],c=arguments[2]):arguments.length>=2&&(l=arguments[0],c=arguments[1]),e=c.parentLayer,d=c.animationManager,this.group=t=d.setAnimation({el:this.group||"group",attr:{name:"legend-caption"},css:g.style,component:a,container:e}),this.getLogicalSpace(s,c),h=(r=this._lSpace).node,n=r.bound,this.bound=o=d.setAnimation({el:this.bound||"rect",attr:n,css:u.style,container:t,component:a}),i="string"==typeof l?this.LegendCaption[l.toUpperCase()].x(h.smartText,s||h.logicArea):l,this.node=d.setAnimation({el:this.node||"text",attr:{text:h.smartText.text,x:i,y:h.logicArea.y+h.smartText.height/2,lineHeight:this._metaStyle.lineHeight,fill:g.style.fill},container:t,component:a}),{group:t,bound:o,node:this.node}},t.dispose=function(){this.group.remove(),this.bound.remove(),this.node.remove()},e}(),T=function(){function e(e,t,o){this.colorRange=e,this.conf=t,this.childTextConf=o,this._id="GL_BODY",this.bound=r,this.group=r,this.compositionsByCategory={},this._lSpace=r,this.SC_STACK=[u.AXIS_LABEL,u.LEGEND_AXIS,u.AXIS_VALUE],this.DARW_STACK=[u.AXIS_VALUE,u.LEGEND_AXIS,u.AXIS_LABEL]}var t=e.prototype;return t.configure=function(e,t,o){this.colorRange=e,this.conf=t,this.childTextConf=o,this.compositionsByCategory={}},t.getName=function(){return"LegendBody"},t.getType=function(){return"legend"},t.addCompositions=function(e,t){this.compositionsByCategory[t]=e},t.getSpaceTaken=function(e){return"bottom"===this.conf.legendPosition?e.height:e.width},t.getLogicalSpace=function(e,t,o){var n,i,a,l,s,c,h,d=this._lSpace,g=this.conf.padding,u=this.compositionsByCategory,p=0;if(d&&!o)return d.isImpure=!0,d;for(d=this._lSpace={bound:{height:0,width:0},node:{logicArea:r}},(l=v(e,{})).height-=2*g.v,l.width-=2*g.h,l.x+=g.h,l.y+=g.v,s=this.getCompositionPlotAreaFor(l),t.colorRange=this.colorRange,c=0,h=this.SC_STACK.length;c<h;c++)(n=u[this.SC_STACK[c]])&&(i=s(a,n.conf.spreadFactor),a=n.getLogicalSpace(v(i,{}),t,o),p+=this.getSpaceTaken(a));return this.updateEffectivePlotArea(e,l,p),d.node.logicArea=l,d.bound=e,e},t.draw=function(){var e,t,o,n,r,i,l,s,c,h,d=this.childTextConf,g=this.conf,u=g.bound.style||{},p=this.compositionsByCategory;for(arguments.length>=3?(i=arguments[1],s=arguments[2]):arguments.length>=2&&(s=arguments[1]),t=s.parentLayer,e=s.animationManager,this.getLogicalSpace(i,s),l=this._lSpace,this.group=r=e.setAnimation({el:this.group||"group",attr:{name:"legend-body",transform:"t0,0"},css:d.style,container:t,component:a}),this.bound=o=e.setAnimation({el:this.bound||"rect",attr:l.bound,css:u,container:r,component:a}),s.colorRange=this.colorRange,s.parentLayer=r,c=0,h=this.DARW_STACK.length;c<h;c++)(n=p[this.DARW_STACK[c]])&&n.draw(s);return s.moveInstructions&&r.attr({transform:s.moveInstructions}),{bound:o,group:r}},t.getCompositionPlotAreaFor=function(e){var t,o="bottom"===this.conf.legendPosition;return t=v(e,{}),function(n,r){var i=n;return i=i||{},o?(t.y+=i.height||0,t.height=e.height*r):(t.x+=i.width||0,t.width=e.width*r),t}},t.updateEffectivePlotArea=function(e,t,o){var n=this.conf.padding;"bottom"===this.conf.legendPosition?(t.height=o,e.height=o+2*n.v):(t.width=o,e.width=o+2*n.h)},e}(),F=function(){function e(e){this.conf=e,this.node=[],this._id="GL_LABELS"}var t=e.prototype;return t.configure=function(e){this.conf=e},t.getType=function(){return"label"},t.getName=function(){return"LegendLabel"},t.getEffectivePlotArea=function(e){var t=this.conf.padding;return e.height-=2*t.v,e.width-=2*t.h,e.x+=t.h,e.y+=t.v,e},t.getLogicalSpace=function(e,t,o){var n,i,a,l,s,c,h,g,u,p,f,m,b,y,C,w,x,S,L,T,F,E,N,_="bottom"===this.conf.legendPosition,A=this._lSpace,I=this.conf,P=I.padding,O=[],M=t.gLegend.getFromEnv("chartConfig"),R=[];if(A&&!o)return A.isImpure=!0,A;for(n=t.colorRange,i=t.smartLabel,p=n.getCumulativeValueRatio(),a=n.colorRange,b=(A=this._lSpace={bound:{height:0,width:0},node:{logicArea:r,smartTexts:[]}}).node.smartTexts,g=v(e,{}),C=this.getEffectivePlotArea(g),N=_?C.width:C.height,i.useEllipsesOnOverflow(M.useEllipsesWhenOverflow),E=v(I.style,{}),k(this._metaStyle=E),i.setStyle(E),w=i.getSmartText("W"),l=0,s=a.length;l<s;l++)(u=(0,d.parseUnsafeString)(a[l].label))?R.push({oriIndex:l,label:u}):b[l]=r;if(0===(s=R.length))return{height:0,width:0};for(m=f=s>1?(p[R[s-1].oriIndex]-p[R[0].oriIndex])/2*N/100:Math.max(p[R[0].oriIndex],100-p[R[0].oriIndex])/2*N/100,_?((T=i.getSmartText(R[0].label,m,C.height)).x=p[R[0].oriIndex]*C.width/100,c=T.x+T.width):((T=i.getSmartText(R[0].label,m,C.width)).y=p[R[0].oriIndex]*C.height/100,c=T.y+T.width),O.push(T.height),b[R[0].oriIndex]=T,_?((T=i.getSmartText(R[s-1].label,m,C.height)).x=p[R[s-1].oriIndex]*C.width/100,h=T.x-T.width):((T=i.getSmartText(R[s-1].label,m,C.width)).y=p[R[s-1].oriIndex]*C.height/100,h=T.y-T.width),O.push(T.height),b[R[s-1].oriIndex]=T,L=c,l=1;l<s-1;l++)u=R[l].label,F=R[l].oriIndex,T=r,x=l+1===s-1?h:p[R[l+1].oriIndex]*N/100,S=p[R[l].oriIndex]*N/100,(f=Math.min(S-L,x-S))>2*w.width&&(_?(T=i.getSmartText(u,f,C.height)).x=p[F]*C.width/100:(T=i.getSmartText(u,f,C.width)).y=p[F]*C.height/100,L=f,O.push(T.height)),b[R[l].oriIndex]=T;return y=Math.max.apply(Math,O),_?(C.height=y,e.height=y+2*P.v):(C.width=y,e.width=y+2*P.v),A.node.logicArea=C,A.bound=e,e},t.draw=function(){var e,t,o,n,r,i,l,s,c,h,d,g,u="bottom"===this.conf.legendPosition,p=this.conf,f=p.bound&&p.bound.style||{stroke:"none"},m={};arguments.length>=2&&arguments[1]?(n=arguments[0],l=arguments[1]):arguments.length>=1&&(l=arguments[0]),g=l.animationManager,e=l.parentLayer,this.getLogicalSpace(n,l),c=(i=this._lSpace).node.logicArea,h=i.node.smartTexts,this.group=o=g.setAnimation({el:this.group||"group",attr:{name:"legend-labels"},container:e,component:a}),this.bound=t=g.setAnimation({el:this.bound||"rect",attr:i.bound,css:f,container:o,component:a});for(var b=0;b<this.node.length;b++)this.node[b].remove();for(this.node=[],s=0,d=h.length;s<d;s++)(r=h[s])&&(u?(m.y=c.y+r.height/2,m.x=s===d-1?c.x+r.x-r.width/2:s?c.x+r.x:c.x+r.x+r.width/2):(m.x=c.x+r.height/2,m.y=s===d-1?c.y+r.y-r.width/2:s?c.y+r.y:c.y+r.y+r.width/2),this.node.push(g.setAnimation({el:"text",attr:{text:r.text,x:m.x,y:m.y,lineHeight:this._metaStyle.lineHeight,fill:p.style.fill,transform:u?"R0":"R270,"+m.x+","+m.y},container:o,component:a})));return{group:o,bound:t,node:this.node}},e}(),E=function(){function e(e){this.conf=e,this._id="FL_AXIS",this.node=r,this.group=r,this.shadow=r,this.markerLine=r,this.compositionsByCategory={}}var t=e.prototype;return t.configure=function(e){this.conf=e},t.getName=function(){return"LegendAxis"},t.getType=function(){return"axis"},t.addCompositions=function(e,t){this.compositionsByCategory[t]=e},t.getLogicalSpace=function(){var e,t,o,n,i,a,l="bottom"===this.conf.legendPosition,s=arguments[0],c=arguments[2],h=this._lSpace,d=this.conf,g=d.padding,p=d.legendAxisHeight,f=this.compositionsByCategory,m=0;return h&&!c?(h.isImpure=!0,h):(h=this._lSpace={bound:{height:0,width:0},node:{logicArea:r}},(i=v(s,{})).height-=2*g.v,i.width-=2*g.h,i.x+=g.h,i.y+=g.v,e=p/2+d.line.offset,t=p/2,(n=f[u.RANGE])&&(a=n.sliders.false.conf.outerCircle.rFactor*p,t+=m=Math.max(a/2-p/2,0)),l?(i.y+=m,i.height=o=t+e+m,s.height=o+2*g.v):(i.x+=m,i.width=o=t+e+m,s.width=o+2*g.v),h.node.logicArea=i,h.bound=s,s)},t.getDrawableAxisArea=function(e){var t=this.conf,o="bottom"===this.conf.legendPosition;return{x:e.x,y:e.y,width:o?e.width:t.legendAxisHeight,height:o?t.legendAxisHeight:e.height,r:t.legendAxisHeight/2}},t.preDrawingRangeParamV=function(e){return{x:e.x+e.width/2,calculationBase:e.width,rangeStart:e.y,rangeEnd:e.y+e.height,prop:"x"}},t.preDrawingRangeParamH=function(e){return{y:e.y+e.height/2,calculationBase:e.height,rangeStart:e.x,rangeEnd:e.x+e.width,prop:"y"}},t.preDrawingRangeParam=function(e){return"bottom"===this.conf.legendPosition?this.preDrawingRangeParamH(e):this.preDrawingRangeParamV(e)},t.getScaleMarkerPathStrH=function(e,t){var o,n,r,i,a,l=v(e,{}),s=this.conf.line,c=d.BLANKSTRING,h=d.BLANKSTRING;for(l.x+=l.r,l.width-=2*l.r,a=l.y+l.height,o=0,n=t.length;o<n;o++)r=t[o],i=l.x+r*l.width/100,c+=m+i+","+(a-s.grooveLength)+b+i+","+(a+s.offset);return c+(h+=m+l.x+","+(a+s.offset)+b+(l.x+l.width)+","+(a+s.offset))},t.getColorGradientH=function(e){return{axis:e.getBoxFill(),shadow:(0,d.toRaphaelColor)({FCcolor:{alpha:"25,0,0",angle:90,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},t.draw=function(){var e,t,o,n,r,i,l,s,c,h,d,g,p,f,m=this.conf,b=m.bound||{},v=m.line,y=b.style||{},k=this.compositionsByCategory;for(o in arguments.length>=2?(t=arguments[0],g=arguments[1]):arguments.length>=1&&(g=arguments[0]),p=g.animationManager,e=g.parentLayer,r=(n=g.colorRange).getCumulativeValueRatio(),this.getLogicalSpace(t,g),d=this._lSpace,this.group=l=p.setAnimation({el:this.group||"group",attr:{name:"legend-axis"},container:e,component:a}),this.bound=p.setAnimation({el:this.bound||"rect",attr:d.bound,css:y,component:a,container:l}),h=this.getDrawableAxisArea(d.node.logicArea),c=this.getColorGradient(n),m.style.fill=c.axis,m.shadow.style.fill=c.shadow,this.node=p.setAnimation({el:this.node||"rect",attr:h,css:m.style,container:l,component:a}),this.shadow=p.setAnimation({el:this.shadow||"rect",attr:h,css:m.shadow.style,container:l,component:a}),f=this.getScaleMarkerPathStr(h,r),this.path=p.setAnimation({el:this.path||"path",attr:{path:f},css:v.style,container:l,component:a}),k)switch(i=k[o],o){case u.RANGE:g[(s=this.preDrawingRangeParam(h)).prop]=s[s.prop],g.key=s.prop,g.rCalcBase=s.calculationBase,g.parentLayer=l,i.draw(s.rangeStart,s.rangeEnd,g)}},t.getScaleMarkerPathStr=function(e,t){return"bottom"===this.conf.legendPosition?this.getScaleMarkerPathStrH(e,t):this.getScaleMarkerPathStrV(e,t)},t.getColorGradient=function(e){return"bottom"===this.conf.legendPosition?this.getColorGradientH(e):this.getColorGradientV(e)},t.getScaleMarkerPathStrV=function(e,t){var o,n,r,i,a,l=v(e,{}),s=this.conf.line,c=d.BLANKSTRING,h=d.BLANKSTRING;for(l.y+=l.r,l.height-=2*l.r,i=l.x+l.width,o=0,r=t.length;o<r;o++)n=t[o],a=l.y+n*l.height/100,c+=m+(i-s.grooveLength)+","+a+b+(i+s.offset)+","+a;return c+(h+=m+(i+s.offset)+","+l.y+b+(i+s.offset)+","+(l.y+l.height))},t.getColorGradientV=function(e){return{axis:e.getBoxFill(!0),shadow:(0,d.toRaphaelColor)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},e}(),N=function(){function e(e,t,o){this.conf=t.conf,this.sliderIndex=e,this.rangeGroup=t.sliderGroup,this._id=o,this.node=r,this.tracker=r,this.currPos=0,this.swing=[]}var t=e.prototype;return t.configure=function(e,t,o){this.conf=t.conf,this.sliderIndex=e,this.rangeGroup=t.sliderGroup,this._id=o,this.currPos=0,this.swing=[]},t.getType=function(){return"slider"},t.getName=function(){return"Slider"},t.updateSwingRange=function(e,t){this.swing[+e]=t},t.draw=function(e,t,o,n){var r,i,l,s,c,h,d,g=n.parentLayer,u=n.animationManager,f=this.conf,m=f.outerCircle,b=f.innerCircle,v=u.getFromEnv("chart").config,y=Math.ceil(m.rFactor*n.rCalcBase/2),k=Math.ceil(b.rFactor*n.rCalcBase/2),C=y-k,w=n.gLegend.getFromEnv("toolTipController"),x=this.sliderIndex;return f.outerRadius=y,f.innerRadius=k,this._scaleVal=t,b.style["stroke-width"]=C,k+=s=Math.ceil(m.style["stroke-width"]/2),i=this.node=u.setAnimation({el:this.node||"group",attr:{name:"fc-gl-slider",cursor:"pointer",transform:"t0,0"},container:g,component:a}),"x"===n.key?(c=o,h=e,h+=x?-k:+k):(c=e,h=o,c+=x?-k:+k),this.oCircle=u.setAnimation({el:this.oCircle||"circle",attr:{cx:c,cy:h,r:y},css:m.style,container:i,component:a}),this.iCircle=u.setAnimation({el:this.iCircle||"circle",attr:{cx:c,cy:h,r:k},css:b.style,container:i,component:a}),d=this.tracker=u.setAnimation({el:this.tracker||"circle",attr:{cx:c,cy:h,r:y+5,fill:p,stroke:p,cursor:"pointer"},container:i,component:a}),i.attr({transform:"x"===n.key?"t0,"+this.currPos:"t"+this.currPos+",0"}),r=v.showToolTip?t:"",w.enableToolTip(d,r),this._dragAPI=l=this.getDragAPI("x"===n.key),d.undrag(),d.drag(l.dragging,l.dragStart,l.dragEnd),{translateAscending:y+s}},t.getDragAPI=function(e){var t,o,n,r,i=this,a=i.node,l=i.sliderIndex,s=i.rangeGroup,c=i.conf.innerRadius;return{dragging:function(h){var d,g,u,p,f;return h.stopPropagation(),u=e?h.data[1]:h.data[0],l?(d=t[0]-t[1]+c,g=0):(d=0,g=t[1]-t[0]-c),(f=i.currPos+u)<d?u+=d-f:f>g&&(u-=f-g),a.attr({transform:e?"t0,"+(i.currPos+u):"t"+(i.currPos+u)+",0"}),o=u,n&&clearTimeout(n),n=setTimeout((function(){s.updateWhenInRest(i,i.currPos+u)}),100),p=s.updateWhenInMove(i,i.currPos+u),i.conf.showTooltip&&i.tracker.data("__FC_tooltipText",p),r=!0,!0},dragStart:function(e){e.stopPropagation(),t=i.swing,r=!1,s.dragStarted(i)},dragEnd:function(){var e;s.dragCompleted(i,r,i.currPos+o),r&&(n&&clearTimeout(n),n=setTimeout((function(){s.updateWhenInRest(i,i.currPos)}),100),i.currPos+=o,e=t[+l]+i.currPos,s.updateRange(i,e))}}},t.dispose=function(){this.node.remove(),this.oCircle.remove(),this.iCircle.remove(),this.tracker.remove()},e}(),_=function(){function e(e){var t=e,o={};this._id="GL_SG1",this.conf=e,o.conf=t,this.extremes=[],this.sliders={},this.min=r,this.max=r,o.sliderGroup=this,this.valueRange=[],this.callbacks=[],this.sliders[!1]=new N(!1,o,this._id+"_0"),this.sliders[!0]=new N(!0,o,this._id+"_1")}var t=e.prototype;return t.configure=function(e){var t=e,o={};this.min=r,this.max=r,this.conf=e,o.conf=t,o.sliderGroup=this,this.sliders[!1].configure(!1,o,this._id+"_0"),this.sliders[!0].configure(!0,o,this._id+"_1")},t.getType=function(){return"slider"},t.getName=function(){return"SliderGroup"},t.initRange=function(e,t){var o=e.sliderIndex;this.extremes[+o]=t},t.updateRange=function(e,t){var o=e.sliderIndex;this.sliders[!o].updateSwingRange(o,t)},t.reset=function(){var e={};e.conf=this.conf,e.sliderGroup=this,this.min=r,this.max=r,this.sliders[!1].configure(!1,e,this._id+"_0"),this.sliders[!0].configure(!0,e,this._id+"_1"),this.draw.apply(this,this._drawParams)},t.draw=function(e,t,o){var n,r,i,a,l,s,c=this.sliders,h=c[!1],d=c[!0],g=o.colorRange,u=g.colorRange,p=g.data.mapByPercent,f=o.gLegend.getFromEnv("number-formatter");return this._fcChart=o.gLegend.getFromEnv("chart"),this.getValueFormPixel=function(e,t,o,n){var r=(t-e)/(n-o);this.getValueFormPixel=function(t){return e+r*t}},this.updateWhenInMove=function(e,t){this.updateWhenInMove=function(o,n){var r,i,a=this.extremes;return r=o.sliderIndex?a[1]-a[0]+n:n,i=this.getValueFormPixel(r),i=t?parseFloat(i).toFixed(2)+"%":e.legendValue(i)}},this._drawParams=[e,t,o],this.updateWhenInMove(f,p),i=h.conf.outerCircle,r=h.conf.innerCircle,a=Math.ceil(r.rFactor*o.rCalcBase/2),a+=Math.ceil(i.style["stroke-width"]/2),this.extremes[0]=e+a,this.extremes[1]=t-a,l=this.extremes[1]-this.extremes[0],this.min=this.min?this.min:u[0].value,this.max=this.max?this.max:u[u.length-1].value,s=u[u.length-1].value-u[0].value,h.currPos=l*(this.min-u[0].value)/s,d.currPos=l*(this.max-u[0].value)/s-l,h.draw(e,p?f.legendPercentValue(this.min):f.legendValue(this.min),o[o.key],o),n=d.draw(t,p?f.legendPercentValue(this.max):f.legendValue(this.max),o[o.key],o),h.swing=this.extremes.slice(0),d.swing=this.extremes.slice(0),h.swing[1]+=d.currPos,d.swing[0]+=h.currPos,this.getValueFormPixel(u[0].value,u[u.length-1].value,this.extremes[0],this.extremes[1]),n},t.updateWhenInRest=function(e,t){var o,n,r=this.sliders,i=this.extremes,a=e.sliderIndex;a?(o=r[!a].currPos,n=i[1]-i[0]+t):(o=t,n=i[1]-i[0]+r[!a].currPos),this.min=Number(this.getValueFormPixel(o).toFixed(2)),this.max=Number(this.getValueFormPixel(n).toFixed(2)),this.gLegend.fireEvent("rangeUpdated",[{min:this.min,max:this.max}])},t.dragStarted=function(e){var t=this.sliders,o=this.extremes,n=e.conf,r=this._fcChart;r.fireChartInstanceEvent("legendpointerdragstart",{pointerIndex:+e.sliderIndex,pointers:[{value:this.getValueFormPixel(t.false.currPos)},{value:this.getValueFormPixel(o[1]-o[0]+t.true.currPos)}],legendPointerHeight:n.outerRadius,legendPointerWidth:n.innerRadius,outerRadius:n.outerRadius,innerRadius:n.innerRadius},[r.id])},t.dragCompleted=function(e,t,o){var n,r,i=this.sliders,a=this.extremes,l=e.conf,s=this.getValueFormPixel(i.false.currPos),c=this.getValueFormPixel(a[1]-a[0]+i.true.currPos),h=this._fcChart;e.sliderIndex?(n=s,r=this.getValueFormPixel(a[1]-a[0]+o)):(n=this.getValueFormPixel(o),r=c),t&&h.fireChartInstanceEvent("legendrangeupdated",{previousMinValue:s,previousMaxValue:c,minValue:n,maxValue:r},[h.id]),h.fireChartInstanceEvent("legendpointerdragstop",{pointerIndex:+e.sliderIndex,pointers:[{value:n},{value:r}],legendPointerHeight:l.outerRadius,legendPointerWidth:l.innerRadius,outerRadius:l.outerRadius,innerRadius:l.innerRadius},[h.id])},t.dispose=function(){this.sliders[!1].dispose(),this.sliders[!0].dispose()},e}(),A=function(e){function t(){var t;return(t=e.call(this,arguments[0])||this)._id="GL_VALUES",t.node=[],t}(0,h.default)(t,e);var o=t.prototype;return o.configure=function(e){this.conf=e},o.getName=function(){return"LegendValues"},o.getType=function(){return"legend"},o.getLogicalSpace=function(e,t,o){var n,i,a,l,s,c,h,d,g,u,p,f,m,b,y,C,w,x,S,L,T,F,E,N,_,A="bottom"===this.conf.legendPosition,I=this._lSpace,P=this.conf,O=P.padding,M=t.gLegend.getFromEnv("chartConfig"),R=[],B=[];if(I&&!o)return I.isImpure=!0,I;for(n=t.colorRange,i=t.smartLabel,a=n.colorRange,h=n.getCumulativeValueRatio(),_=(I=this._lSpace={bound:{height:0,width:0},node:{logicArea:r,smartTexts:[]}}).node.smartTexts,(L=v(e,{})).height-=2*O.v,L.width-=2*O.h,L.x+=O.h,L.y+=O.v,i.useEllipsesOnOverflow(M.useEllipsesWhenOverflow),N=v(P.style,{}),k(this._metaStyle=N),i.setStyle(N),E=i.getSmartText("W"),c=a.length,A?(p=d=(h[c-1]-h[0])/2*L.width/100,F=a[0].displayValue,(l=i.getSmartText("string"!=typeof F&&F!==r&&F.toString()||F,p,L.height)).x=h[0]*L.width/100,f=l.x+l.width,R.push(l.height)):(p=d=(h[c-1]-h[0])/2*L.height/100,(l=i.getSmartText(a[0].displayValue,L.width,p)).y=h[0]*L.height/100,y=l.y+l.width,B.push(l.width)),_[0]=l,A?((l=i.getSmartText(a[c-1].displayValue,p,L.height)).x=h[c-1]*L.width/100,b=l.x-l.width,R.push(l.height),m=f):((l=i.getSmartText(a[c-1].displayValue,L.width,p)).y=h[c-1]*L.height/100,w=l.y-l.height,B.push(l.width),C=y),_[c-1]=l,s=1;s<c-1;s++)l=r,T=a[s].displayValue,A?(g=s+1===c-1?b:h[s+1]*L.width/100,u=h[s]*L.width/100,(d=Math.min(u-m,g-u))>1.5*E.width&&((l=i.getSmartText(T,2*d,L.height)).x=h[s]*L.width/100,m=d,R.push(l.height))):(g=s+1===c-1?w:h[s+1]*L.height/100,u=h[s]*L.height/100,(d=Math.min(u-C,g-u))>2*E.height&&((l=i.getSmartText(T,L.width,2*d)).y=h[s]*L.height/100,C=d,B.push(l.width))),_[s]=l;return A?(x=Math.max.apply(Math,R),L.height=x,e.height=x+2*O.v):(S=Math.max.apply(Math,B),L.width=S,e.width=S+2*O.h),I.node.logicArea=L,I.bound=e,e},o.draw=function(){var e,t,o,n,r,i,l,s,c,h,d,g,u,p=this.conf,f="bottom"===p.legendPosition,m=p.bound&&p.bound.style||{stroke:"none"},b={};arguments.length>=2&&arguments[1]?(n=arguments[0],l=arguments[1]):arguments.length>=1&&(l=arguments[0]),u=l.animationManager,e=l.parentLayer,s=l.colorRange.getCumulativeValueRatio(),this.getLogicalSpace(n,l),i=(r=this._lSpace).node.logicArea,d=r.node.smartTexts,this.group=o=u.setAnimation({el:this.group||"group",attr:{name:"legend-values"},container:e,component:a}),this.bound=t=u.setAnimation({el:this.bound||"rect",attr:r.bound,css:m,container:o,component:a});for(var v=0;v<this.node.length;v++)this.node[v].remove();for(this.node=[],c=0,h=s.length;c<h;c++)(g=d[c])&&(f?(b.y=i.y+g.height/2,b.x=c===h-1?i.x+g.x-g.width/2:c?i.x+g.x:i.x+g.x+g.width/2):(b.x=i.x+g.width/2,b.y=c===h-1?i.y+g.y-g.height/2:c?i.y+g.y:i.y+g.y+g.height/2),this.node.push(u.setAnimation({el:"text",attr:{text:g.text,x:b.x,y:b.y,lineHeight:this._metaStyle.lineHeight,fill:p.style.fill},container:o,component:a})));return{group:o,bound:t}},t}(F),I=w;t.default=I}}]);